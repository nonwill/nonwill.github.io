<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>ä½¿ç”¨ MSVC 2019 Build Tools æ„å»º ONNX Runtime v1.22.2</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="ONNX Runtime,MSVC2019,cmake,msvc2019,Windows"><meta name=description content="Windows å¦‚ä½•ä»æºç å®‰è£… ONNX Runtime v1.22.2"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>ä½¿ç”¨ MSVC 2019 Build Tools æ„å»º ONNX Runtime v1.22.2</span><span class=btRight><span title="Translator Â· ç¿»è¯‘" class=author><a href=https://autoptr.top/license/ style=color:red title="All rights reserved Â· è¯‘æ–‡æˆ–åŸåˆ›å†…å®¹Â·ç‰ˆæƒæ‰€æœ‰" target=_blank rel=nofollow>&copy;</a><a href=.. title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><h3 id=è¿è¡Œç¯å¢ƒ>è¿è¡Œç¯å¢ƒ</h3><ol><li>Enterprise Windows Driver Kit with Microsoft C++ 2019 Build Tools</li><li>ç‹¬ç«‹å®‰è£…<code>cmake-3.28.6-win32-x86</code>æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>msys2 - å®‰è£…<code>pythonã€gitã€tarã€zipã€p7z</code> ç­‰å·¥å…·</li></ol><h3 id=å¯åŠ¨ç¯å¢ƒ>å¯åŠ¨ç¯å¢ƒ</h3><ol><li>å¯åŠ¨<code>EWDK</code>-<code>x64</code>æˆ–<code>x86</code>æ§åˆ¶å°ï¼Œåœ¨å…¶ä¸­æ‰§è¡Œ<code>msys2_shell.cmd</code>(å¦‚ä¸‹æ“ä½œå‡åœ¨<code>msys2</code>çš„<code>shell</code>ä¸­æ‰§è¡Œ)</li><li>æ£€æŸ¥ç¼–è¯‘æ‰€éœ€å¼€å‘ç»„ä»¶</li></ol><blockquote><p>where cmake python nmake cl ml64 ml
nmake -? && cl</p></blockquote><ol start=3><li>å¦‚ç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªæ˜“æ··æ·†çš„<code>cmake</code>å’Œ<code>python</code></li></ol><blockquote><p>é€šè¿‡åœ¨<code>shell</code>ä¸­è®¾ç½®<code>PATH</code>æ¥ç¡®ä¿<code>cmake</code>ä¸èƒ½ç”¨<code>msys2</code>çš„ï¼Œ<br>è€Œ<code>python</code>è¦ç”¨<code>msys2</code>çš„</p></blockquote><h3 id=ä¸‹è½½æºç >ä¸‹è½½æºç </h3><ol start=4><li>æ£€å‡º<code>onnxruntime-1.22.2</code>ä»£ç </li></ol><blockquote><p>git clone -b rel-1.22.2 &ndash;recursive <a href=https://github.com/microsoft/onnxruntime.git>https://github.com/microsoft/onnxruntime.git</a></p></blockquote><ol start=5><li>è¿›å…¥<code>onnxruntime</code>ä»£ç ç›®å½•</li></ol><blockquote><p>cd onnxruntime</p></blockquote><ol start=6><li>æ£€å‡ºå­æ¨¡å—ä»£ç </li></ol><blockquote><p>git submodule update &ndash;init &ndash;recursive</p></blockquote><h3 id=ç¼–è¯‘è¿‡ç¨‹>ç¼–è¯‘è¿‡ç¨‹</h3><ol><li>è®¾ç½®ç¯å¢ƒå˜é‡<code>build_dir</code>ä¸ºç¼–è¯‘å·¥ä½œç›®å½•ï¼Œæ‰§è¡Œç¼–è¯‘è„šæœ¬</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>build_dir<span style=color:#f92672>=</span>./build_cpp_only
</span></span><span style=display:flex><span>python3 ./tools/ci_build/build.py <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --compile_no_warning_as_error <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --build_dir $build_dir <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --config Release <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --update --build <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --build_shared_lib <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cmake_generator <span style=color:#e6db74>&#34;NMake Makefiles&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cmake_extra_defines onnxruntime_BUILD_UNIT_TESTS<span style=color:#f92672>=</span>OFF <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cmake_extra_defines CMAKE_INSTALL_PREFIX<span style=color:#f92672>=</span>$build_dir/install/ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --skip_tests 
</span></span></code></pre></div><ol start=2><li>å¦‚éœ€è‡ªåŠ¨å®‰è£…ï¼Œè¯·åœ¨ç¼–è¯‘è„šæœ¬åè¿½åŠ <code>--target install </code>é¡¹</li></ol><blockquote><p>ä¸‹è¿°éœ€è¦å¹²é¢„ç¼–è¯‘è¿‡ç¨‹ï¼Œæ•…å¿½ç•¥æ­¤æ­¥</p></blockquote><h3 id=å¹²é¢„protobufçš„ç¼–è¯‘>å¹²é¢„<code>protobuf</code>çš„ç¼–è¯‘</h3><ol><li>æ‰“å¼€<code>$build_dir/Release/_deps/protobuf-build/CMakeFiles/*.dir/flags.make</code></li><li>ä¿®æ”¹<code>CXX_FLAGS</code>ä¸­çš„<code>/MT</code>ä¸º<code>/MD</code></li><li>æ‰§è¡Œæ„å»ºå‘½ä»¤</li></ol><blockquote><p>cd $build_dir/Release && nmake</p></blockquote><h3 id=å¹²é¢„onnxçš„ç¼–è¯‘åŒæ ·é€‚åº”äºdebianç‰ˆæœ¬>å¹²é¢„<code>onnx</code>çš„ç¼–è¯‘(åŒæ ·é€‚åº”äº<code>Debian</code>ç‰ˆæœ¬)</h3><ol><li>æ‰“å¼€<code>$build_dir/Release/_deps/onnx-build/CMakeFiles/*_proto.dir/build.make</code></li><li>ä¿®æ”¹<code>python.exe */onnx-src/onnx/gen_proto.py</code>ä¸º<code>python.exe ../onnx-src/onnx/gen_proto.py</code></li><li>æ‰§è¡Œæ„å»ºå‘½ä»¤</li></ol><blockquote><p>cd $build_dir/Release && nmake</p></blockquote><h3 id=å¹²é¢„32ä½x86ç‰ˆæœ¬mlasæœ€é«˜æ”¯æŒavx2çš„ç¼–è¯‘>å¹²é¢„<code>32</code>ä½(x86)ç‰ˆæœ¬<code>mlas</code>(æœ€é«˜æ”¯æŒ<code>avx2</code>)çš„ç¼–è¯‘</h3><ol><li>æ‰“å¼€<code>$build_dir/Release/CMakeFiles/onnxruntime_mlas..dir/build.make</code></li></ol><blockquote><p>åˆ é™¤æ‰€æœ‰<code>avx512</code>çš„<code>C++</code>ç¼–è¯‘å†…å®¹å’Œ<code>amd64\*.asm</code>ç¼–è¯‘å†…å®¹<br>æ·»åŠ <code>onnxruntime\core\mlas\lib\i386\*.asm</code>å¯¹åº”çš„ç¼–è¯‘å†…å®¹</p></blockquote><ol start=2><li>ä¿®æ‰“å¼€<code>$build_dir/Release/CMakeFiles/onnxruntime_mlas..dir/objects1.rsp</code></li></ol><blockquote><p>åˆ é™¤æ‰€æœ‰<code>avx512</code>çš„å†…å®¹å’Œ<code>amd64\*.asm</code>å†…å®¹<br>è¿½åŠ <code>onnxruntime\core\mlas\lib\i386\*.asm</code>å¯¹åº”çš„å†…å®¹</p></blockquote><ol start=3><li>ä¿®æ‰“å¼€<code>onnxruntime\core\mlas\lib\amx_common.h</code>æºç </li></ol><blockquote><p>åœ¨<code>#ifdef _WIN32</code>å’Œ<code>#define tile_dpbssd*</code>ä¹‹é—´æ·»åŠ å¦‚ä¸‹å†…å®¹</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#75715e>#if !defined (_M_X64)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// AMX
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>int</span> __tile;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_loadconfig</span>(<span style=color:#66d9ef>const</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_storeconfig</span>(<span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_release</span>(<span style=color:#66d9ef>void</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_loadd</span>(__tile dst, <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>base, <span style=color:#66d9ef>int</span> stride);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_stream_loadd</span>(__tile dst, <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>base, <span style=color:#66d9ef>int</span> stride);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_stored</span>(__tile src, <span style=color:#66d9ef>void</span> <span style=color:#f92672>*</span>base, <span style=color:#66d9ef>int</span> stride);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_zero</span>(__tile dst);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_dpbf16ps</span>(__tile dst, __tile src1, __tile src2);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_dpbssd</span>(__tile dst, __tile src1, __tile src2);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_dpbsud</span>(__tile dst, __tile src1, __tile src2);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_dpbusd</span>(__tile dst, __tile src1, __tile src2);
</span></span><span style=display:flex><span><span style=color:#66d9ef>extern</span> <span style=color:#66d9ef>void</span> <span style=color:#66d9ef>__cdecl</span> <span style=color:#a6e22e>_tile_dpbuud</span>(__tile dst, __tile src1, __tile src2);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#endif  </span><span style=color:#75715e>/* defined (_M_X64) */</span><span style=color:#75715e>
</span></span></span></code></pre></div><ol start=4><li>æ‰§è¡Œæ„å»ºå‘½ä»¤</li></ol><blockquote><p>cd $build_dir/Release && nmake</p></blockquote><h3 id=å¹²é¢„onnxruntime_generate_defçš„ç¼–è¯‘>å¹²é¢„<code>onnxruntime_generate_def</code>çš„ç¼–è¯‘</h3><ol><li>æ‰“å¼€<code>$build_dir/Release/CMakeFiles/onnxruntime_generate_def.dir/build.make</code></li><li>ä¿®æ”¹<code>python3 */tools/ci_build/gen_def.py</code>ä¸º<code>python3 ../../tools/ci_build/gen_def.py</code></li><li>æ‰§è¡Œæ„å»ºå‘½ä»¤</li></ol><blockquote><p>cd $build_dir/Release && nmake</p></blockquote><h3 id=å®‰è£…å¼€å‘æ–‡ä»¶>å®‰è£…å¼€å‘æ–‡ä»¶</h3><blockquote><p>cd $build_dir/Release && nmake install</p></blockquote><h3 id=debian-ç‰ˆæœ¬>Debian ç‰ˆæœ¬</h3><ol><li>ä¸‹è½½<a href=https://cmake.org/files/v3.28/cmake-3.28.6-linux-x86_64.tar.gz>cmake-3.28.6-linux-x86_64.tar.gz</a></li><li>è§£å‹åå°†<code>cmake-3.28.6-linux-x86_64/bin</code>æ·»åŠ åˆ°<code>PATH</code>å‰é¢</li><li>å‡†å¤‡æºç ï¼Œè®¾ç½®ç¯å¢ƒå˜é‡<code>build_dir</code>ï¼Œæ‰§è¡Œç¼–è¯‘è„šæœ¬</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>build_dir<span style=color:#f92672>=</span>./build_cpp_only
</span></span><span style=display:flex><span>python3 ./tools/ci_build/build.py <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --compile_no_warning_as_error <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --build_dir $build_dir <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --config Release <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --update --build <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --build_shared_lib <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cmake_generator <span style=color:#e6db74>&#34;Unix Makefiles&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cmake_extra_defines onnxruntime_BUILD_UNIT_TESTS<span style=color:#f92672>=</span>OFF <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --cmake_extra_defines CMAKE_INSTALL_PREFIX<span style=color:#f92672>=</span>$build_dir/install/ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --skip_tests 
</span></span></code></pre></div><ol start=4><li>å¹²é¢„<code>onnx</code>çš„ç¼–è¯‘åŒ<code>msvc2019</code>ç‰ˆæœ¬</li></ol><blockquote><p>å¦‚æœ‰å¤šä¸ª<code>python</code>ç‰ˆæœ¬ï¼Œç¡®ä¿è¿è¡Œ<code>python3</code></p></blockquote><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2025-08-31 </a><a href=https://autoptr.top/license/ title="All rights reserved Â· åŸåˆ›å†…å®¹Â·ç‰ˆæƒæ‰€æœ‰" target=_blank rel=nofollow>&copy;</a></span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 AuTopTr ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/ONNX target=_blank>ONNX</a></li><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/C target=_blank>C</a></li><li><a class=link href=https://autoptr.top/tags/OCR target=_blank>OCR</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Notes target=_blank>Notes</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li><li><a class=link href=https://autoptr.top/categories/%e5%88%92%e8%af%8d target=_blank>åˆ’è¯</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>