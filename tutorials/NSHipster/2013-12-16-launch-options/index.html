<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>UIApplicationDelegate launchOptions</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="UIApplicationDelegate launchOptions,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="UIApplicationDelegate launchOptions,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>UIApplicationDelegate launchOptions</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Croath Liu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>AppDelegate æ˜¯ iOS å„ç§åŠŸèƒ½çš„é›†æ•£ä¸­å¿ƒã€‚</p><p>åº”ç”¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŸURL è·¯ç”±ï¼Ÿé€šçŸ¥ï¼ŸCore Data å’’è¯­ï¼Ÿå„ç§ä¸‰æ–¹ SDK çš„åˆå§‹åŒ–ï¼Ÿä¸€äº›ä¼¼ä¹æ”¾åœ¨å“ªé‡Œéƒ½ä¸åˆé€‚çš„é›¶æ•£åŠŸèƒ½ï¼Ÿç»Ÿç»Ÿä¸¢è¿› <code>AppDelegate.m</code> é‡Œå§ï¼</p><p>åœ¨ AppDelegate æ‰€æœ‰è¿™äº›æ‹¥æŒ¤çš„ã€è¶…å‡ºè´Ÿè½½çš„æ–¹æ³•ä¸­ï¼Œ-application:didFinishLaunchingWithOptions: æ˜¯æœ€è‡ƒè‚¿çš„ä¸€ä¸ªäº†ã€‚</p><p>å¯¹äºå¾ˆå¤šå¼€å‘è€…æ¥è¯´ <code>launchOptions</code> å‚æ•°å°±æ˜¯ç±»ä¼¼äº Java çš„ <code>main</code> å‡½æ•°ä¸­ <code>String[] args</code> çš„ä½œç”¨ â€”â€” åœ¨æ„å»ºåº”ç”¨æ—¶å€™ä¸€èˆ¬æ˜¯è¢«å¿½ç•¥çš„ã€‚åœ¨å…¶å¹³æ·¡çš„å¤–è¡¨ä¸‹ï¼Œ<code>launchOptions</code> å…¶å®éšè—ç€ iOS åº”ç”¨å¯åŠ¨æ—¶æºå¸¦çš„å¤§é‡æ ¸å¿ƒä¿¡æ¯ã€‚</p><p>NSHipster æœ¬å‘¨æŠ«éœ²çš„çŸ¥è¯†ç‚¹æ˜¯å…³äºæˆ‘ä»¬å¹³æ—¶å…³å¿ƒæœ€å°‘çš„ã€ä½†åˆæ˜¯ UIKit ä¸­æœ€é‡è¦çš„ä¸œè¥¿ï¼š<code>launchOptions</code>ã€‚</p><hr><p>æ¯ä¸ªåº”ç”¨éƒ½ä½¿ç”¨ <code>UIApplicationDelegate -application:didFinishLaunchingWithOptions:</code>ï¼ˆæ›´ç²¾ç¡®åœ°è¯´ä»¥åæˆ–è®¸ä¹ŸåŒ…å« <code>-application:willFinishLaunchingWithOptions:</code>ï¼‰ å¯åŠ¨ã€‚åº”ç”¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥å‘Šè¯‰ delegate è¿›ç¨‹å·²ç»å¯åŠ¨å®Œæ¯•ï¼Œå·²ç»å‡†å¤‡å¥½è¿è¡Œäº†ã€‚</p><p>åœ¨ <a href=https://en.wikipedia.org/wiki/SpringBoard>Springboard</a> ä¸­ç‚¹å‡»å›¾æ ‡åº”ç”¨å°±å¼€å§‹å¯åŠ¨äº†ï¼Œä½†ä¹Ÿæœ‰å…¶ä»–ä¸€äº›å¯åŠ¨çš„æ–¹æ³•ã€‚æ¯”å¦‚è¯´æ³¨å†Œäº†è‡ªå®šä¹‰ URL scheme çš„åº”ç”¨å¯ä»¥ä»¥ç±»ä¼¼äº <code>twitter://</code> çš„æ–¹å¼ä»ä¸€ä¸ª URL å¯åŠ¨ã€‚åº”ç”¨å¯ä»¥é€šè¿‡æ¨é€é€šçŸ¥æˆ–åœ°ç†ä½ç½®å˜æ›´å¯åŠ¨ã€‚</p><p>æŸ¥æ˜åº”ç”¨ä¸ºä»€ä¹ˆä»¥åŠæ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼Œå°±æ˜¯ <code>launchOptions</code> å‚æ•°çš„èŒè´£æ‰€åœ¨ã€‚å°±åƒ <code>userInfo</code> å­—å…¸ä¸€æ ·ï¼Œåœ¨ <code>-application:didFinishLaunchingWithOptions:</code> çš„ <code>launchOptions</code> ä¸­ä¹ŸåŒ…å«å¾ˆå¤šç‰¹åˆ«å‘½åçš„é”®ã€‚</p><blockquote><p>è¿™äº›é”®ä¸­çš„è®¸å¤šåœ¨åº”ç”¨å¯åŠ¨æ—¶å‘å‡ºçš„ <code>UIApplicationDidFinishLaunchingNotification</code> çš„é€šçŸ¥ä¸­ä¹Ÿå¯ç”¨ï¼Œè¯¦ç»†å†…å®¹è¯·æŸ¥é˜…æ–‡æ¡£ã€‚</p></blockquote><p><code>launchOptions</code> åŒ…å«çš„é”®å¤ªå¤šäº†ï¼ŒæŒ‰ç…§åº”ç”¨å¯åŠ¨åŸå› åˆ†ç»„ç†è§£èµ·æ¥æ›´å®¹æ˜“ä¸€ç‚¹ï¼š</p><h2 id=ä»-url-æ‰“å¼€>ä» URL æ‰“å¼€</h2><p>å…¶ä»–åº”ç”¨é€šè¿‡ä¼ é€’ URL å¯ä»¥æ‰“å¼€ä¸€ä¸ªåº”ç”¨ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>[[UIApplication sharedApplication] openURL:[NSURL URLWithString:<span style=color:#e6db74>@&#34;app://...&#34;</span>]];
</span></span></code></pre></div><p>ä¾‹å¦‚ï¼š<code>http://</code> å¼€å¤´çš„ URL ä¼šåœ¨ Safari ä¸­æ‰“å¼€ï¼Œ<code>mailto://</code> å¼€å¤´çš„ URL ä¼šåœ¨é‚®ä»¶ä¸­æ‰“å¼€ï¼Œ<code>tel://</code> å¼€å¤´çš„ URL ä¼šåœ¨ç”µè¯ä¸­æ‰“å¼€ã€‚</p><p>è¿™äº›æƒ…å†µä¸‹ <code>UIApplicationLaunchOptionsURLKey</code> é”®å°±ä¼šå¾ˆå¸¸ç”¨äº†ã€‚</p><blockquote><ul><li><code>UIApplicationLaunchOptionsURLKey</code>: æ ‡ç¤ºåº”ç”¨æ˜¯é€šè¿‡ URL æ‰“å¼€çš„ã€‚å…¶å¯¹åº”çš„å€¼ä»£è¡¨åº”ç”¨è¢«æ‰“å¼€æ—¶ä½¿ç”¨çš„ <code>NSURL</code> å¯¹è±¡ã€‚</li></ul></blockquote><p>åº”ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ URL å’Œé™„åŠ ç³»ç»Ÿä¿¡æ¯æ‰“å¼€ã€‚å½“åº”ç”¨ä» AirDrop çš„ <code>UIDocumentInteractionController</code> ä¸­æ‰“å¼€æ—¶ï¼Œ<code>launchOptions</code> ä¼šåŒ…å«ä¸‹åˆ—è¿™é”®ï¼š</p><blockquote><ul><li><code>UIApplicationLaunchOptionsSourceApplicationKey</code>ï¼šè¯·æ±‚æ‰“å¼€åº”ç”¨çš„åº”ç”¨ idã€‚å¯¹åº”çš„å€¼æ˜¯è¯·æ±‚æ‰“å¼€åº”ç”¨çš„ bundle ID çš„ <code>NSString</code> å¯¹è±¡</li><li><code>UIApplicationLaunchOptionsAnnotationKey</code>ï¼šæ ‡ç¤ºé€šè¿‡ URL æ‰“å¼€åº”ç”¨æ—¶æºå¸¦äº†è‡ªå®šä¹‰æ•°æ®ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å«è‡ªå®šä¹‰æ•°æ®çš„å±æ€§åˆ—è¡¨å¯¹è±¡</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSURL <span style=color:#f92672>*</span>fileURL <span style=color:#f92672>=</span> [[NSBundle mainBundle] URLForResource:<span style=color:#e6db74>@&#34;Document&#34;</span> withExtension:<span style=color:#e6db74>@&#34;pdf&#34;</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (fileURL) {
</span></span><span style=display:flex><span>    UIDocumentInteractionController <span style=color:#f92672>*</span>documentInteractionController <span style=color:#f92672>=</span> [UIDocumentInteractionController interactionControllerWithURL:fileURL];
</span></span><span style=display:flex><span>    documentInteractionController.annotation <span style=color:#f92672>=</span> <span style=color:#ae81ff>@{</span><span style=color:#e6db74>@&#34;foo&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>@&#34;bar&#34;</span><span style=color:#ae81ff>}</span>;
</span></span><span style=display:flex><span>    [documentInteractionController setDelegate:self];
</span></span><span style=display:flex><span>    [documentInteractionController presentPreviewAnimated:YES];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=å“åº”é€šçŸ¥>å“åº”é€šçŸ¥</h2><p>ä¸è¦å’Œ <a href=https://nshipster.com/nsnotification-and-nsnotificationcenter/><code>NSNotification</code></a> æ··æ·†äº†ï¼Œåº”ç”¨å¯ä»¥é€šè¿‡æœ¬åœ°ï¼ˆlocalï¼‰æˆ–è¿œç¨‹ï¼ˆremoteï¼‰é€šçŸ¥æ‰“å¼€ã€‚</p><h3 id=æ¨é€é€šçŸ¥>æ¨é€é€šçŸ¥</h3><p>è‡ª iOS 3 å¼€å§‹å¼•å…¥çš„ remoteï¼ˆæˆ–è€…å« pushï¼‰notification æ˜¯åœ¨ç§»åŠ¨å¹³å°ä¸Šçš„é‡è¦ç‰¹æ€§ã€‚</p><p>åœ¨ <code>application:didFinishLaunchingWithOptions:</code> ä¸­è°ƒç”¨ <code>registerForRemoteNotificationTypes:</code> æ¥æ³¨å†Œæ¨é€é€šçŸ¥ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>[application registerForRemoteNotificationTypes:
</span></span><span style=display:flex><span>	UIRemoteNotificationTypeBadge <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>    UIRemoteNotificationTypeSound <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span>	UIRemoteNotificationTypeAlert];
</span></span></code></pre></div><p>å¦‚æœè°ƒç”¨æˆåŠŸåˆ™ä¼šå›è°ƒ <code>-application:didRegisterForRemoteNotificationsWithDeviceToken:</code>ï¼Œä¹‹åè¯¥è®¾å¤‡å°±èƒ½éšæ—¶æ”¶åˆ°æ¨é€é€šçŸ¥äº†ã€‚</p><p>å¦‚æœåº”ç”¨åœ¨æ‰“å¼€æ—¶æ”¶åˆ°äº†æ¨é€é€šçŸ¥ï¼Œdelegate ä¼šè°ƒç”¨ <code>application:didReceiveRemoteNotification:</code>ã€‚ä½†æ˜¯å¦‚æœæ˜¯é€šè¿‡åœ¨é€šçŸ¥ä¸­å¿ƒä¸­æ»‘åŠ¨é€šçŸ¥æ‰“å¼€çš„åº”ç”¨ï¼Œåˆ™ä¼šè°ƒç”¨ <code>application:didFinishLaunchingWithOptions:</code> å¹¶æºå¸¦ <code>UIApplicationLaunchOptionsRemoteNotificationKey</code> å¯åŠ¨å‚æ•°ï¼š</p><blockquote><ul><li><code>UIApplicationLaunchOptionsRemoteNotificationKey</code>ï¼šæ ‡ç¤ºæ¨é€é€šçŸ¥ç›®å‰å¤„äºå¯ç”¨çŠ¶æ€ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å«é€šçŸ¥å†…å®¹çš„ <code>NSDictionary</code>ã€‚</li></ul><blockquote><ul><li><code>alert</code>ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æˆ–åŒ…å«ä¸¤ä¸ªé”® <code>body</code> å’Œ <code>show-view</code> çš„å­—å…¸ã€‚</li><li><code>badge</code>ï¼šæ ‡ç¤ºä»é€šçŸ¥å‘å‡ºè€…é‚£åº”è¯¥è·å–æ•°æ®çš„æ•°é‡ã€‚è¿™ä¸ªæ•°å­—ä¼šæ˜¾ç¤ºåœ¨åº”ç”¨å›¾æ ‡ä¸Šã€‚æ²¡æœ‰ badge ä¿¡æ¯åˆ™è¡¨ç¤ºåº”è¯¥ä»å›¾ç‰‡ä¸Šç§»é™¤æ•°å­—æ˜¾ç¤ºã€‚</li><li><code>sound</code>ï¼šé€šçŸ¥æ¥æ”¶æ—¶æ’­æ”¾éŸ³é¢‘çš„æ–‡ä»¶åã€‚å¦‚æœå€¼ä¸º &ldquo;default&rdquo; é‚£ä¹ˆåˆ™æ’­æ”¾é»˜è®¤éŸ³é¢‘ã€‚</li></ul></blockquote></blockquote><p>å› ä¸ºé€šçŸ¥å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ§åˆ¶ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨ <code>application:didFinishLaunchingWithOptions:</code> ä¸­æ‰‹åŠ¨è°ƒç”¨ <code>application:didReceiveRemoteNotification:</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>- (<span style=color:#66d9ef>BOOL</span>)<span style=color:#a6e22e>application:</span>(UIApplication <span style=color:#f92672>*</span>)application
</span></span><span style=display:flex><span><span style=color:#a6e22e>didFinishLaunchingWithOptions:</span>(NSDictionary <span style=color:#f92672>*</span>)launchOptions
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (launchOptions[UIApplicationLaunchOptionsRemoteNotificationKey]) {
</span></span><span style=display:flex><span>        [self application:application didReceiveRemoteNotification:launchOptions[UIApplicationLaunchOptionsRemoteNotificationKey]];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æœ¬åœ°é€šçŸ¥>æœ¬åœ°é€šçŸ¥</h3><p><a href=https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1>æœ¬åœ°é€šçŸ¥</a> æ˜¯åœ¨ iOS 4 ä¸­åŠ å…¥çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½è‡³ä»Šéƒ½è¢«è¯¯è§£äº†ã€‚</p><p>åº”ç”¨å¯ä»¥åˆ¶å®šè®¡åˆ’åœ¨æœªæ¥æŸä¸ªæ—¶é—´ç‚¹è§¦å‘ <code>UILocalNotification</code>ã€‚å¦‚æœåº”ç”¨å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œé‚£ä¹ˆå°†å›è°ƒ <code>-application:didReceiveLocalNotification:</code> æ–¹æ³•ã€‚å¦‚æœåº”ç”¨å¤„äºéæ´»è·ƒçŠ¶æ€ï¼Œé€šçŸ¥å°†ä¼šè¢«å‘é€åˆ°é€šçŸ¥ä¸­å¿ƒã€‚</p><p>ä¸åƒæ¨é€é€šçŸ¥ï¼Œ<code>UIApplication</code> çš„ delegate æä¾›äº†ç»Ÿä¸€æ§åˆ¶æœ¬åœ°é€šçŸ¥çš„æ–¹æ³•ã€‚å¦‚æœåº”ç”¨æ˜¯é€šè¿‡æœ¬åœ°é€šçŸ¥å¯åŠ¨çš„ï¼Œ<code>-application:didReceiveLocalNotification:</code> å°†ä¼šåœ¨ <code>-application:didFinishLaunchingWithOptions:</code> ä¹‹åè¢«è‡ªåŠ¨è°ƒç”¨ï¼ˆæ„æ€å°±æ˜¯ä¸éœ€è¦åƒæ¨é€é€šçŸ¥ä¸€æ ·åœ¨ <code>-application:didFinishLaunchingWithOptions:</code> ä¸­æ‰‹åŠ¨è°ƒç”¨äº†ï¼‰ã€‚</p><p>æœ¬åœ°é€šçŸ¥ä¼šåœ¨å¯åŠ¨å‚æ•°ä¸­æºå¸¦å’Œæ¨é€é€šçŸ¥æœ‰ç±»ä¼¼ç»“æ„çš„ <code>UIApplicationLaunchOptionsLocalNotificationKey</code>ï¼š</p><ul><li><code>UIApplicationLaunchOptionsLocalNotificationKey</code>: æ ‡ç¤ºæœ¬åœ°é€šçŸ¥ç›®å‰å¤„äºå¯ç”¨çŠ¶æ€ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å«é€šçŸ¥å†…å®¹çš„ <code>NSDictionary</code>ã€‚</li></ul><p>å¦‚æœåº”ç”¨åœ¨è¿è¡Œä¸­æ”¶åˆ°æœ¬åœ°é€šçŸ¥éœ€è¦æ˜¾ç¤ºæç¤ºæ¡†ã€å…¶ä»–æƒ…å†µä¸æ˜¾ç¤ºæç¤ºæ¡†ï¼Œå¯ä»¥æ‰‹åŠ¨ä» <code>UILocalNotification</code> è·å–ç›¸å…³ä¿¡æ¯è¿›è¡Œæ“ä½œï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>// .h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>@import AVFoundation;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>AppDelegate</span> ()
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>readwrite</span>, <span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>assign</span>) SystemSoundID localNotificationSound;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// .m
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>-</span> (<span style=color:#66d9ef>void</span>)application:(UIApplication <span style=color:#f92672>*</span>)application
</span></span><span style=display:flex><span>didReceiveLocalNotification:(UILocalNotification <span style=color:#f92672>*</span>)notification
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (application.applicationState <span style=color:#f92672>==</span> UIApplicationStateActive) {
</span></span><span style=display:flex><span>        UIAlertView <span style=color:#f92672>*</span>alertView <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>            [[UIAlertView alloc] initWithTitle:notification.alertAction
</span></span><span style=display:flex><span>                                       message:notification.alertBody
</span></span><span style=display:flex><span>                                      delegate:nil
</span></span><span style=display:flex><span>                             cancelButtonTitle:NSLocalizedString(<span style=color:#e6db74>@&#34;OK&#34;</span>, nil)
</span></span><span style=display:flex><span>                             otherButtonTitles:nil];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>self.localNotificationSound) {
</span></span><span style=display:flex><span>            NSURL <span style=color:#f92672>*</span>soundURL <span style=color:#f92672>=</span> [[NSBundle mainBundle] URLForResource:<span style=color:#e6db74>@&#34;Sosumi&#34;</span>
</span></span><span style=display:flex><span>                                                      withExtension:<span style=color:#e6db74>@&#34;wav&#34;</span>];
</span></span><span style=display:flex><span>            AudioServicesCreateSystemSoundID((<span style=color:#66d9ef>__bridge</span> CFURLRef)soundURL, <span style=color:#f92672>&amp;</span>_localNotificationSound);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        AudioServicesPlaySystemSound(self.localNotificationSound);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        [alertView show];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> (<span style=color:#66d9ef>void</span>)applicationWillTerminate:(UIApplication <span style=color:#f92672>*</span>)application {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (self.localNotificationSound) {
</span></span><span style=display:flex><span>        AudioServicesDisposeSystemSoundID(self.localNotificationSound);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=åœ°ç†ä½ç½®äº‹ä»¶>åœ°ç†ä½ç½®äº‹ä»¶</h2><p>å¬è¯´ä½ åœ¨å¼€å‘ä¸€ä¸ª LBS ç­¾åˆ°ç…§ç‰‡çš„åº”ç”¨ï¼Ÿå“ˆå“ˆï¼Œçœ‹èµ·æ¥ä½ çš„åŠ¨ä½œå¥½åƒè½åæ—¶ä»£å››å¹´å¤šäº†ã€‚</p><p>ä½†ä¸è¦å®³æ€•ï¼æœ‰äº† iOS çš„ä½ç½®ç›‘æ§ï¼Œä½ çš„åº”ç”¨å¯ä»¥é€šè¿‡åœ°ç†ä½ç½®è§¦å‘çš„äº‹ä»¶å¯åŠ¨äº†ï¼š</p><blockquote><ul><li><code>UIApplicationLaunchOptionsLocationKey</code>ï¼šæ ‡ç¤ºåº”ç”¨æ˜¯å“åº”åœ°ç†ä½ç½®äº‹ä»¶å¯åŠ¨çš„ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å« Boolean å€¼çš„ <code>NSNumber</code> å¯¹è±¡ã€‚å¯ä»¥æŠŠè¿™ä¸ªé”®ä½œä¸ºä¿¡å·æ¥åˆ›å»º <code>CLLocationManager</code> å¯¹è±¡å¹¶å¼€å§‹è¿›è¡Œå®šä½ã€‚ä½ç½®æ•°æ®ä¼šä¼ ç»™ location manager çš„ delegateï¼ˆå¹¶ä¸éœ€è¦è¿™ä¸ªé”®ï¼‰ã€‚</li></ul></blockquote><p>ä»¥ä¸‹æ˜¯æ£€æµ‹ä½ç½®å˜åŒ–æ¥åˆ¤æ–­å¯åŠ¨è¡Œä¸ºçš„ä¾‹å­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>// .h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>@import CoreLocation;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>AppDelegate</span> () <span style=color:#f92672>&lt;</span>CLLocationManagerDelegate<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>readwrite</span>, <span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>strong</span>) CLLocationManager <span style=color:#f92672>*</span>locationManager;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// .m
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>-</span> (<span style=color:#66d9ef>BOOL</span>)application:(UIApplication <span style=color:#f92672>*</span>)application
</span></span><span style=display:flex><span>didFinishLaunchingWithOptions:(NSDictionary <span style=color:#f92672>*</span>)launchOptions
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>[CLLocationManager locationServicesEnabled]) {
</span></span><span style=display:flex><span>        [[[UIAlertView alloc] initWithTitle:NSLocalizedString(<span style=color:#e6db74>@&#34;Location Services Disabled&#34;</span>, nil)
</span></span><span style=display:flex><span>                                    message:NSLocalizedString(<span style=color:#e6db74>@&#34;You currently have all location services for this device disabled. If you proceed, you will be asked to confirm whether location services should be reenabled.&#34;</span>, nil)
</span></span><span style=display:flex><span>                                   delegate:nil
</span></span><span style=display:flex><span>                          cancelButtonTitle:NSLocalizedString(<span style=color:#e6db74>@&#34;OK&#34;</span>, nil)
</span></span><span style=display:flex><span>                          otherButtonTitles:nil] show];
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        self.locationManager <span style=color:#f92672>=</span> [[CLLocationManager alloc] init];
</span></span><span style=display:flex><span>        self.locationManager.delegate <span style=color:#f92672>=</span> self;
</span></span><span style=display:flex><span>        [self.locationManager startMonitoringSignificantLocationChanges];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (launchOptions[UIApplicationLaunchOptionsLocationKey]) {
</span></span><span style=display:flex><span>        [self.locationManager startUpdatingLocation];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=æŠ¥åˆŠæ‚å¿—newsstand>æŠ¥åˆŠæ‚å¿—ï¼ˆNewsstandï¼‰</h2><p><em>æ‰€æœ‰çš„æŠ¥åˆŠæ‚å¿—å¼€å‘è€…éƒ½ä¼šä¸ºæ­¤æ¬¢å‘¼çš„ï¼</em></p><p><em><code>æ¬¢å‘¼å£°.aiff</code></em></p><p>å¤Ÿäº†&mldr;</p><p>æœ‰æ–°çš„å¯ç”¨ä¸‹è½½æ—¶ï¼ŒæŠ¥åˆŠæ‚å¿—åº”ç”¨å¯ä»¥å¯åŠ¨ã€‚</p><p>è¿™æ ·æ³¨å†Œå³å¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>[application registerForRemoteNotificationTypes:
</span></span><span style=display:flex><span>	UIRemoteNotificationTypeNewsstandContentAvailability];
</span></span></code></pre></div><p>ç„¶ååœ¨å¯åŠ¨å‚æ•°ä¸­æ‰¾åˆ°è¿™ä¸ªé”®ï¼š</p><blockquote><ul><li><code>UIApplicationLaunchOptionsNewsstandDownloadsKey</code>ï¼šæ ‡ç¤ºåº”ç”¨æœ‰æ–°çš„å¯ç”¨æ‚å¿—èµ„æºä¸‹è½½ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å« <code>NKAssetDownload</code> id çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚è™½ç„¶ä½ å¯ä»¥é€šè¿‡è¿™äº› id è¿›è¡Œæ£€æŸ¥ï¼Œä½†è¿˜æ˜¯åº”è¯¥é€šè¿‡ <code>NKLibrary</code> å¯¹è±¡çš„ downloadingAssets å±æ€§æ¥æŒæœ‰è¿™äº› <code>NKAssetDownload</code> å¯¹è±¡ï¼ˆå¯ç”¨ç”¨äºå±•ç¤ºä¸‹è½½è¿›åº¦æˆ–é”™è¯¯ï¼‰ä»¥ä¾¿æ˜¾ç¤ºåœ¨æŠ¥åˆŠæ‚å¿—ä¹¦æ¶ä¸­ã€‚</li></ul></blockquote><p>è¯¦ç»†æƒ…å†µä¸å†èµ˜è¿°ã€‚</p><h2 id=è“ç‰™>è“ç‰™</h2><p>iOS 7 å¼€å§‹æ”¯æŒå¤–å›´è“ç‰™è®¾å¤‡é‡æ–°å”¤é†’åº”ç”¨ã€‚</p><p>åº”ç”¨å¯åŠ¨åé€šè¿‡ç‰¹å®šçš„ id å®ä¾‹åŒ–ä¸€ä¸ª <code>CBCentralManager</code> æˆ– <code>CBPeripheralManager</code> ç”¨äºè¿æ¥è“ç‰™è®¾å¤‡ï¼Œä¹‹ååº”ç”¨å°±å¯ä»¥é€šè¿‡è“ç‰™ç³»ç»Ÿçš„ç›¸å…³åŠ¨ä½œæ¥è¢«é‡æ–°å”¤é†’äº†ã€‚å–å†³äºå‘å‡ºé€šçŸ¥çš„æ˜¯ä¸€ä¸ªä¸­å¿ƒè®¾å¤‡è¿˜æ˜¯å¤–å›´è®¾å¤‡ï¼Œ<code>launchOptions</code> ä¼šä¼ å…¥ä»¥ä¸‹ä¸¤ä¸ªé”®ä¸­çš„ä¸€ä¸ªï¼š</p><blockquote><ul><li><code>UIApplicationLaunchOptionsBluetoothCentralsKey</code>ï¼šæ ‡ç¤ºåº”ç”¨ä¹‹å‰æ›¾æœ‰è¿‡ä¸€ä¸ªæˆ–å¤šä¸ª <code>CBCentralManager</code> å¯¹è±¡å¹¶è¢«è“ç‰™ç³»ç»Ÿçš„ç›¸å…³åŠ¨ä½œå”¤é†’è¿‡ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å« <code>NSString</code> å¯¹è±¡çš„æ•°ç»„ã€‚æ•°ç»„ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€ä¸ªä¸­å¿ƒè®¾å¤‡çš„æ¢å¤è¿æ¥ idã€‚</li><li><code>UIApplicationLaunchOptionsBluetoothPeripheralsKey</code>ï¼šæ ‡ç¤ºåº”ç”¨ä¹‹å‰æ›¾æœ‰è¿‡ä¸€ä¸ªæˆ–å¤šä¸ª <code>CBPeripheralManager</code> å¯¹è±¡å¹¶è¢«è“ç‰™ç³»ç»Ÿçš„ç›¸å…³åŠ¨ä½œå”¤é†’è¿‡ã€‚å¯¹åº”çš„å€¼æ˜¯åŒ…å« <code>NSString</code> å¯¹è±¡çš„æ•°ç»„ã€‚æ•°ç»„ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºä¸€ä¸ªå¤–å›´è®¾å¤‡çš„æ¢å¤è¿æ¥ idã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>// .h
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>@import CoreBluetooth;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>AppDelegate</span> () <span style=color:#f92672>&lt;</span>CBCentralManagerDelegate<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>readwrite</span>, <span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>strong</span>) CBCentralManager <span style=color:#f92672>*</span>centralManager;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// .m
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>self.centralManager <span style=color:#f92672>=</span> [[CBCentralManager alloc] initWithDelegate:self queue:nil options:<span style=color:#ae81ff>@{</span>CBCentralManagerOptionRestoreIdentifierKey:(launchOptions[UIApplicationLaunchOptionsBluetoothCentralsKey] <span style=color:#f92672>?:</span> [[NSUUID UUID] UUIDString])<span style=color:#ae81ff>}</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (self.centralManager.state <span style=color:#f92672>==</span> CBCentralManagerStatePoweredOn) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> NSString <span style=color:#f92672>*</span> <span style=color:#66d9ef>const</span> UID <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;7C13BAA0-A5D4-4624-9397-15BF67161B1C&#34;</span>; <span style=color:#75715e>// generated with `$ uuidgen`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    NSArray <span style=color:#f92672>*</span>services <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span>[CBUUID UUIDWithString:UID]<span style=color:#ae81ff>]</span>;
</span></span><span style=display:flex><span>    NSDictionary <span style=color:#f92672>*</span>scanOptions <span style=color:#f92672>=</span> <span style=color:#ae81ff>@{</span>CBCentralManagerScanOptionAllowDuplicatesKey:<span style=color:#ae81ff>@YES</span><span style=color:#ae81ff>}</span>;
</span></span><span style=display:flex><span>    [self.centralManager scanForPeripheralsWithServices:services options:scanOptions];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><p>è¦ææ¸…æ¥šæ‰€æœ‰çš„å¯åŠ¨å‚æ•°ç¡®å®è¦è´¹ç‚¹åŠ›æ°”ã€‚å¹¸è¿çš„æ˜¯ä¸€èˆ¬çš„åº”ç”¨åªéœ€è¦å¤„ç†å…¶ä¸­çš„ä¸€ä¸¤ç§å°±å¤Ÿäº†ã€‚</p><p>äº†è§£æ‰€æœ‰çš„å¯èƒ½æ€§éœ€è¦ä»ç†è§£æ¦‚å¿µèµ°åˆ°äº²è‡ªå®ç°çš„æ­¥éª¤ä¸Šã€‚å½“ä½ äº†è§£åˆ°äº‹æƒ…æœ‰è¿™ä¹ˆå¤šå¯èƒ½æ€§çš„æ—¶å€™ï¼Œä¸‹ä¸€ä¸ªæ”¹å˜ä¸–ç•Œçš„æƒ³æ³•å¯èƒ½å°±å·²ç»åœ¨è„‘ä¸­å¼€å§‹é…é…¿äº†ã€‚</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2013-12-16 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>