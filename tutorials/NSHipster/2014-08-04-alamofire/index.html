<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>Alamofire</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="Alamofire,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="Alamofire,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>Alamofire</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Chester Liu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>Swift åƒæ˜¯åœ¨ iOS å¼€å‘è€…ç¤¾åŒºä¸­æŒ‰ä¸‹äº†ä¸€ä¸ªâ€œé‡å¯â€æŒ‰é’®ï¼Œæˆäº†å¾ˆå¤šå¸¸å¹´ä½¿ç”¨ Objective-C çš„å¼€å‘è€…çš„æ–°å® å„¿ã€‚</p><p>ä¸€å¤œä¹‹é—´ï¼Œå¤§å®¶è°ˆè®ºçš„ä¸»é¢˜ä»å‘½åç©ºé—´(<a href=https://nshipster.com/namespacing/>namespacing</a>) å’Œæ–¹æ³•äº¤å‰(<a href=https://nshipster.com/method-swizzling/>swizzling</a>)ï¼Œå»¶ä¼¸åˆ°æ³›å‹ (<a href=https://developer.apple.com/library/prerelease/ios/documentation/swift/conceptual/swift_programming_language/Generics.html#//apple_ref/doc/uid/TP40014097-CH26-XID_272>generics</a>)å’Œç±»å‹æ¨å¯¼(<a href=https://developer.apple.com/library/prerelease/ios/documentation/swift/conceptual/swift_programming_language/TypeCasting.html#//apple_ref/doc/uid/TP40014097-CH22-XID_487>type inference</a>)ã€‚æ¯å¹´è¿™ä¸ªæ—¶å€™ï¼Œ Twitter ä¸Šé€šå¸¸ä¼šå……æ–¥ç€å…³äºæœ€æ–°çš„ API çš„è®¨è®ºï¼Œä»¥åŠå°†è¦å‘å¸ƒçš„ç¡¬ä»¶è®¾å¤‡çš„ä¼ è¨€ã€‚ç„¶è€Œä»Šå¹´ï¼Œä¸€åˆ‡éƒ½è¢« Swift å é¢†äº†ã€‚</p><p>Swift æœ‰ç€å…¨æ–°çš„è¯­æ³•ï¼Œè¯­è¨€è§„èŒƒè¿˜å¤„åœ¨ä¸æ–­æ¼”è¿›çš„è¿‡ç¨‹å½“ä¸­ã€‚Swift å·²ç»å¸å¼•äº†æ–°è€å¼€å‘è€…çš„å…³æ³¨ï¼Œç»™ iOS & OS X å¼€å‘å¸¦æ¥äº†æ–°çš„æƒ³è±¡ç©ºé—´ã€‚</p><p>å°½ç®¡æˆ‘ä»¬ç¦»ä½¿ç”¨ Swift å‘å¸ƒ App è¿˜æœ‰å‡ ä¸ªæœˆçš„æ—¶é—´ï¼Œå·²ç»æœ‰è‹¥å¹²ä½¿ç”¨è¿™é—¨æ–°è¯­è¨€çš„å¼€æºé¡¹ç›®å¼€å§‹ç”Ÿæ ¹å‘èŠ½äº†ã€‚</p><p><a href=https://github.com/Alamofire/Alamofire>Alamofire</a> ä¾¿æ˜¯è¿™äº›é¡¹ç›®ä¸­çš„ä¸€ä¸ªã€‚è¿™ä¸€å‘¨ï¼Œæˆ‘ä»¬å°†æ·±å…¥ Alamofire çš„è®¾è®¡ä¸å®ç°ï¼Œæ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å°† Swift çš„è¯­è¨€ç‰¹æ€§è¿ç”¨åˆ°æè‡´ã€‚</p><blockquote><p>åˆ©ç›Šç›¸å…³ï¼šè¿™ç¯‡æ–‡ç« ï¼Œä»¥åŠå…¶ä½™ NSHipster çš„å†…å®¹ï¼Œéƒ½æ˜¯ç”± AFNetworking å’Œ Alamofire çš„ä½œè€…æ‰€åˆ›ä½œçš„ã€‚è¿™è®©æˆ‘æœ‰è¶³å¤Ÿçš„èµ„æ ¼å»è°ˆè®ºè¿™äº›é¡¹ç›®çš„æŠ€æœ¯ç»†èŠ‚å’Œé€‰å‹ï¼Œä½†æ˜¯ä¹Ÿç¡®å®è®©æˆ‘æ²¡åŠæ³•å¯¹å®ƒä»¬çš„ä»·å€¼è¿›è¡Œå®¢è§‚çš„è¯„ä»·ã€‚å› æ­¤åœ¨é˜…è¯»ä¸‹é¢çš„å†…å®¹æ—¶ï¼Œè¯·ä¿æŒè°¨æ…å’Œæ€€ç–‘çš„æ€åº¦ã€‚</p></blockquote><hr><p><a href=https://github.com/Alamofire/Alamofire>Alamofire</a> æ˜¯ä¸€ä¸ªä½¿ç”¨ Swift ç¼–å†™çš„ HTTP ç½‘ç»œåº“ï¼Œå®ƒæ„å»ºäº NSURLSession å’Œ Foundation åº“çš„ URL åŠ è½½ç³»ç»Ÿä¹‹ä¸Šï¼Œå¯¹é«˜å±‚çš„ç½‘ç»œæ“ä½œæä¾›äº†æ–¹ä¾¿çš„ Swift æ¥å£ã€‚</p><p>ä½¿ç”¨ Alamofire å¾ˆç®€å•ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ª <code>GET</code> è¯·æ±‚çš„ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.GET, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>)
</span></span><span style=display:flex><span>         .response { (request, response, data, error) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>                     println(request)
</span></span><span style=display:flex><span>                     println(response)
</span></span><span style=display:flex><span>                     println(error)
</span></span><span style=display:flex><span>                   }
</span></span></code></pre></div><p><code>Alamofire.request</code> æ˜¯ä¸€ä¸ª convenience æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ª <code>Alamofire.Request</code> å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥é€šè¿‡ <code>response</code> æ–¹æ³•é“¾å¼åœ°æ·»åŠ ä¸€ä¸ªå“åº”çš„ handlerã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>response</code> ä¼šè¿”å›ä¸€ä¸ªæœåŠ¡å™¨å“åº”ç´¯åŠ èµ·æ¥å¾—åˆ°çš„ <code>NSData</code> å¯¹è±¡ã€‚è¦å¾—åˆ°å“åº”çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œå¯ä»¥ä½¿ç”¨ <code>responseString</code> æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.GET, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>)
</span></span><span style=display:flex><span>         .responseString { (request, response, string, error) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>             println(string)
</span></span><span style=display:flex><span>         }
</span></span></code></pre></div><p>ç±»ä¼¼åœ°ï¼Œæƒ³ä»è¯·æ±‚ä¸­å¾—åˆ° JSON å¯¹è±¡çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ <code>responseJSON</code> æ–¹æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.GET, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>)
</span></span><span style=display:flex><span>         .responseJSON {(request, response, JSON, error) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>             println(JSON)
</span></span><span style=display:flex><span>         }
</span></span></code></pre></div><h3 id=é“¾å¼è¯­æ³•>é“¾å¼è¯­æ³•</h3><p>ä¸€ä¸ªå¾ˆå°çš„è¯­æ³•å·®å¼‚ä¹Ÿæœ‰å¯èƒ½å¯¹ä¸€ä¸ªè¯­è¨€çš„é€šç”¨æƒ¯ä¾‹äº§ç”Ÿå¹¿æ³›çš„å½±å“ã€‚</p><p>åœ¨äººä»¬å¯¹äº Objective-C çš„è¯¸å¤šæŠ±æ€¨å½“ä¸­ï¼Œé¦–å½“å…¶ä¸­çš„ä¾¿æ˜¯ä½¿ç”¨æ–¹æ‹¬å·æ¥è¡¨ç¤ºæ¶ˆæ¯ä¼ é€’(<a href=https://en.wikipedia.org/wiki/Message_passing>message passing</a>)ã€‚ä½¿ç”¨ <code>[ ]</code> è¯­æ³•çš„æ½œåœ¨å½±å“ä¹‹ä¸€ï¼Œå°±æ˜¯å¾ˆéš¾æŠŠæ–¹æ³•è°ƒç”¨ä¸²è”åœ¨ä¸€èµ·ã€‚å°½ç®¡æœ‰ Xcode è‡ªåŠ¨è¡¥å…¨çš„å¸®åŠ©ï¼Œ <code>@property</code> ç‚¹(.)è¯­æ³•ï¼Œä»¥åŠ <a href=https://nshipster.com/kvc-collection-operators/>key-value coding key-paths</a> çš„æ”¯æŒï¼Œå¤§å®¶è¿˜æ˜¯å¾ˆéš¾åœ¨ä»£ç ä¸­çœ‹åˆ°åµŒå¥—å±‚æ¬¡å¾ˆæ·±çš„å‡½æ•°è°ƒç”¨ã€‚</p><blockquote><p>Objective-C 2.0 ä¸­å¼•å…¥äº†å±æ€§ç‚¹(.)è¯­æ³•ï¼Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œè¿™ç§å¦¥ååè€Œä½¿å¾—è¯­æ³•ä¸Šçš„çŸ›ç›¾æ›´ä¸¥é‡äº†ã€‚æœ€è¿‘è¿™äº›å¹´è¯­æ³•æƒ¯ä¾‹æ‰é‡æ–°å¼€å§‹ç¨³å®šä¸‹æ¥ã€‚</p></blockquote><p>åœ¨ Swift ä¸­ï¼Œæ‰€æœ‰çš„æ–¹æ³•è°ƒç”¨éƒ½æ˜¯ä½¿ç”¨ç‚¹(.)è¯­æ³•ï¼Œå‚æ•°ä½¿ç”¨æ‹¬å·ä¼ é€’ï¼Œåœ¨ä¼ é€’è¿‡ç¨‹ä¸­ä¼šä¿æŒé¡ºåºï¼Œå¹¶è¿›è¡Œå‚æ•°çš„å½¢å‚åŒ–ã€‚æ–¹æ³•å¯ä»¥è¿”å› <code>Self</code> æ¥è®©å¤šä¸ªæ–¹æ³•ä¸²è”åœ¨ä¸€èµ·ã€‚</p><p>Alamofire é‡‡ç”¨äº†è¿™ç§æ¨¡å¼ï¼Œè®©ç½‘ç»œè¯·æ±‚çš„å£°æ˜å˜å¾—æ›´åŠ ç®€æ´å’Œå±€éƒ¨åŒ–ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.GET, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>)
</span></span><span style=display:flex><span>         .authenticate(HTTPBasic: user, password: password)
</span></span><span style=display:flex><span>         .progress { (bytesRead, totalBytesRead, totalBytesExpectedToRead) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>             println(totalBytesRead)
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         .responseJSON { (request, response, JSON, error) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>             println(JSON)
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         .responseString { (request, response, string, error) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>             println(string)
</span></span><span style=display:flex><span>         }
</span></span></code></pre></div><blockquote><p>è¯·æ±‚å¯ä»¥åŒæ—¶æœ‰å¤šä¸ª handlerï¼Œå½“æœåŠ¡å™¨å®Œæˆå“åº”æ—¶ï¼Œæ¯ä¸ª handler éƒ½ä¼šå¼‚æ­¥åœ°æ‰§è¡Œã€‚</p></blockquote><h3 id=ç»“å°¾é—­åŒ…>ç»“å°¾é—­åŒ…</h3><p>é—­åŒ…åœ¨ Swift ä¸­å¾—åˆ°äº†æ·±åº¦çš„æ”¯æŒï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é—­åŒ…çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ç»“å°¾é—­åŒ…è¯­æ³•ã€‚</p><p>ä¸Šé¢ä¾‹å­ä¸­çš„é“¾å¼æ–¹æ³•è°ƒç”¨å±•ç¤ºäº†è¿™ç§ç”¨æ³•ã€‚åœ¨å…¸å‹çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œè¿™ä¸ªç”¨æ³•ç›¸å½“æ–¹ä¾¿ï¼Œè®©æˆ‘ä»¬å¯ä»¥çœç•¥è¯­æ³•ä¸­ç¹ççš„éƒ¨åˆ†ã€‚</p><h3 id=å¯é€‰å‚æ•°--çµæ´»çš„æ–¹æ³•ç­¾å>å¯é€‰å‚æ•° & çµæ´»çš„æ–¹æ³•ç­¾å</h3><p>åœ¨å’Œç½‘ç»œ API äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚æ˜¯ä½¿ç”¨ URL query æˆ–è€… HTTP è¯·æ±‚ä½“(body)æ¥å‘é€è¯·æ±‚å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.GET, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>, parameters: [<span style=color:#e6db74>&#34;foo&#34;</span>: <span style=color:#e6db74>&#34;bar&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#75715e>// GET http://httpbin.org/get?foo=bar</span>
</span></span></code></pre></div><p>è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šè·Ÿå‰é¢çš„ä¾‹å­ä¸­æ˜¯åŒä¸€ä¸ªæ–¹æ³•ã€‚<code>parameters</code> è¿™ä¸ªå‚æ•°é»˜è®¤å€¼æ˜¯ <code>nil</code>ã€‚è¿™ä¸ªæ–¹æ³•è¿˜æœ‰ç¬¬å››ä¸ªå‚æ•°ï¼Œä¹Ÿæ˜¯å¯é€‰çš„ï¼š<code>encoding</code> å‚æ•°ã€‚</p><h3 id=parameterencoding--æšä¸¾ç±»å‹>ParameterEncoding & æšä¸¾ç±»å‹</h3><p>ä¸‹é¢è¦è®²åˆ°çš„æ˜¯ Swift ä¸­éå¸¸é…·çš„ä¸€ä¸ªç‰¹æ€§ï¼šæšä¸¾ã€‚åœ¨ C å’Œ Objective-C ä¸­æšä¸¾åŸºæœ¬ä¸Šå°±æ˜¯æ•´æ•°ç±»å‹çš„ä¸€ä¸ª <code>typedef</code> å£°æ˜ï¼Œç„¶è€Œåœ¨ Swift å½“ä¸­ï¼Œæšä¸¾ç±»å‹æ”¯æŒå½¢å‚åŒ–ä½¿ç”¨ï¼Œè¿˜å¯ä»¥æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚</p><p>Alamofire ä½¿ç”¨ <code>ParameterEncoding</code> è¿™ä¸ªæšä¸¾ç±»å‹ï¼ŒæŠŠç¼–ç å‚æ•°çš„é€»è¾‘å…¨éƒ½å°è£…åˆ°ä¸€ä¸ª HTTP æ¶ˆæ¯è¡¨ç¤ºä¸­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>ParameterEncoding</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> URL
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> JSON
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> PropertyList(format: NSPropertyListFormat,
</span></span><span style=display:flex><span>                      options: NSPropertyListWriteOptions)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(request: NSURLRequest,
</span></span><span style=display:flex><span>                parameters: [String: AnyObject]?) -&gt;
</span></span><span style=display:flex><span>                    (NSURLRequest, NSError?)
</span></span><span style=display:flex><span>    { ... }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>é€šè¿‡å½¢å‚åŒ–åœ°ä½¿ç”¨ <code>ParameterEncoding</code> çš„è¿™äº› caseï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šä¸åŒçš„ JSON æˆ–è€… Property List åºåˆ—åŒ–é€‰é¡¹ã€‚</p><p>å¯¹æ¯ä¸ª <code>ParameterEncoding</code> çš„ case æ¥è¯´ï¼Œ<code>encode</code> æ–¹æ³•å¯ä»¥æŠŠè¯·æ±‚å’Œå‚æ•°è¿›è¡Œå¤„ç†ï¼Œè½¬æ¢æˆæ–°çš„è¯·æ±‚ï¼ˆåŒæ—¶è¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„é”™è¯¯è¿”å›å€¼ï¼‰ã€‚</p><p>å¯¹äºå¤æ‚çš„ï¼Œå¤šå±‚åµŒå¥—ç»“æ„çš„å‚æ•°ï¼Œå»ºè®®ä½¿ç”¨ JSON æ ¼å¼è¿›è¡Œå‚æ•°ç¼–ç ï¼š</p><blockquote><p>å¯¹äºè¦è¿›è¡Œ URL-encoded çš„å‚æ•°æ¥è¯´ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†è§„å®šå‚æ•°çš„æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒçš„ Web åº”ç”¨å¯èƒ½ä¼šå¯¹å‚æ•°è¿›è¡Œä¸åŒçš„è§£æå¤„ç†ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæœ‰ä¸€äº›ç‰¹å®šçš„æ•°æ®ç»“æ„æ ¹æœ¬å°±æ²¡åŠæ³•ç”¨å­—ç¬¦ä¸²å½¢å¼è¿›è¡Œæ¸…æ™°çš„è¡¨è¾¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ Web API æä¾›æ”¯æŒçš„æƒ…å†µä¸‹ï¼Œå¯¹äºæ‰€æœ‰æ¯”é”®å€¼å¯¹(key-value)ç»“æ„å¤æ‚çš„æ•°æ®ï¼Œéƒ½å»ºè®®ä½¿ç”¨ JSONï¼ˆæˆ–è€… XML å’Œ plistï¼‰æ¥è¿›è¡Œç¼–ç ã€‚</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> parameters = [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;foo&#34;</span>: <span style=color:#e6db74>&#34;bar&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;baz&#34;</span>: [<span style=color:#e6db74>&#34;a&#34;</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;qux&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;x&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;y&#34;</span>: <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;z&#34;</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Alamofire.request(.POST, <span style=color:#e6db74>&#34;http://httpbin.org/post&#34;</span>, parameters: parameters, encoding: .JSON(options: <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>         .responseJSON {(request, response, JSON, error) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            println(JSON)
</span></span><span style=display:flex><span>         }
</span></span></code></pre></div><p>Alamofire ä¸­è¿˜ä½¿ç”¨æšä¸¾ç±»å‹æ¥è¡¨ç¤º RFC 2616 Â§9 ä¸­å®šä¹‰çš„ HTTP æ–¹æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Method</span>: String {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> OPTIONS = <span style=color:#e6db74>&#34;OPTIONS&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> GET = <span style=color:#e6db74>&#34;GET&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> HEAD = <span style=color:#e6db74>&#34;HEAD&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> POST = <span style=color:#e6db74>&#34;POST&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> PUT = <span style=color:#e6db74>&#34;PUT&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> PATCH = <span style=color:#e6db74>&#34;PATCH&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> DELETE = <span style=color:#e6db74>&#34;DELETE&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> TRACE = <span style=color:#e6db74>&#34;TRACE&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>case</span> CONNECT = <span style=color:#e6db74>&#34;CONNECT&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™äº›å€¼ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™äº† <code>request</code> æ–¹æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.POST, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.POST, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>, parameters: [<span style=color:#e6db74>&#34;foo&#34;</span>: <span style=color:#e6db74>&#34;bar&#34;</span>])
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>Alamofire.request(.POST, <span style=color:#e6db74>&#34;http://httpbin.org/get&#34;</span>, parameters: [<span style=color:#e6db74>&#34;foo&#34;</span>: <span style=color:#e6db74>&#34;bar&#34;</span>], encoding: .JSON(options: <span style=color:#66d9ef>nil</span>))
</span></span></code></pre></div><h3 id=æ‡’åŠ è½½å±æ€§>æ‡’åŠ è½½å±æ€§</h3><p>Swift çš„å¦ä¸€ä¸ªæ–°ç‰¹æ€§æ˜¯å¯ä»¥å¯¹å±æ€§è¿›è¡Œæ‡’åŠ è½½ã€‚ä¸€ä¸ªä½¿ç”¨ <code>lazy</code> æ ‡ç¤ºçš„å±æ€§ï¼Œåªä¼šåœ¨å®ƒç¬¬ä¸€æ¬¡åœ¨ä»£ç ä¸­è¢«ä½¿ç”¨çš„æ—¶å€™æ‰å¼€å§‹è¿›è¡Œè®¡ç®—ï¼Œèµ‹å€¼ï¼Œå¹¶ä¸”æŠŠå€¼è¿”å›ã€‚</p><p><code>Alamofire.Manager</code> å¯¹è±¡åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§ï¼Œå®ç°äº†é»˜è®¤ HTTP å¤´éƒ¨ (<code>Accept-Encoding</code>, <code>Accept-Language</code>, & <code>User-Agent</code>) çš„å»¶æ—¶æ„é€ ï¼ŒæŠŠæ„é€ æ¨è¿Ÿåˆ°ç¬¬ä¸€ä¸ªè¯·æ±‚è¢«åˆ›å»ºæ—¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>lazy</span> <span style=color:#66d9ef>var</span> defaultHeaders: [String: String] = {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Accept-Language HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> acceptEncoding: String = <span style=color:#e6db74>&#34;Accept-Encoding: gzip;q=1.0,compress;q=0.5&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Accept-Language HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> acceptLanguage: String = {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// User-Agent Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.43</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> userAgent: String = {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [<span style=color:#e6db74>&#34;Accept-Encoding&#34;</span>: acceptEncoding,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Accept-Language&#34;</span>: acceptLanguage,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;User-Agent&#34;</span>: userAgent]
</span></span><span style=display:flex><span>}()
</span></span></code></pre></div><h3 id=ä½¿å¯¹å¤–ä¸å¯å˜çš„å±æ€§å¯¹å†…å¯å˜>ä½¿å¯¹å¤–ä¸å¯å˜çš„å±æ€§å¯¹å†…å¯å˜</h3><p>åœ¨ Objective-C ä¸­ï¼Œä¸€ä¸ªç±»å¯¹å¤–æš´éœ²å‡º <code>readonly</code> çš„ä¸å¯å˜å±æ€§ï¼Œè¦æƒ³åŒæ—¶åœ¨ç±»çš„å†…éƒ¨å®ç°å…¶å¯å˜ï¼Œéœ€è¦åœ¨å˜é‡å£°æ˜æ—¶ä½¿ç”¨ä¸€äº›å°æŠ€å·§(è¯‘è€…æ³¨ï¼šå‚è€ƒ<a href=https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html>è¿™é‡Œ</a>)ã€‚</p><p>Xcode 6 Î²4 ç»™ Swift å¸¦æ¥äº†è®¿é—®æ§åˆ¶ç‰¹æ€§ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°è®¾è®¡ä¸€ä¸ªå®‰å…¨çš„ï¼Œå¯¹å¤–ä¸å¯å˜çš„ APIï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>var</span> mutableData: NSMutableData
</span></span><span style=display:flex><span><span style=color:#66d9ef>override</span> <span style=color:#66d9ef>var</span> data: NSData! {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>self</span>.mutableData
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=è¿˜æœ‰å¾ˆå¤šå¾ˆå¤š>è¿˜æœ‰å¾ˆå¤šï¼Œå¾ˆå¤š&mldr;</h3><p>åœ¨ç»„æˆ Alamofire çš„ä¸åˆ° 1000 è¡Œçš„ä»£ç ä¸­è¿˜æœ‰å¾ˆå¤šå¹²è´§ã€‚å¯¹äºæ‰€æœ‰æœ‰å¿—äº Swift è¯­è¨€çš„å¼€å‘è€…å’Œ API ä½œè€…ä»¬ï¼Œæˆ‘éƒ½å»ºè®®ä½ ä»¬<a href=https://github.com/Alamofire/Alamofire>æ·±å…¥é¡¹ç›®çš„æºä»£ç </a>ï¼Œä»¥æ›´å¥½åœ°äº†è§£åº•å±‚çš„å®ç°å†…å¹•ã€‚</p><hr><blockquote><p>å¯èƒ½æœ‰äººä¼šæƒ³ï¼Œé‚£ AFNetworking å‘¢ï¼Ÿæ”¾å¿ƒï¼Œ<strong>AFNetworking ä¾ç„¶ç¨³å®šè€Œä¸”å¯é ï¼Œå¹¶ä¸”ä¼šç»§ç»­è¢«ç»´æŠ¤</strong>ã€‚äº‹å®ä¸Šï¼Œåœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆæ—¶é—´é‡Œï¼Œå¼€å‘è€…å°†åœ¨ AFNetworking 2 ä»¥åŠå®ƒçš„ä¸€æ–¹æ‰©å±•ä¸Šç»§ç»­æŠ•å…¥å¤§é‡çš„å·¥ä½œï¼Œä»¥æé«˜æµ‹è¯•è¦†ç›–ç‡ï¼ŒåŒæ—¶å®Œå–„æ–‡æ¡£ã€‚</p></blockquote><blockquote><p>å¦å¤–ï¼ŒAFNetworking ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨ Swift ä¸­ä½¿ç”¨ï¼Œå’Œä½¿ç”¨å…¶å®ƒçš„ Objective-C ä»£ç æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚Alamofire ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„é¡¹ç›®ï¼Œä»å‘é€ HTTP è¯·æ±‚è¿™ä¸ªé—®é¢˜å‡ºå‘ï¼Œè‡´åŠ›äºå¯¹æ–°è¯­è¨€çš„ç‰¹æ€§å’ŒèŒƒå¼è¿›è¡Œæ¢ç´¢ã€‚</p></blockquote><p>Alamofire 1.0 è®¡åˆ’åœ¨ Swift 1.0 ç‰ˆæœ¬å‘å¸ƒæ—¶åŒæ—¶é‡Šå‡ºï¼ˆå…·ä½“ä»€ä¹ˆæ—¶å€™å°±çœ‹è‹¹æœäº†ï¼‰ã€‚é‡Œç¨‹ç¢‘å½“ä¸­çš„ä¸€éƒ¨åˆ†åŒ…æ‹¬<a href=https://nshipster.com/swift-documentation/>å®Œæˆå…¨éƒ¨æ–‡æ¡£</a>ï¼Œä»¥åŠå€ŸåŠ©äº <a href=https://nshipster.com/xctestcase/>Xcode 6 çš„æµ‹è¯•æ”¯æŒ</a> å’Œ <a href=http://www.kennethreitz.org>Kenneth Reitz</a> ç¼–å†™çš„ <a href=http://httpbin.org>httpbin</a>ï¼Œå®ç° 100% çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡ã€‚</p><p>æˆ‘ä»¬æ¯ä¸ªäººéƒ½åœ¨å°½æœ€å¤§åŠªåŠ›å»ç†è§£å¦‚ä½•è®¾è®¡ï¼Œå®ç°ä»¥åŠå‘å¸ƒ Swift ä»£ç ã€‚Alamofire åªæ˜¯ä¼—å¤šæ¿€åŠ¨äººå¿ƒçš„æ–°åº“å½“ä¸­çš„ä¸€ä¸ªï¼Œå®ƒä»¬å°†ä¼šåœ¨æ¥ä¸‹æ¥çš„æ•°æœˆä¹ƒè‡³æ•°å¹´æ—¶é—´å½“ä¸­ï¼ŒæŒ‡å¯¼è¯­è¨€æœ¬èº«ä»¥åŠç¤¾åŒºçš„å‘å±•ã€‚å¯¹äºæƒ³å‚ä¸å…¶ä¸­çš„äººï¼Œæ¬¢è¿ä½ ä»¬åšå‡ºè´¡çŒ®ã€‚ä¿—è¯è¯´å¾—å¥½ï¼š<a href=https://github.com/Alamofire/Alamofire/compare/>pull requests æ°¸è¿œä¸å«Œå¤š</a>ã€‚</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2014-08-04 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Open%20Source target=_blank>Open Source</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>