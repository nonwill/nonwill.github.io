<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>NSValue</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="NSValue,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="NSValue,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>NSValue</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Ricky Tan</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>åœ¨ç”µå½± <a href=http://www.imdb.com/title/tt0443272/>eponymous 2012 biopic</a> ä¸­å‡ºæ¼”äºšä¼¯æ‹‰ç½•Â·æ—è‚¯ä¸€è§’æ—¶ï¼Œä¸¹å°¼å°”Â·æˆ´ - åˆ˜æ˜“æ–¯åšå†³è¦æ±‚æ¯æ¬¡è¿›å‡ºå‰§ç»„æ—¶è¦é€šè¿‡ä¸€ä¸ªæ ‡æœ‰â€œæ—¶é—´æœºå™¨â€å­—æ ·çš„å†·åº“ç®±å­ã€‚<del markdown=1><a href=http://filmdrunk.uproxx.com/2012/10/daniel-day-lewis-method-acting-lincoln-ny-times-profile>çœŸå®çš„æ•…äº‹</a></del>.</p><p>å½“æˆ´ - åˆ˜æ˜“æ–¯å…ˆç”Ÿè¦è¿›è¡Œæ–¹æ³•æ¼”æŠ€æ—¶é‚£å½“ç„¶ä¼šä¸æ‹©æ‰‹æ®µï¼Œäººä»¬å¯¹ç”¨ä¸€ä¸ªç¥å¥‡çš„ç¡¬çº¸æ¿ç®±è¿æ¥äº†ç°ä»£ä¸–ç•Œå’Œå†å²ä¸–ç•Œè¿™ä»¶è’å”çš„äº‹æ— ä¸æ„Ÿåˆ°æƒŠè®¶ã€‚</p><p>ç„¶è€Œï¼Œä¸ºä½œä¸€ä¸ª Objective-C çš„ç¨‹åºå‘˜ï¼Œè¿™ <em>æ­£å¥½</em> æ˜¯æˆ‘ä»¬æ­£åœ¨åšçš„ã€‚</p><p>â€¦â€¦å¥½å§ï¼Œä¸æ˜¯ <em>æ­£å¥½</em> ï¼Œä½†è¿™é‡Œä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªç®±å­ã€‚</p><p>å°±åƒåœ¨ NSHipster ä¸­ <a href=https://nshipster.cn/ns_enum-ns_options/>ä¸€è€Œå†</a> <a href=https://nshipster.cn/nil/>å†è€Œä¸‰</a> åœ°æåˆ°çš„é‚£æ ·ï¼Œæ˜¯ä»€ä¹ˆè®© Objective-C å¦‚æ­¤çš„ç¥å¥‡ï¼Ÿæ­£æ˜¯å°†è¿‡æ—¶çš„ï¼Œé¢å‘è¿‡ç¨‹çš„ C çš„ä¸–ç•Œä¸å— Smalltalk å½±å“çš„ç°ä»£çš„é¢å‘å¯¹è±¡çš„ä¸–ç•Œå…¼å¹¶çš„æ–¹æ³•ã€‚å¦‚æœèƒ½æ°åˆ°å¥½å¤„åœ°å…¼å¹¶ï¼Œä¸¤ä¸ªä¸–ç•Œçš„å¯¹ç«‹å…³ç³»å°±å¯ä»¥è¢«ç”¨æ¥ç†Ÿç»ƒåœ°å¼€å‘è¯­ä¹‰ä¸Šä¸°å¯Œçš„è½¯ä»¶ï¼Œè€Œä¸ç‰ºç‰²æ€§èƒ½ã€‚ä½†æ˜¯åœ¨æ–°ä¸æ—§çš„é¸¿æ²Ÿä¹‹é—´æ¶æ¡¥çš„å´æ˜¯ä¹ŒçƒŸç˜´æ°”çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€æ— ç¼è½¬æ¢å’ŒåŒ…è£…ã€‚</p><p>æ‰“åŒ…å°±æ˜¯ç”¨é¢å‘å¯¹è±¡çš„å®¹å™¨æ¥å°è£…æ ‡é‡ï¼ˆ<code>int</code>ï¼Œ<code>double</code>ï¼Œ<code>BOOL</code> ç­‰ï¼‰å’Œå€¼ç±»å‹ï¼ˆ<code>struct</code>ï¼Œ<code>enum</code>ï¼‰çš„è¿‡ç¨‹ï¼Œä¸»è¦ç”¨äºå°†é‚£äº›å€¼ä¿å­˜åˆ°é¢å‘å¯¹è±¡çš„é›†åˆä¸­â€”â€”å¦‚æ•°ç»„å’Œå­—å…¸ã€‚</p><p><code>NSNumber</code> å¸¸ç”¨äºåŒ…è£…æ ‡é‡ï¼Œä½†æ˜¯åœ¨åŸºç¡€ç±»åº“ä¸­ï¼Œè½»é‡çº§çš„åŒ…è£…å† å†›æ˜¯ <code>NSValue</code>ã€‚</p><hr><p><code>NSValue</code> æ˜¯ç”¨äºæ‰¿è½½å•ä¸€çš„ C æˆ– Objective-C æ•°æ®å€¼çš„å®¹å™¨ã€‚å®ƒèƒ½æ‰¿è½½æ ‡é‡å’Œå€¼ç±»å‹ï¼Œä¹Ÿèƒ½ç”¨äºæŒ‡é’ˆå’Œå¯¹è±¡ IDã€‚</p><p>å¦‚ä½•æ‰“åŒ…å›ºç„¶æ˜¯ä¸ªæ¯ç‡¥æ— å‘³çš„ä¸»é¢˜ï¼Œä½†ä»æœ‰ä¸¤ä¸ªæ–¹æ³•å°¤å…¶å€¼å¾—æ³¨æ„ï¼š<code>+valueWithBytes:objCType:</code>ï¼Œä½¿ç”¨ <code>NSValue</code> çš„å…¥é—¨çº§æ–¹æ³•ï¼›<code>+valueWithNonretainedObject:</code>ï¼Œç›¸å¯¹è¾ƒå°‘äººçŸ¥é“å´ååˆ†æœ‰ç”¨çš„æ–¹æ³•ã€‚</p><h2 id=valuewithbytesobjctype><code>valueWithBytes:objCType:</code></h2><blockquote><p><code>+valueWithBytes:objCType:</code>
åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªåŒ…å«ç»™å®šå€¼çš„ NSValue å¯¹è±¡ï¼Œè¯¥å€¼ä¼šè¢«è§£é‡Šä¸ºä¸€ä¸ªç»™å®šçš„ Objective-C ç±»å‹ã€‚</p><ul><li><code>value</code>: <code>NSValue</code> å¯¹è±¡çš„å€¼ã€‚</li><li><code>type</code>: ç»™å®šå€¼çš„å¯¹åº”çš„ Objective-C ç±»å‹ã€‚<code>type</code> éœ€è¦ç”¨ Objective-C çš„ç¼–è¯‘å™¨æŒ‡ä»¤ <code>@encode()</code> æ¥åˆ›å»ºï¼Œè€Œä¸åº”è¯¥ç”¨ç¡¬ç¼–ç çš„ C è¯­è¨€å­—ç¬¦ä¸²ã€‚</li></ul></blockquote><p><code>@encode</code> åœ¨æ–‡ç«  <a href=https://nshipster.cn/at-compiler-directives/>æ— æ•°ä¸ª <code>@</code> ç¼–è¯‘å™¨æŒ‡ä»¤çš„æ‘˜è¦</a> ä¸­æœ‰è®¨è®ºè¿‡ï¼š</p><blockquote><p><code>@encode()</code>: è¿”å›ä¸€ç§ç±»å‹çš„<a href=https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html>ç±»å‹ç¼–ç </a>ã€‚è¿™ä¸ªç±»å‹å€¼èƒ½ç”¨åš <code>NSCoder -encodeValueOfObjCType:at</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p></blockquote><p>å…³äºç±»å‹ç¼–ç çš„ä¸»é¢˜å¯ä»¥å†™<a href=https://nshipster.com/type-encodings/>ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« </a>ï¼Œä½†å…¶ä¸»è¦å†…å®¹æ˜¯å®ƒç”¨äºå°†ä¸€ç§ç±»å‹çš„ç»“æ„è½¬æ¢ä¸ºç²¾ç»ƒçš„ï¼Œå¯è¯»çš„è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> example {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>id</span>   anObject;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>char</span> <span style=color:#f92672>*</span>aString;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>int</span>  anInt;
</span></span><span style=display:flex><span>} Example;
</span></span></code></pre></div><p>æœ‰å¦‚ä¸‹ç¼–ç ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>{example<span style=color:#f92672>=</span>@<span style=color:#f92672>*</span>i}
</span></span></code></pre></div><p><code>NSValue</code> ç”¨ç±»å‹ç¼–ç åˆ›å»ºå¿…è¦çš„æ•°æ®ç»“æ„ä»¥åœ¨å†…éƒ¨è¡¨ç¤ºè¿™äº›å€¼ã€‚æ•´æ´ï¼</p><h2 id=valuewithnonretainedobject><code>valueWithNonretainedObject:</code></h2><blockquote><p><code>+valueWithNonretainedObject:</code>
åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªåŒ…å«ç»™å®šå¯¹è±¡çš„ NSValueã€‚</p><p><code>anObject</code>: æ–°å¯¹è±¡çš„å€¼ã€‚</p></blockquote><p>å¦‚æœä½ å·²ç»çŸ¥é“ <code>valueWithNonretainedObject</code>ï¼Œä½ åº”è¯¥ä¼šå¾®ç¬‘ç‚¹å¤´ã€‚å¦‚æœä½ ä¸çŸ¥é“ï¼Œä½ å¯èƒ½ä¼šç›®çªå£å‘†ï¼Œå³ä½¿æ²¡æœ‰ä¹Ÿå¿«äº†ã€‚</p><p>ç®€è¦åœ°è¯´ï¼Œ<code>valueWithNonretainedObject:</code> å…è®¸ä¸€ä¸ªå¯¹è±¡æ·»åŠ åˆ°é›†åˆä¸­å»ï¼Œè€Œä¸éœ€è¦æœä» <code>&lt;NSCopying></code> åè®®ã€‚</p><p>å¶å°”ä¼šå‡ºç°ä¸€äº›æƒ…å†µéœ€è¦ç”¨åˆ°æ— æ³•ç›´æ¥æ·»åŠ åˆ° <code>NSArray</code> æˆ– <code>NSDictonary</code> ä¸­çš„å¯¹è±¡ã€‚å¦‚æœä¸çŸ¥é“ <code>valueWithNonretainedObject:</code>ï¼Œè¿™ä¼šè®©ä½ å…¨ç›˜çš†è¾“â€”â€”â€”â€”ç‰¹åˆ«æ˜¯ä½ åˆæ˜¯ä¸ª Objective-C æ–°æ‰‹çš„è¯ã€‚</p><p>ä½†ç°åœ¨ä½ çŸ¥é“äº†ã€‚ä½ ä¸ä¼šåœ¨è¡Œäººæ³¨ç›®ä¹‹ä¸‹æ„Ÿåˆ°çª’æ¯ã€‚ä½ ä¸å†éœ€è¦æ‘¸ç´¢ç€ä» <a href=https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPointerArray_Class/Introduction/Introduction.html><code>NSPointerArray</code></a> æˆ– <a href=https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMapTable_class/Reference/NSMapTable.html%23//apple_ref/occ/cl/NSMapTable><code>NSMapTable</code></a> å¯»æ‰¾ç­”æ¡ˆã€‚ä»Šå¤©ä¼šæ˜¯å…¨æ–°çš„ä¸€å¤©ã€‚</p><hr><h2 id=åœ¨æ‰“å¼€äº†-nsvalue-çš„æ‰€æœ‰æ™ºæ…§ä¹‹åç°åœ¨ä½ å¯ä»¥ä»å®¹åº”å¯¹é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡c-ä¸-smalltalk-ä¹‹é—´çš„æ®‹é…·åˆ’åˆ†äº†å› ä¸ºä¸€ä¸ªç¥å¥‡çš„ç®±å­æ‰€æœ‰äº‹æƒ…éƒ½å˜å¾—ç®€å•>åœ¨æ‰“å¼€äº† <code>NSValue</code> çš„æ‰€æœ‰æ™ºæ…§ä¹‹åï¼Œç°åœ¨ä½ å¯ä»¥ä»å®¹åº”å¯¹é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡ã€C ä¸ Smalltalk ä¹‹é—´çš„æ®‹é…·åˆ’åˆ†äº†ã€‚å› ä¸ºä¸€ä¸ªç¥å¥‡çš„ç®±å­ï¼Œæ‰€æœ‰äº‹æƒ…éƒ½å˜å¾—ç®€å•ã€‚</h2><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2013-01-28 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>