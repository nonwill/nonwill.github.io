<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>NSSecureCoding</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="NSSecureCoding,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="NSSecureCoding,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>NSSecureCoding</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>April Peng</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>æœ¬å‘¨çš„ç®€çŸ­æ–‡ç« ï¼šä½ éœ€è¦äº†è§£çš„å…³äº <code>NSSecureCoding</code> çš„ä¸€åˆ‡ã€‚</p><hr><p><code>NSSecureCoding</code> æ˜¯åœ¨ iOS 6 / OS X Mountain Lion SDKs é‡Œæ¨å‡ºçš„åè®®ã€‚é™¤äº†å°‘æ•°åœ¨ WWDC ä¸­æœ‰æåˆ°ï¼Œ<code>NSSecureCoding</code> å´ä¾ç„¶ç›¸å¯¹æ¨¡ç³Šï¼Œå¤§å¤šæ•°å¼€å‘è€…éƒ½å¯èƒ½å¬è¯´è¿‡å®ƒï¼Œä½†ä¹Ÿè®¸æ°¸è¿œæ²¡æœ‰èµ°è¿‘çœ‹çœ‹å®ƒåˆ°åº•åšä»€ä¹ˆã€‚</p><p><code>NSSecureCoding</code> é€šè¿‡åŠ å…¥ç±»æ–¹æ³• <code>supportsSecureCoding</code> æ¥æ‰©å±•äº† <code>NSCoding</code> åè®®ï¼š</p><p>å¦‚æœä¸€ä¸ªç±»ç¬¦åˆ <code>NSSecureCoding</code> åè®®å¹¶åœ¨ <code>+ supportsSecureCoding</code> è¿”å› <code>YES</code>ï¼Œå°±å£°æ˜äº†å®ƒå¯ä»¥å¤„ç†æœ¬èº«å®ä¾‹çš„ç¼–ç è§£ç æ–¹å¼ï¼Œä»¥é˜²æ­¢æ›¿æ¢æ”»å‡»ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œç¬¦åˆ <code>NSSecureCoding</code> åè®®å¹¶é‡å†™äº† <code>-initWithCoder</code> çš„ç±»åº”è¯¥ä½¿ç”¨ <code>-decodeObjectOfClass:forKey:</code> è€Œä¸æ˜¯ <code>-decodeObjectForKey:</code>ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿå›æƒ³ä¸€ä¸‹ï¼Œ<code>NSCoding</code> æ˜¯åŸºç¡€ç±»åº“ä¸­å°†å¯¹è±¡å½’æ¡£åˆ°æ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œæˆ–å¤åˆ¶åˆ°å¦ä¸€ä¸ªåœ°å€ç©ºé—´çš„ä¸€ç§æ–¹å¼ã€‚å¦‚æœç”¨ <code>-decodeObjectForKey:</code> ç”¨äºæŠŠå¯¹è±¡è§£ç æˆå®é™…çš„å¯¹è±¡ï¼Œå°±ä¸èƒ½ä¿è¯åˆ›å»ºçš„å¯¹è±¡æ˜¯é¢„æœŸçš„ç»“æœã€‚å¦‚æœè¯¥è¡¨ç¤ºå·²æŸå - å…·ä½“åœ°è¯´ï¼Œåœ¨æ”¹å˜ç›®æ ‡ç±»ï¼ˆå¹¶ä¸”å› æ­¤æŒ‡å®šåˆå§‹åŒ–æ–¹æ³•ï¼‰çš„æ—¶å€™ - åº”ç”¨ç¨‹åºå°†ä¼šé¢ä¸´æ„é€ æœªçŸ¥å¯¹è±¡çš„é£é™©ã€‚æ— è®ºæ˜¯æ¶æ„æˆ–å¶ç„¶çš„ç¼–ç é”™è¯¯ï¼Œè¿™éƒ½å¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„é—®é¢˜ã€‚</p><p>è¿™ä¸æ˜¯ä¸€ä¸ªè‹¹æœè·Ÿå¦ä¸€ä¸ªè‹¹æœçš„æ¯”è¾ƒï¼Œè€Œæœ‰ç‚¹ç±»ä¼¼äº<a href=http://tenderlovemaking.com/2013/02/06/yaml-f7u12.html>æœ€è¿‘åœ¨ Rails ä¸­å‘ç°çš„ YAML æ¼æ´</a>ã€‚</p><p>å¯¹äºä¸€ä¸ª <a href=https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingXPCServices.html>XPC service</a> æ¥è¯´ï¼Œå®ƒçš„ç›®çš„æ˜¯ä¸ºå®‰å…¨è€ƒè™‘çš„ï¼Œå› æ­¤æ•°æ®çš„å®Œæ•´æ€§æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å¾ˆå¯èƒ½ XPC ä¼šå¯¹åç»­çš„ iOS å’Œ OS X ç‰ˆæœ¬å¢åŠ å½±å“ï¼Œæ‰€ä»¥æœ€å¥½æŠŠè¿™ä¸€åˆ‡éƒ½é“­è®°åœ¨å¿ƒã€‚</p><p>æ€»ä¹‹ï¼Œ<code>NSSecureCoding</code> é€šè¿‡å»ºç«‹å…³ç³»ç»™è¡¥ä¸Šè¿™ä¸ªæ¼æ´åšäº†æœ€ä½³å®è·µã€‚ç°åœ¨ï¼Œè¦å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œè§£ç ï¼Œéœ€è¦è¯¥ç±»æå‰è¢«å£°æ˜ã€‚</p><p>è€Œä¸€ä¸ªæ ‡å‡†çš„ï¼Œå®‰å…¨çš„ <code>-initWithCoder:</code> å®ç°å¯èƒ½éœ€è¦ä¸€ä¸ªæ£€æŸ¥ï¼Œæ¯”å¦‚ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> object = decoder.decodeObjectForKey(<span style=color:#e6db74>&#34;key&#34;</span>) <span style=color:#66d9ef>as</span>? SomeClass {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>id</span> obj <span style=color:#f92672>=</span> [decoder decodeObjectForKey:<span style=color:#e6db74>@&#34;myKey&#34;</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>[obj isKindOfClass:[MyClass <span style=color:#66d9ef>class</span>]]) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// fail
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>&mldr;ä¸€ä¸ªç¬¦åˆ <code>NSSecureCoding</code> åè®®çš„ç±»åº”è¯¥ä½¿ç”¨:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> object = decoder.decodeObjectOfClass(SomeClass.<span style=color:#66d9ef>self</span>, forKey: <span style=color:#e6db74>&#34;key&#34;</span>) <span style=color:#66d9ef>as</span> SomeClass
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>id</span> obj <span style=color:#f92672>=</span> [decoder decodeObjectOfClass:[MyClass <span style=color:#66d9ef>class</span>]
</span></span><span style=display:flex><span>                               forKey:<span style=color:#e6db74>@&#34;myKey&#34;</span>];
</span></span></code></pre></div><p>æœ‰æ—¶å€™ï¼Œä¸€ç‚¹ç‚¹ API çš„å˜åŒ–ï¼Œä¼šä½¿å¾—æ‰€æœ‰äº‹æƒ…éƒ½åƒå·®ä¸‡åˆ«ã€‚</p><hr><p>æ‰€ä»¥ï¼Œç°åœ¨ä½ çŸ¥é“ä»€ä¹ˆæ˜¯ <code>NSSecureCoding</code> äº†ã€‚ä¹Ÿè®¸ä¸æ˜¯ä»Šå¤©ï¼Œä¹Ÿè®¸ä¹Ÿä¸æ˜¯æ˜å¤©ï¼Œä½†æ€»æœ‰ä¸€å¤©ï¼Œä½ å¯èƒ½éœ€è¦å®ç° <code>NSSecureCoding</code>ã€‚è€Œå½“é‚£ä¸€å¤©åˆ°æ¥çš„æ—¶å€™ï¼Œä½ ä¼šåšå¥½å‡†å¤‡ã€‚</p><p>ä¿é‡ï¼Œå„ä½ã€‚</p><pre tabindex=0><code>
---



é™¤é&lt;a href=&#34;https://nshipster.cn/&#34; target=_blank&gt;å¦æœ‰å£°æ˜&lt;/a&gt;ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/3.0/cn/&#34; target=_blank&gt;ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†&lt;/a&gt;ã€è®¸å¯åè®®æˆæƒã€‚
</code></pre><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2013-04-15 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>