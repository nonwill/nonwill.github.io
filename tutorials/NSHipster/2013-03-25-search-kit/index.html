<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>Search Kit</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="Search Kit,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="Search Kit,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>Search Kit</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Ricky Tan</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>NSHipsters å–œæ¬¢è®½åˆºï¼Œå¯¹å§ï¼Ÿçœ‹çœ‹è¿™ä¸ªè®½åˆºå¦‚ä½•ï¼š</p><p>æœ‰ä¸€ä¸ªå«åš <a href=https://developer.apple.com/library/mac/#documentation/UserExperience/Reference/SearchKit/Reference/reference.html>Search Kit</a> çš„æ¡†æ¶ï¼Œå°½ç®¡å®ƒåœ¨æŸ¥æ‰¾ä¿¡æ¯æ–¹é¢å¥½ç”¨ä¸”å¼ºå¤§åˆ°çˆ†ï¼Œå´å‡ ä¹æ²¡äººå¬è¯´è¿‡ã€‚</p><p>è¿™æ˜¯çœŸçš„ï¼æ¯”èµ·å¬è¯´è¿‡ Search Kitï¼Œæˆ‘çŒœä½ ä»¬å¤§éƒ¨åˆ†äººæ›´å¯èƒ½ä»é›¶å¼€å§‹å®ç°ä½ è‡ªå·±çš„æœç´¢åŠŸèƒ½ã€‚ï¼ˆçœŸæ˜¯å¤Ÿäº†ï¼Œå¤§éƒ¨åˆ†äººç”šè‡³éƒ½æ²¡å¬è¯´è¿‡ <a href=https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CoreServicesReferenceCollection/_index.html>Core Services</a>ï¼Œå®ƒçš„çˆ¶æ¡†æ¶ï¼‰</p><p>ä½†æ„¿æ¯ä¸ªäººéƒ½çŸ¥é“ä»–ä»¬æœ¬å¯ä»¥åœ¨ä»–ä»¬è‡ªå·±çš„åº”ç”¨ä¸­ä½¿ç”¨è‹¹æœå…¬å¸ä½¿ç”¨çš„æ€æ‰‹é”çº§æœç´¢åŠŸèƒ½â€¦â€¦</p><hr><p>Search Kit æ˜¯ä¸€ä¸ªç”¨äººç±»è¯­è¨€æ¥æœç´¢å’Œå»ºç«‹å†…å®¹ç´¢å¼•çš„ C æ¡†æ¶ã€‚å®ƒæ”¯æŒè¯ç»„æˆ–éƒ¨åˆ†å•è¯åŒ¹é…ï¼ŒåŒ…æ‹¬é€»è¾‘æ“ä½œå’Œé€šé…ç¬¦ï¼Œä¸”èƒ½é€šè¿‡ç›¸å…³æ€§å¯¹ç»“æœè¿›è¡Œæ’åºã€‚Search Kit ä¹Ÿæä¾›äº†æ–‡æ¡£æ€»ç»“åŠŸèƒ½ï¼Œåœ¨ç”Ÿæˆæœ‰ä»£è¡¨æ€§çš„æ‘˜è¦æ—¶å¾ˆæœ‰ç”¨ã€‚æœ€é‡è¦çš„æ˜¯ï¼šå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><p>å–å¾—æå¤§æˆåŠŸçš„å³æ‰“å³æœçš„ç‰¹æ€§åº•å±‚éƒ½æ˜¯ Search Kitï¼Œä» OS X çš„é‚®ä»¶ï¼ŒXcode åˆ°ç³»ç»Ÿåå¥½å’Œ Spotlightã€‚</p><p>ä½†æ˜¯æƒ³è¦ç†è§£ Search Kit ä¸ºä½•å¦‚æ­¤ç¥å¥‡ï¼Œé‚£è¿˜å¾—è§£é‡Šä¸€ä¸‹ä¸€äº›ä¿¡æ¯æ£€ç´¢å’Œè‡ªç„¶è¯­è¨€å¤„ç†çš„åŸºç¡€æ¦‚å¿µã€‚</p><blockquote><p>ä¸€å®šè¦å»çœ‹çœ‹ <a href=https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/SearchKitConcepts/searchKit_intro/searchKit_intro.html>è‹¹æœ Search Kit ç¼–ç¨‹æŒ‡å—</a> ä»¥å¾—åˆ°è¿™ä¸ªå±Œçˆ†çš„æ¡†æ¶æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå’Œæ€ä¹ˆä¼šçš„ä¸€ä¸ªæƒå¨è§£é‡Šã€‚</p></blockquote><h2 id=search-101>Search 101</h2><p>å¼•ç”¨è‡ªè‹¹æœï¼š</p><blockquote><p>ä½ æœ‰ä¸€æ¡éœ€è¦çš„ä¿¡æ¯ã€‚ä½†æ˜¯åœ¨ä½ å¼€å§‹é—®é—®é¢˜ä¹‹å‰ï¼Œä½ éœ€è¦ä¸€ä¸ªå¯ä»¥é—®çš„ä¸œè¥¿ã€‚é‚£å°±æ˜¯ï¼Œä½ éœ€è¦ç¡®ç«‹ä¸€ä¸ªä½ èƒ½æ¥å—çš„äººæˆ–ç‰©ä½œä¸ºç­”æ¡ˆçš„æƒå¨è®¤è¯ã€‚æ‰€ä»¥åœ¨ä½ é—®é—®é¢˜ä¹‹å‰ä½ éœ€è¦å®šä¹‰ä½ é—®é¢˜çš„ç›®æ ‡ã€‚</p></blockquote><p>åœ¨åˆç†æ—¶é—´å†…æ‰¾åˆ°ç­”æ¡ˆéœ€è¦ä»ä¸€å¼€å§‹å°±ä½œå‡ºåŠªåŠ›ã€‚ç¬¼ç»Ÿåœ°è¯´ï¼Œå³è¿™ä¸ªè¿‡ç¨‹çœ‹èµ·æ¥æ˜¯æ€æ ·çš„ï¼š</p><h3 id=æŠ½å–>æŠ½å–</h3><p>é¦–å…ˆï¼Œå†…å®¹å¿…é¡»ä» <a href=https://zh.wikipedia.org/wiki/%E8%AF%AD%E6%96%99%E5%BA%93>è¯­æ–™åº“</a> ä¸­æŠ½å–å‡ºæ¥ã€‚å¯¹ä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£è€Œè¨€ï¼Œè¿™ä¼šæ¶‰åŠåˆ°ç§»é™¤æ ·å¼ï¼Œæ ¼å¼æˆ–å…¶ä»–å…ƒä¿¡æ¯ã€‚å¯¹ä¸€ä¸ªæ•°æ®è®°å½•è€Œè¨€ï¼Œæ¯”å¦‚ <code>NSManagedObject</code>ï¼Œè¿™æ„å‘³ç€å°†æ‰€æœ‰ä¸»è¦çš„å­—æ®µåˆå¹¶ä¸ºä¸€ç§è¡¨ç¤ºå½¢å¼ã€‚</p><p>ä¸€æ—¦æŠ½å–å®Œæ¯•ï¼Œå†…å®¹å°†è¢« <a href=https://en.wikipedia.org/wiki/Tokenization>ç¬¦å·åŒ–</a> ä¸ºåç»­è¿‡ç¨‹ä½œå‡†å¤‡ã€‚</p><h3 id=è¿‡æ»¤>è¿‡æ»¤</h3><p>ä¸ºäº†å¾—åˆ°æœ€ç›¸å…³çš„åŒ¹é…ï¼Œè¿‡æ»¤æ‰å¸¸è§çš„ï¼Œå¯¹æ•´ä½“æ„æ€è¡¨è¾¾æ²¡æœ‰å¸®åŠ©çš„â€œåœæ­¢â€è¯æ±‡æ˜¯ååˆ†é‡è¦çš„ï¼Œå¦‚å† è¯ï¼Œä»£è¯å’ŒåŠ©åŠ¨è¯ã€‚</p><h3 id=ç®€åŒ–>ç®€åŒ–</h3><p>åœ¨åŒä¸€è¡Œä¸­ï¼Œè¡¨è¾¾åŒä¸€äº‹ç‰©çš„è¯è¯­åº”å½“ç®€åŒ–ä¸ºä¸€ä¸ªå…±åŒçš„å½¢å¼ã€‚è¯ç´ ç»„ï¼Œå¦‚è¯­æ³•ä¸Šçš„åŠ¨è¯å˜åŒ–ï¼Œä¸¾ä¸ªä¾‹å­åƒ &ldquo;computer&rdquo;ï¼Œ&ldquo;computers&rdquo;ï¼Œ&ldquo;computed&rdquo;ï¼Œ&ldquo;computing&rdquo; éƒ½å¯ä»¥ç”¨ <a href=https://zh.wikipedia.org/wiki/%E8%AF%8D%E5%B9%B2%E6%8F%90%E5%8F%96>è¯å¹²æå–</a> ç®€åŒ–ä¸º &ldquo;compute&rdquo;ã€‚åŒæ ·åœ°ï¼ŒåŒä¹‰è¯å¯ä»¥ç”¨åŒä¹‰è¯è¡¨å½’å¹¶ä¸ºç»Ÿä¸€çš„æ¡ç›®ã€‚</p><h3 id=ç´¢å¼•>ç´¢å¼•</h3><p>æŠ½å–ã€è¿‡æ»¤ã€ç®€åŒ–è¿‡çš„å†…å®¹å˜ä¸ºä¸€ä¸ªæ­£åˆ™åŒ–çš„ç¬¦å·æ•°ç»„ï¼Œå…¶æœ€ç»ˆç»“æœæ˜¯ç”Ÿæˆä¸€ä¸ª <a href=https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95>å€’æ’ç´¢å¼•</a>ï¼Œå¦‚æ­¤ä¸€æ¥æ¯ä¸ªç¬¦å·æŒ‡å‘å®ƒåœ¨ç´¢å¼•ä¸­çš„æ¥æºä½ç½®ã€‚</p><p>å¯¹è¯­æ–™åº“ä¸­çš„æ¯ä¸€ä»½æ–‡æ¡£æˆ–è®°å½•é‡å¤è¿™ä¸€è¿‡ç¨‹ä¹‹åï¼Œæ¯ä¸ªç¬¦å·å¯ä»¥æŒ‡å‘è®¸å¤šä¸åŒçš„æ–‡ç« ã€‚åœ¨æœç´¢è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªæŸ¥è¯¢æ˜ å°„åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦å·ï¼Œæ£€ç´¢å‡ºç¬¦å·å¯¹åº”çš„æ–‡ç« çš„å¹¶é›†ã€‚</p><h2 id=ä½¿ç”¨-search-kit>ä½¿ç”¨ Search Kit</h2><h3 id=åˆ›å»ºç´¢å¼•>åˆ›å»ºç´¢å¼•</h3><p><code>SKIndexRef</code> æ˜¯ Search Kit çš„æ ¸å¿ƒæ•°æ®ç±»å‹ï¼Œå®ƒåŒ…å«æ‰€æœ‰æ‰€éœ€è¦çš„ä¿¡æ¯ï¼Œç”¨æ¥å¤„ç†åŠå®ç°æœç´¢ï¼Œä»¥åŠä¸ºæ–°æ–‡æ¡£æ·»åŠ ä¿¡æ¯ã€‚ç´¢å¼•å¯ä»¥æ˜¯æŒä¹…çš„ / åŸºäºæ–‡ä»¶ï¼Œæˆ–æš‚æ—¶çš„ / å†…å­˜ä¸­ã€‚ç´¢å¼•æ—¢å¯ä»¥ä»å¤´å¼€å§‹åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ä»å·²æœ‰çš„æ–‡ä»¶æˆ–æ•°æ®å¯¹è±¡åŠ è½½ï¼Œä¸€æ—¦ç´¢å¼•ç”¨å®Œäº†ï¼Œå°±åƒè®¸å¤šå…¶å®ƒ C æ¥å£ä¸€æ ·ï¼Œç´¢å¼•å°±å…³é—­äº†ã€‚</p><h3 id=å‘ç´¢å¼•ä¸­æ·»åŠ æ–‡æ¡£>å‘ç´¢å¼•ä¸­æ·»åŠ æ–‡æ¡£</h3><p><code>SKDocumentRef</code> æ˜¯ä¸ç´¢å¼•ä¸­çš„æ¡ç›®ç›¸å¯¹åº”çš„æ•°æ®ç±»å‹ã€‚å½“ä¸€æ¬¡æœç´¢æ‰§è¡Œå®Œæ¯•ï¼Œæ–‡æ¡£ï¼ˆåŒ…æ‹¬å®ƒä»¬çš„å†…å®¹å’Œç›¸å…³åº¦ï¼‰å°±æ˜¯ç»“æœã€‚</p><p>æ¯ä¸ª <code>SKDocumentRef</code> éƒ½å…³è”ç€ä¸€ä¸ª URIã€‚</p><p>å¯¹äºæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡æ¡£ï¼ŒURI å°±æ˜¯æ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„è·¯å¾„ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSURL <span style=color:#f92672>*</span>fileURL <span style=color:#f92672>=</span> [NSURL fileURLWithPath:<span style=color:#e6db74>@&#34;/path/to/document&#34;</span>];
</span></span><span style=display:flex><span>SKDocumentRef document <span style=color:#f92672>=</span> SKDocumentCreateWithURL((<span style=color:#66d9ef>__bridge</span> CFURLRef)fileURL);
</span></span></code></pre></div><p>å¯¹äº Core Data ç®¡ç†çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨ <code>NSManagedObjectID -URIRepresentation</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSURL <span style=color:#f92672>*</span>objectURL <span style=color:#f92672>=</span> [objectID URIRepresentation];
</span></span><span style=display:flex><span>SKDocumentRef document <span style=color:#f92672>=</span> SKDocumentCreateWithURL((<span style=color:#66d9ef>__bridge</span> CFURLRef)objectURL);
</span></span></code></pre></div><blockquote><p>å¯¹äºä»»ä½•å…¶å®ƒæ•°æ®ï¼Œç”±å¼€å‘è€…è‡ªå·±å®šä¹‰ URI è¡¨ç¤ºã€‚</p></blockquote><p>å½“å‘ <code>SKIndexRef</code> æ·»åŠ  <code>SKDocumentRef</code> çš„å†…å®¹æ—¶ï¼Œæ–‡æœ¬æ—¢å¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>string <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;Lorem ipsum dolar sit amet&#34;</span>
</span></span><span style=display:flex><span>SKIndexAddDocumentWithText(index, document, (<span style=color:#66d9ef>__bridge</span> CFStringRef)string, true);
</span></span></code></pre></div><p>&mldr;ä¹Ÿå¯ä»¥ä»æ–‡ä»¶è‡ªåŠ¨é‡‡é›†ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>mimeTypeHint <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;text/rtf&#34;</span>
</span></span><span style=display:flex><span>SKIndexAddDocument(index, document, (<span style=color:#66d9ef>__bridge</span> CFStringRef)mimeTypeHint, true);
</span></span></code></pre></div><p>ä¸ºäº†æ”¹å˜åŸºäºæ–‡ä»¶çš„æ–‡æ¡£å†…å®¹çš„å¤„ç†æ–¹å¼ï¼Œåœ¨åˆ›å»ºç´¢å¼•æ—¶å¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSSet <span style=color:#f92672>*</span>stopwords <span style=color:#f92672>=</span> [NSSet setWithObjects:<span style=color:#e6db74>@&#34;all&#34;</span>, <span style=color:#e6db74>@&#34;and&#34;</span>, <span style=color:#e6db74>@&#34;its&#34;</span>, <span style=color:#e6db74>@&#34;it&#39;s&#34;</span>, <span style=color:#e6db74>@&#34;the&#34;</span>, nil];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSDictionary <span style=color:#f92672>*</span>properties <span style=color:#f92672>=</span> <span style=color:#ae81ff>@{</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>@&#34;kSKStartTermChars&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>@&#34;&#34;</span>, <span style=color:#75715e>// additional starting-characters for terms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#e6db74>@&#34;kSKTermChars&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>@&#34;-_@.&#39;&#34;</span>, <span style=color:#75715e>// additional characters within terms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#e6db74>@&#34;kSKEndTermChars&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>@&#34;&#34;</span>,   <span style=color:#75715e>// additional ending-characters for terms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#e6db74>@&#34;kSKMinTermLength&#34;</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>@(</span><span style=color:#ae81ff>3</span><span style=color:#ae81ff>)</span>,
</span></span><span style=display:flex><span>  <span style=color:#e6db74>@&#34;kSKStopWords&#34;</span><span style=color:#f92672>:</span>stopwords
</span></span><span style=display:flex><span><span style=color:#ae81ff>}</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SKIndexRef index <span style=color:#f92672>=</span> SKIndexCreateWithURL((CFURLRef)url, NULL, kSKIndexInverted, (CFDictionaryRef)properties);
</span></span></code></pre></div><h3 id=æœç´¢>æœç´¢</h3><p><code>SKSearchRef</code> æ˜¯åœ¨ <code>SKIndexRef</code> ä¸Šæ‰§è¡Œæœç´¢æ—¶æ„å»ºçš„æ•°æ®ç±»å‹ã€‚å®ƒåŒ…å«ç´¢å¼•çš„å¼•ç”¨ï¼ŒæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå’Œä¸€äº›é€‰é¡¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>query <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;kind of blue&#34;</span>;
</span></span><span style=display:flex><span>SKSearchOptions options <span style=color:#f92672>=</span> kSKSearchOptionDefault;
</span></span><span style=display:flex><span>SKSearchRef search <span style=color:#f92672>=</span> SKSearchCreate(index, (CFStringRef)query, options);
</span></span></code></pre></div><p><code>SKSearchOptions</code> æ˜¯æœ‰ä»¥ä¸‹å¯èƒ½å€¼çš„ä½æ©ç ï¼š</p><blockquote><ul><li><code>kSKSearchOptionDefault</code>ï¼šé»˜è®¤æœç´¢é€‰é¡¹åŒ…æ‹¬ï¼š<ul><li>è®¡ç®—ç›¸å…³åº¦çš„å€¼</li><li>æŸ¥è¯¢ä¸­çš„ç©ºæ ¼è§£é‡Šä¸ºé€»è¾‘<strong>ä¸</strong>æ“ä½œ</li><li>ä¸ä½¿ç”¨ç›¸ä¼¼æœç´¢</li></ul></li></ul></blockquote><p>è¿™äº›é€‰é¡¹ä¹Ÿå¯ä»¥å•ç‹¬æŒ‡å®šï¼š</p><blockquote><ul><li><code>kSKSearchOptionNoRelevanceScores</code>ï¼šè¿™ä¸ªé€‰é¡¹ä¸è®¡ç®—ç›¸å…³åº¦å€¼å¯ä»¥èŠ‚çœæœç´¢æ—¶é—´ã€‚</li><li><code>kSKSearchOptionSpaceMeansOR</code>ï¼šè¿™ä¸ªé€‰é¡¹å°†æŸ¥è¯¢è¯­å¥ä¸­çš„ç©ºæ ¼æ”¹ä¸ºé€»è¾‘<strong>æˆ–</strong>æ“ä½œã€‚</li><li><code>kSKSearchOptionFindSimilar</code>ï¼šè¿™ä¸ªé€‰é¡¹ä½¿ Search Kit è¿”å›ä¸ç¤ºä¾‹æ–‡æœ¬ç›¸ä¼¼çš„æ–‡æ¡£å¼•ç”¨ã€‚å½“è¿™ä¸ªé€‰é¡¹æŒ‡å®šæ—¶ï¼ŒSearch Kit å¿½ç•¥æ‰€æœ‰æŸ¥è¯¢æ“ä½œç¬¦ã€‚</li></ul></blockquote><p>å°†æ‰€æœ‰è¿™äº›æ”¾åˆ°ä¸€èµ·çš„æ˜¯ <code>SKIndexCopyDocumentURLsForDocumentIDs</code>ï¼Œå®ƒæ‰§è¡Œæœç´¢ç„¶åç”¨ç»“æœå¡«å……æ•°ç»„ã€‚åœ¨åŒ¹é…çš„èŒƒå›´ä¸­éå†å¯ä»¥è®¿é—®æ–‡æ¡£çš„ URL å’Œç›¸å…³åº¦å€¼ï¼ˆå¦‚æœè®¡ç®—äº†çš„è¯ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSUInteger limit <span style=color:#f92672>=</span> ...; <span style=color:#75715e>// Maximum number of results
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>NSTimeInterval time <span style=color:#f92672>=</span> ...; <span style=color:#75715e>// Maximum time to get results, in seconds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>SKDocumentID documentIDs[limit];
</span></span><span style=display:flex><span>CFURLRef urls[limit];
</span></span><span style=display:flex><span><span style=color:#66d9ef>float</span> scores[limit];
</span></span><span style=display:flex><span>CFIndex count;
</span></span><span style=display:flex><span><span style=color:#66d9ef>Boolean</span> hasResult <span style=color:#f92672>=</span> SKSearchFindMatches(search, limit, documentIDs, scores, time, <span style=color:#f92672>&amp;</span>count);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SKIndexCopyDocumentURLsForDocumentIDs(index, foundCount, documentIDs, urls);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSMutableArray <span style=color:#f92672>*</span>mutableResults <span style=color:#f92672>=</span> [NSMutableArray array];
</span></span><span style=display:flex><span>[[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(<span style=color:#ae81ff>0</span>, count)] enumerateIndexesUsingBlock:<span style=color:#f92672>^</span>(NSUInteger idx, <span style=color:#66d9ef>BOOL</span> <span style=color:#f92672>*</span>stop) {
</span></span><span style=display:flex><span>    CFURLRef url <span style=color:#f92672>=</span> urls[idx];
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> relevance <span style=color:#f92672>=</span> scores[idx];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    NSLog(<span style=color:#e6db74>@&#34;- %@: %f&#34;</span>, url, relevance);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (objectID) {
</span></span><span style=display:flex><span>      [mutableResults addObject:(NSURL <span style=color:#f92672>*</span>)url];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    CFRelease(url);
</span></span><span style=display:flex><span>}];
</span></span></code></pre></div><blockquote><p>æ›´å¤š Search Kit å®ä¾‹è¯·æŸ¥çœ‹ <a href=https://github.com/indragiek>Indragie Karunaratne&rsquo;s</a> é¡¹ç›®ï¼Œ<a href=https://github.com/indragiek/SNRSearchIndex>SNRSearchIndex</a>ã€‚</p></blockquote><hr><p>æœ¬æ–‡ä¹Ÿæˆäº†äº’è”ç½‘ä¸Šè¯­æ–™åº“çš„å¦ä¸€ä¸ªæ–‡æ¡£äº†ã€‚é€šè¿‡æŒ‡å‘ Search Kitï¼Œå¹¶è§£é‡Šå“ªæ€•å®ƒæœ€ç®€å•çš„ç‰¹æ€§ï¼Œæœ¬æ–‡â€”â€”â€”â€” ä½ å½“å‰æ­£åœ¨è¯»çš„å­—ç¬¦ä¸²ç¬¦å· â€”â€”â€”â€” ï¼ˆä¹Ÿè®¸ï¼‰è®©ä»–äººæ›´å®¹æ˜“åœ°æ‰¾åˆ° Search Kitã€‚</p><p>&mldr;å½“ç„¶äº†è¿™ä¹Ÿæ˜¯ä¸€ä»¶å¥½äº‹ï¼Œå› ä¸º Search Kit æ˜¯ä¸ªäº†ä¸èµ·çš„åˆæ™¦æ¶©çš„æ¡†æ¶ï¼Œé‚£äº›åœ¨å»ºç«‹åŸºäºå†…å®¹çš„ç³»ç»Ÿçš„äººéƒ½å°†å¥½å¥½è°ƒç ”ä¸€ä¸‹ã€‚</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2013-03-25 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>