<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>UICollectionView</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="UICollectionView,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="UICollectionView,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>UICollectionView</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>JJ Mao</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p><code>UICollectionView</code> æ˜¯ä¸€ç§æ–°çš„ <code>UITableView</code> ï¼Œå¹¶ä¸”å®ƒæå…¶é‡è¦ã€‚</p><p>è¿™å¹¶ä¸æ˜¯è¯´ï¼Œcollection viewsæ˜¯æœªçŸ¥æˆ–æ¨¡ç³Šçš„&ndash;ä»»ä½•ä¸€ä¸ªå»è¿‡æœ‰å…³å®ƒWWDCä¼šè®®çš„æˆ–æ˜¯åœ¨ iOS 6 beta ç‰ˆä¸Šç©è¿‡çš„äººéƒ½çŸ¥é“æ€ä¹ˆå›äº‹ã€‚</p><p>è®°ä½ï¼Œä½œä¸ºä¸€ä¸ªNSHipsterï¼Œä¸ä»…ä»…æ˜¯çŸ¥é“åä¸è§ç»ä¼ çš„çŸ³å¤´ï¼Œæ›´å¤šæ˜¯åœ¨å®ƒä»¬å®¶å–»æˆ·æ™“ã€å”®ç½„ä¸€ç©ºä¹‹å‰å°±çŸ¥é“æœ‰å‰é€”ã€‚æ‰€ä»¥å‘¢ï¼Œåœ¨å…¶ä»–äººå‘ç°ä¹‹å‰ï¼Œè¿™å„¿æœ‰ä¸ªå…³äºå¤§çƒ­é—¨çš„æ¦‚è¦ï¼š</p><hr><p><code>UICollectionView</code> é‡‡ç”¨ <code>UITableView</code> çš„ç†ŸçŸ¥æ¨¡å¼ï¼Œå¹¶æ¦‚æ‹¬äº†ä»–ä»¬ä½œå‡ºä»»ä½•å¯èƒ½çš„å¸ƒå±€ (ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å¾®ä¸è¶³é“çš„)ã€‚</p><p>å’Œ <code>UITableView</code> ä¸€æ ·ï¼Œ<code>UICollectionView</code> æ˜¯ç®¡ç†æœ‰åºitemsé›†åˆçš„ <code>UIScrollView</code> å­ç±»ã€‚ç”± <em>data source</em> ç®¡ç†çš„itemsåœ¨ç‰¹å®šç´¢å¼•è·¯å¾„ä¸Šæä¾›æœ‰ä»£è¡¨æ€§çš„cell viewã€‚</p><p>ç„¶è€Œï¼Œå’Œ <code>UITableView</code> ä¸åŒçš„æ˜¯ï¼Œ<code>UICollectionView</code> ä¸å±€é™äºå‚ç›´çš„å•åˆ—å¸ƒå±€ã€‚ç›¸åï¼Œcollection viewæœ‰ä¸€ä¸ª <em>layout</em> å¯¹è±¡ï¼Œå®ƒå†³å®šå­è§†å›¾çš„ä½ç½®ï¼Œè¿™ç±»ä¼¼äºæŸäº›æ–¹é¢çš„data sourceã€‚ç¨åå°†ä½œè¯¦ç»†ä»‹ç»ã€‚</p><h3 id=cell-è§†å›¾>Cell è§†å›¾</h3><p>åœ¨å¦ä¸€ä¸ªä¸åŒäºæ—©æœŸtable viewçš„åšæ³•ä¸­ï¼Œè§†å›¾çš„å›æ”¶è¿‡ç¨‹æœ‰æ˜æ˜¾æ”¹å–„ã€‚</p><p>åœ¨ <code>-tableView:cellForRowAtIndexPath:</code> ä¸­ï¼Œå¼€å‘è€…å¿…é¡»è°ƒç”¨ç†Ÿæ‚‰çš„å’’è¯­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>UITableViewCell <span style=color:#f92672>*</span>cell <span style=color:#f92672>=</span> [tableView dequeueReusableCellWithIdentifier:...];
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>cell) {
</span></span><span style=display:flex><span>  cell <span style=color:#f92672>=</span> [[UITableViewCell alloc] initWithStyle:... reuseIdentifier:...];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è°¢å¤©è°¢åœ°ï¼Œ<code>UICollectionView</code> ä¸ç”¨è¿™æ ·äº†ã€‚å¦‚æœæ²¡æœ‰å¯é‡ç”¨çš„cellsï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„cellï¼Œ<code>-dequeueReusableCellWithReuseIdentifier:forIndexPath:</code>ç¡®ä¿è¿”å›ä¸€ä¸ªæœ‰æ•ˆå¯¹è±¡ã€‚åªéœ€ä¸ºç‰¹å®šçš„é‡ç”¨æ ‡è¯†ç¬¦æ³¨å†Œä¸€ä¸ª <code>UICollectionReusableView</code> å­ç±»ï¼Œä¸€åˆ‡éƒ½ä¼šè‡ªåŠ¨å·¥ä½œã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼ŒiOS 6ä¸­ <code>UITableView</code> ä¹Ÿæ”¯æŒè¿™ç§ç”¨æ³•ã€‚</p><h3 id=supplementary-è§†å›¾>Supplementary è§†å›¾</h3><p>ç”±äºcollection viewsæ²¡æœ‰è¢«å½’å…¥ä»»ä½•ç‰¹å®šç»“æ„ï¼Œ&ldquo;header&rdquo; å’Œ &ldquo;footer"è§†å›¾çš„çº¦å®šä¸æ˜¯å¾ˆé€‚ç”¨ã€‚æ‰€ä»¥åœ¨å®ƒè¿™ä¸ªåœ°æ–¹ï¼Œcollection viewsæ‹¥æœ‰å¯ä»¥ä¸æ¯ä¸ªcellå…³è”çš„
<em>supplementary views</em>ã€‚</p><p>æ¯ä¸ªcellå¯ä»¥æœ‰å¤šä¸ªä¸ä¹‹å…³è”çš„supplementary views&ndash;æ¯ä¸ªå‘½åä¸º"kind&rdquo;ã€‚æ­£å› å¦‚æ­¤ï¼Œheaderså’Œfootersä»…ä»…æ˜¯supplementary viewsæ‰€æ–½å±•çš„ä¸€æˆåŠŸåŠ›ã€‚</p><p>å…³é”®åœ¨äºsupplementary viewsï¼Œå³ä½¿æœ€å¤æ‚çš„layoutä¹Ÿå¯ä»¥è¢«å®ç°è€Œä¸å½±å“cellsçš„è¯­ä¹‰å®Œæ•´æ€§ã€‚<code>UITableView</code> hackså¯¹äº<a href=https://en.wikipedia.org/wiki/Spacer_GIF><code>spacer.gif</code></a>å°±åƒ <code>UICollectionView</code> cellså¯¹äº<a href=https://en.wikipedia.org/wiki/Semantic_HTML>semantic HTML</a>ã€‚</p><h3 id=decoration-è§†å›¾>Decoration è§†å›¾</h3><p>é™¤äº†cell viewså’Œsupplementary viewsï¼Œcollectionsè¿˜æœ‰ <em>decoration views</em>ã€‚ä¸€ä¸ªdecoration viewï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ä¸€ç§æ²¡æœ‰åŠŸèƒ½æ€§ç”¨é€”çš„ä¸œè¥¿&mldr; é™¤äº†åœ¨ç½‘ç»œä¸Šä¼ æ’­çš„<a href=http://skeu.it>æ‘’å¼ƒå¯¹anti-skeuomorphicç‹‚çƒ­åˆ†å­çš„ä»‡æ¨</a>ã€‚ä¸è¿‡è¯´çœŸçš„ï¼Œå¦‚æœä½ æ„¿æ„ç»™ä½ çš„è™šæ‹Ÿè—ä¹¦åº”ç”¨é•¶åµŒå®Œç¾è´¨æ„Ÿçš„æœ¨çº¹æ¶å­ï¼Œè¿™å¾ˆå¯èƒ½æ˜¯å®¹æ˜“åšåˆ°çš„ï¼Œ<em>å¯¹å—</em>ï¼Ÿ</p><p>æœ‰ä¸€ç‚¹è¦è®°ä½çš„æ˜¯ï¼Œdecoration viewså®Œå…¨æ˜¯ç”±layoutç®¡ç†çš„ï¼Œä¸cellæˆ–supplementary viewsä¸ä¸€æ ·,å®ƒä¸åœ¨collection view data sourceçš„ç®¡è¾–èŒƒå›´å†…ã€‚</p><h2 id=layoutså’Œlayoutå±æ€§>Layoutså’ŒLayoutå±æ€§</h2><p>Layoutsæ˜¯ä½¿ <code>UICollectionView</code> å¦‚æ­¤ç¥å¥‡çš„æ ¸å¿ƒã€‚æŠŠå®ƒä»¬çœ‹ä½œæ˜¯CSSå¯¹äºä¹‹å‰æåˆ°çš„collection cellsçš„semantic HTMLã€‚</p><p><code>UICollectionViewLayout</code> æ˜¯ä¸€ä¸ªæŠ½è±¡çš„åŸºç±»ï¼Œç”¨äºå®šä½cell viewså’Œå®ƒä»¬çš„supplementaryå’Œdecoration viewsã€‚ä½†ä¸æ˜¯å°†å®ƒç›´æ¥å½’å…¥å­ç±»ï¼Œå¤§å¤šæ•°åº”ç”¨å–œæ¬¢ä½¿ç”¨æˆ–è€…å°† <code>UICollectionViewFlowLayout</code> å½’å…¥å­ç±»ã€‚Flow layoutsç”¨ä¸€äº›çº¿æ€§æ¦‚å¿µè¦†ç›–äº†layoutsçš„å¹¿ä¹‰ç±»ï¼Œä¸ç®¡å®ƒæ˜¯å•è¡Œæˆ–å•åˆ—æˆ–ä¸€æ ¼ã€‚</p><p>åœ¨ä½ è¶³å¤Ÿå®‰å¿ƒåœ°äº†è§£äº†flow layoutsçš„æ‰€æœ‰é™åˆ¶ä¹‹å‰ï¼Œä½ å¯ä»¥ç¨³å¦¥åœ°ä»flow layoutså¼€å§‹å­¦ä¹ ã€‚</p><p>æ¯ä¸ªcell viewã€supplemental viewå’Œdecoration view éƒ½æœ‰layoutå±æ€§ã€‚æƒ³è¦çŸ¥é“layoutså¦‚ä½•çµæ´»ï¼Œåªéœ€çœ‹çœ‹ <code>UICollectionViewLayoutAttributes</code> å¯¹è±¡çš„ç‰¹æ€§å°±çŸ¥é“äº†ï¼š</p><ul><li><code>frame</code></li><li><code>center</code></li><li><code>size</code></li><li><code>transform3D</code></li><li><code>alpha</code></li><li><code>zIndex</code></li><li><code>hidden</code></li></ul><p>å±æ€§ç”±ä½ å¯èƒ½æƒ³è¦çš„é‚£ç§å§”æ‰˜æ–¹æ³•æŒ‡å®šï¼š</p><ul><li><code>-layoutAttributesForItemAtIndexPath:</code></li><li><code>-layoutAttributesForSupplementaryViewOfKind:atIndexPath:</code></li><li><code>-layoutAttributesForDecorationViewOfKind:atIndexPath:</code></li></ul><p>è¿™æ˜¯æœ€é…·çš„æ–¹æ³•ï¼š</p><ul><li><code>-layoutAttributesForElementsInRect:</code></li></ul><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å½“itemsé è¿‘å±å¹•è¾¹ç¼˜æ—¶æ·¡å‡ºã€‚æˆ–è€…ï¼Œç”±äºæ‰€æœ‰çš„layoutå±æ€§ç‰¹æ€§æ˜¯è‡ªåŠ¨æ”¯æŒåŠ¨ç”»çš„ï¼Œä½ å¯ä»¥ç”¨ä¸€å¥—æ­£ç¡®çš„3D transformsåœ¨çŸ­çŸ­å‡ è¡Œä»£ç é‡Œåˆ›å»ºä¸€ä¸ªç®€é™‹çš„<a href=https://en.wikipedia.org/wiki/Cover_Flow>cover flow</a> layoutã€‚</p><p>å®é™…ä¸Šï¼Œcollection viewsç”šè‡³å¯ä»¥å¤§è§„æ¨¡çš„äº¤æ¢layoutsï¼Œåœ¨ä¸æ”¹å˜åº•å±‚æ•°æ®çš„æƒ…å†µä¸‹å…è®¸è§†å›¾åœ¨ä¸åŒæ¨¡å¼ä¸‹æ— ç¼äº¤æ¢ã€‚</p><hr><p>è‡ªä»æœ‰äº†iPadï¼ŒiOSä¸šç•Œä¾¿å¼¥æ¼«ç€ä¸€ç§å¾˜å¾ŠäºåŸå…ˆiPhoneçš„UIè®¾è®¡æ¨¡å¼å’Œå¯¹è¿™ç§æ›´æ–°çš„ã€å¤–å½¢å°ºå¯¸æ›´å¤§çš„éœ€æ±‚ä¹‹é—´çš„å¾®å¦™è€Œç´§å¼ çš„æ°”æ°›ã€‚éšç€iPhone 5å’Œ"iPad mini"çš„ä¼ é—»ï¼Œè¦ä¸æ˜¯ <code>UICollectionView</code> (ä»¥åŠAuto-Layout)ï¼Œè¿™ç§ç´§å¼ æ°”æ°›å¯èƒ½å¯¼è‡´æ•´ä¸ªiOSå¹³å°çš„è¡”æ¥æ–­è£‚ã€‚</p><p>Appleæœ‰æ— æ•°ç§ä¸åŒæ–¹å¼æä¾›ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆæˆ–è€…å¹²è„†ä¸æä¾›ï¼‰ï¼Œä½†æ˜¯ä¸€æ—¦æä¾›ï¼Œä»–ä»¬åœ¨è®¾è®¡è¿™ç±»åŠŸèƒ½æ–¹é¢çš„ç¡®èƒ½å¤Ÿå„ä¸ªéƒ½æ˜¯å…¨å’æ‰“ã€‚</p><p>data sourceå’Œlayoutæ¥å£ä¹‹é—´ç®€æ´æ˜äº†çš„é€»è¾‘åˆ†ç¦»ï¼›cellã€supplementaryå’Œdecorationè§†å›¾ä¹‹é—´æ˜ç¡®çš„åˆ†å·¥ï¼›ä¸€å †å¯ç»§æ‰¿æ‹“å±•ä»¥åŠå¯é€šè¿‡UIKitè‡ªåŠ¨å®ç°åŠ¨ç”»çš„layoutå±æ€§&mldr;å¤§é‡çš„ç»†å¿ƒä¸æ™ºæ…§æ‰ç»„æˆäº†è¿™äº›APIã€‚</p><p>å› æ­¤ï¼ŒiOSåº”ç”¨çš„æ•´ä¸ªå‰æ™¯å°†ä¼šæ°¸è¿œæ”¹å˜ã€‚æœ‰äº†collection viewsï¼Œæˆ‘ä»¬çš„å®¡ç¾å·²ç»éšç€iPadåº”ç”¨çš„è§†è§‰å’Œäº¤äº’çš„æ•´ä¸ªé‡æ–°å®šä¹‰è€Œè½¬å˜ã€‚</p><p>å¤§å®¶å¯èƒ½å¯¹collection viewså°šæœªç†Ÿæ‚‰ï¼Œä½†æ˜¯ç°åœ¨ä½ å¯ä»¥è¯´åœ¨å®ƒä»¬è¿˜æ²¡æµè¡Œèµ·æ¥ä¹‹å‰å°±çŸ¥é“å®ƒä»¬äº†ã€‚</p><blockquote><p>ä¸ºäº†æ–¹ä¾¿åœ¨ä½ çš„åº”ç”¨é‡Œä½¿ç”¨è¿™ä¸ªcollection viewçš„æ–°ç‰¹æ€§ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šè®©ä½ æ„Ÿè§‰å¿…é¡»æå‡iOS 6çš„ä½¿ç”¨ç‡æ‰èƒ½åšåˆ°è¿™ä»¶äº‹ï¼Œè¿™å„¿æœ‰ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼š</p></blockquote><blockquote><p><a href=https://github.com/steipete>Peter Steinberger</a> å‘å¸ƒäº†<a href=https://github.com/steipete/PSTCollectionView>PSTCollectionView</a>, <em>ä¸€ä¸ª100% API-å…¼å®¹çš„ <code>UICollectionView</code>æ›¿ä»£ç‰©ï¼Œå®ƒæ”¯æŒiOS 4.3+</em> ã€‚æ¥çœ‹çœ‹!</p></blockquote><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2012-09-24 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>