<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>NSRange</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="NSRange,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="NSRange,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>NSRange</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Chester Liu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p><code>NSRange</code> æ˜¯ Foundation æ¡†æ¶ä¸­æ ¸å¿ƒçš„ç±»å‹ä¹‹ä¸€ã€‚åœ¨æ¡†æ¶ä»£ç ä¸­æˆ‘ä»¬ç»å¸¸çœ‹åˆ°å®ƒä½œä¸ºå‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æŒæ¡å¥½ NSRange è¿™ä¸ªç»“æ„ä¼šæœ‰å¾ˆå¤šç”¨å¤„ã€‚è¿™å‘¨çš„æ–‡ç« å°†ä¼šåšä½ çš„å¼•è·¯äººã€‚</p><hr><p>èŒƒå›´è¿™ä¸ªæ•°æ®ç±»å‹ç”¨æ¥æè¿°ä¸€ç³»åˆ—è¿ç»­æ•´æ•°å½“ä¸­çš„ä¸€ä¸ªåŒºé—´ã€‚å®ƒä»¬æœ€å¸¸è¢«ç”¨åˆ°å­—ç¬¦ä¸²ï¼Œæ•°ç»„å’Œå…·æœ‰ç±»ä¼¼é¡ºåºçš„é›†åˆç±»å‹ä¸Šã€‚</p><p>å¯¹äº Objective-C ç¨‹åºæ¥è¯´ï¼ŒFoundation çš„ <code>NSRange</code> è¢«ç”¨äºè¡¨ç¤ºèŒƒå›´ã€‚åœ¨åˆ«çš„è¯­è¨€ä¸­ï¼ŒèŒƒå›´ç»å¸¸è¢«ç¼–ç æˆä¸€ä¸ªæœ‰ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«èµ·ç‚¹å’Œç»ˆç‚¹çš„ç´¢å¼•ã€‚Foundation ä¸­çš„ <code>NSRange</code> é‡‡ç”¨äº†ä¸€ç§ä¸åŒçš„æ–¹æ³•ï¼Œå®ƒæŠŠèŒƒå›´ç¼–ç æˆä¸€ä¸ªåŒ…å«ç€ä½ç½®å’Œé•¿åº¦çš„ç»“æ„ä½“ã€‚åœ¨ Xcode é‡Œé€šè¿‡åœ¨ <code>NSRange</code> ç¬¦å·ä¸Šåšå‘½ä»¤ç‚¹å‡»(<code>âŒ˜-Ê˜</code>)ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è·³è½¬åˆ°å®ƒåœ¨ <code>Foundation/NSRange.h</code> ä¸­çš„å®šä¹‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> _NSRange {
</span></span><span style=display:flex><span>    NSUInteger location;
</span></span><span style=display:flex><span>    NSUInteger length;
</span></span><span style=display:flex><span>} NSRange;
</span></span></code></pre></div><p>ä»å®è·µä¸Šçœ‹ï¼Œè¿™ç§åŠæ³•å‡å°‘äº†å¸¸è§çš„â€œåç§»ä¸€ä½â€çš„é”™è¯¯å‘ç”Ÿçš„æƒ…å†µã€‚ä¾‹å¦‚ä¸‹é¢çš„ Javascript å’Œ Objective-C ä»£ç åšçš„åŒæ ·çš„äº‹æƒ…ï¼Œé€šè¿‡ç»™å®šçš„å­—ç¬¦ä¸²å¾—åˆ°æ‰€æœ‰å­—ç¬¦çš„èŒƒå›´ï¼š</p><h4 id=rangejs>range.js</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>string</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;hello, world&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>range</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>string</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>];
</span></span></code></pre></div><p>å¦‚æœå¿˜è®°ç»™æœ«å°¾çš„ç´¢å¼•å‡ <code>1</code>ï¼ŒJavascript ä¼šé‡åˆ°è¶Šç•Œé”™è¯¯ã€‚</p><h4 id=rangem>range.m</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>string <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;hello, world&#34;</span>;
</span></span><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, [string length]);
</span></span></code></pre></div><p><code>NSRange</code> çš„åŠæ³•ç›¸å¯¹æ›´åŠ æ¸…æ™°å’Œä¸å®¹æ˜“å‡ºé”™ï¼Œå°¤å…¶æ˜¯åœ¨èŒƒå›´å€¼ä¸Šè¿›è¡Œå¤æ‚çš„ç®—æœ¯è¿ç®—æ—¶æ›´ä¸ºæ˜æ˜¾ã€‚</p><h2 id=ç”¨æ³•>ç”¨æ³•</h2><h3 id=å­—ç¬¦ä¸²>å­—ç¬¦ä¸²</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>string <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;lorem ipsum dolor sit amet&#34;</span>;
</span></span><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> [string rangeOfString:<span style=color:#e6db74>@&#34;ipsum&#34;</span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// {.location=6, .length=5}
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>NSString <span style=color:#f92672>*</span>substring <span style=color:#f92672>=</span> [string substringWithRange:range];
</span></span><span style=display:flex><span><span style=color:#75715e>// @&#34;ipsum&#34;
</span></span></span></code></pre></div><p><code>NSString</code> æ²¡æœ‰ç±»ä¼¼ <code>containsString:</code> çš„æ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨ <code>rangeOfString:</code> è¿™ä¸ªæ–¹æ³•æ£€æµ‹å­—ç¬¦ä¸²ä½ç½®æ˜¯ä¸æ˜¯ <code>NSNotFound</code>ï¼ˆè¯‘è€…æ³¨ï¼šiOS 8 ä¸­å¢åŠ äº† <code>containsString:</code> æ–¹æ³•ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>input <span style=color:#f92672>=</span> ...;
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ([input rangeOfString:<span style=color:#e6db74>@&#34;keyword&#34;</span>].location <span style=color:#f92672>!=</span> NSNotFound) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><h3 id=æ•°ç»„>æ•°ç»„</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSArray <span style=color:#f92672>*</span>array <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span><span style=color:#e6db74>@&#34;a&#34;</span>, <span style=color:#e6db74>@&#34;b&#34;</span>, <span style=color:#e6db74>@&#34;c&#34;</span>, <span style=color:#e6db74>@&#34;d&#34;</span><span style=color:#ae81ff>]</span>;
</span></span><span style=display:flex><span>NSArray <span style=color:#f92672>*</span>subarray <span style=color:#f92672>=</span> [array subarrayWithRange:NSMakeRange(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>)];
</span></span><span style=display:flex><span><span style=color:#75715e>// @[@&#34;b&#34;, @&#34;c&#34;]
</span></span></span></code></pre></div><h3 id=ç´¢å¼•é›†>ç´¢å¼•é›†</h3><p><a href=https://nshipster.cn/nsindexset/>NSIndexSet</a> æ˜¯ä¸€ä¸ªå’Œ <code>NSRange</code> ç›¸ä¼¼çš„ Foundation é›†åˆç±»å‹ã€‚ä¸åŒçš„æ˜¯ï¼Œå®ƒæ”¯æŒéè¿ç»­çš„åºåˆ—ã€‚ä¸€ä¸ª <code>NSIndexSet</code> å¯ä»¥ä» range ä¸­åˆ›å»ºï¼Œä½¿ç”¨ <code>indexSetWithIndexesInRange:</code> ç±»æ„é€ å™¨ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>10</span>);
</span></span><span style=display:flex><span>NSIndexSet <span style=color:#f92672>*</span>indexSet <span style=color:#f92672>=</span> [NSIndexSet indexSetWithIndexesInRange:range];
</span></span></code></pre></div><h2 id=å‡½æ•°>å‡½æ•°</h2><p>ç”±äº <code>NSRange</code> ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œåˆ›å»ºå’Œä½¿ç”¨å®ƒçš„å®ä¾‹éƒ½æ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨æ¥è¿›è¡Œçš„ï¼Œè€Œä¸æ˜¯å®ä¾‹æ–¹æ³•ã€‚</p><blockquote><p>è®¸å¤š NSRange çš„å‡½æ•°éƒ½è¿åäº† Foundation å’Œ CoreFoundation ä¸­çš„ç°ä»£å‘½åæƒ¯ä¾‹ï¼Œå³åœ¨ä¸¤ä¸ªå­—æ¯çš„å‘½åç©ºé—´ä»¥åï¼Œç›´æ¥è·Ÿä¸Šå‡½æ•°æ‰€å…³è”çš„ç±»å‹ã€‚ä¾‹å¦‚ <code>NSMakeRange</code> åº”è¯¥è¢«å‘½åæˆ <code>NSRangeMake</code>ï¼Œå’Œ <code>CGRectMake</code> ä»¥åŠ <code>CGSizeMake</code> ç­‰ç­‰ç›¸ä»¿ã€‚åŒæ ·çš„ï¼Œ<code>NSEqualRanges</code> æ›´å¥½çš„åå­—åº”è¯¥æ˜¯ <code>NSRangeEqualToRange</code>ï¼Œå°±åƒ <code>CGPointEqualToPoint</code>ã€‚</p><p>å°½ç®¡å†…éƒ¨çš„ä¸€è‡´æ€§é—®é¢˜ä¼¼ä¹ä¸å€¼å¾—æˆ‘ä»¬èŠ±è´¹æ—¶é—´ç²¾åŠ›å»æ›¿æ¢æ‰å·²æœ‰çš„ç”¨æ³•ï¼Œ<a href=https://gist.github.com/mattt/8402537>è¿™ä¸ª gist</a> å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºè‡ªå·±çš„ä¸€å¥—å¯¹å¼ºè¿«ç—‡æ›´å‹å¥½çš„ä»£ç åŸºç¡€ã€‚</p></blockquote><h3 id=åˆ›å»º-nsrange>åˆ›å»º NSRange</h3><blockquote><ul><li><code>NSMakeRange</code>: æ ¹æ®æŒ‡å®šçš„å€¼åˆ›å»ºä¸€ä¸ªæ–°çš„ NSRangeã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSArray <span style=color:#f92672>*</span>array <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span><span style=color:#ae81ff>@1</span>, <span style=color:#ae81ff>@2</span>, <span style=color:#ae81ff>@3</span><span style=color:#ae81ff>]</span>;
</span></span><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, [array count]);
</span></span><span style=display:flex><span><span style=color:#75715e>// {.location=0, .length=3}
</span></span></span></code></pre></div><h3 id=æŸ¥è¯¢ä¿¡æ¯>æŸ¥è¯¢ä¿¡æ¯</h3><blockquote><ul><li><code>NSEqualRanges</code>: è¿”å›ä¸€ä¸ªæŒ‡ç¤ºç»™å‡ºçš„ä¸¤ä¸ªèŒƒå›´æ˜¯å¦ç›¸ç­‰çš„å¸ƒå°”å€¼ã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range1 <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>6</span>);
</span></span><span style=display:flex><span>NSRange range2 <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>7</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>BOOL</span> equal <span style=color:#f92672>=</span> NSEqualRanges(range1, range2); <span style=color:#75715e>// NO
</span></span></span></code></pre></div><blockquote><ul><li><code>NSLocationInRange</code>: è¿”å›ä¸€ä¸ªæŒ‡ç¤ºç»™å®šçš„ä½ç½®æ˜¯å¦å­˜åœ¨äºç»™å®šçš„èŒƒå›´çš„å¸ƒå°”å€¼ã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>BOOL</span> contained <span style=color:#f92672>=</span> NSLocationInRange(<span style=color:#ae81ff>5</span>, range); <span style=color:#75715e>// YES
</span></span></span></code></pre></div><blockquote><ul><li><code>NSMaxRange</code>: è¿”å›èŒƒå›´çš„ä½ç½®å’Œé•¿åº¦çš„å’Œã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>NSUInteger max <span style=color:#f92672>=</span> NSMaxRange(range); <span style=color:#75715e>// 7
</span></span></span></code></pre></div><h3 id=é›†åˆæ“ä½œ>é›†åˆæ“ä½œ</h3><blockquote><ul><li><code>NSIntersectionRange</code>: è¿”å›ç»™å®šèŒƒå›´çš„äº¤é›†ã€‚å¦‚æœè¿”å›çš„èŒƒå›´é•¿åº¦å­—æ®µä¸º <code>0</code>ï¼Œåˆ™ä¸¤ä¸ªç»™å®šçš„èŒƒå›´å€¼æ²¡æœ‰äº¤é›†ã€‚ä½ç½®å­—æ®µçš„å€¼æ˜¯æœªå®šä¹‰çš„ã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range1 <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>6</span>);
</span></span><span style=display:flex><span>NSRange range2 <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>7</span>);
</span></span><span style=display:flex><span>NSRange intersectionRange <span style=color:#f92672>=</span> NSIntersectionRange(range1, range2);
</span></span><span style=display:flex><span><span style=color:#75715e>// {.location=2, .length=4}
</span></span></span></code></pre></div><blockquote><ul><li><code>NSUnionRange</code>: è¿”å›ç»™å®šèŒƒå›´çš„å¹¶é›†ï¼Œå³ä¸€ä¸ªåŒ…å« range1 å’Œ range2 å½“ä¸­å’Œå®ƒä»¬ä¹‹é—´çš„å€¼çš„ rangeã€‚å¦‚æœä¸€ä¸ªèŒƒå›´è¢«å®Œå…¨åŒ…å«åœ¨å¦ä¸€ä¸ªä¹‹å†…ï¼Œè¿”å›å€¼æ˜¯è¾ƒå¤§çš„é‚£ä¸€ä¸ªã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range1 <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>6</span>);
</span></span><span style=display:flex><span>NSRange range2 <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>7</span>);
</span></span><span style=display:flex><span>NSRange unionRange <span style=color:#f92672>=</span> NSUnionRange(range1, range2);
</span></span><span style=display:flex><span><span style=color:#75715e>// {.location=0, .length=9}
</span></span></span></code></pre></div><h3 id=nsstring--å’Œ-nsrange-äº’ç›¸è½¬æ¢>NSString * å’Œ NSRange äº’ç›¸è½¬æ¢</h3><blockquote><ul><li><code>NSStringFromRange</code>: è¿”å›ä¸€ä¸ªèŒƒå›´çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>NSString <span style=color:#f92672>*</span>string <span style=color:#f92672>=</span> NSStringFromRange(range); <span style=color:#75715e>// @&#34;{3,4}&#34;
</span></span></span></code></pre></div><blockquote><ul><li><code>NSRangeFromString</code>: è¿”å›ä»æ–‡å­—è¡¨ç¤ºä¸­å¾—åˆ°çš„ä¸€ä¸ªèŒƒå›´.</li></ul></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>string <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;{1,5}&#34;</span>;
</span></span><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSRangeFromString(string);
</span></span><span style=display:flex><span><span style=color:#75715e>// {.location=1, .length=5}
</span></span></span></code></pre></div><p>å¦‚æœä¼ å…¥ <code>NSRangeFromString</code> å½“ä¸­çš„å­—ç¬¦ä¸²ä¸èƒ½è¡¨ç¤ºä¸€ä¸ªæœ‰æ•ˆçš„èŒƒå›´ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªä½ç½®å’Œé•¿åº¦éƒ½è®¾ä¸º <code>0</code> çš„ç»“æœã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSString <span style=color:#f92672>*</span>string <span style=color:#f92672>=</span> <span style=color:#e6db74>@&#34;invalid&#34;</span>;
</span></span><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSRangeFromString(string);
</span></span><span style=display:flex><span><span style=color:#75715e>// {.location=0, .length=0}
</span></span></span></code></pre></div><p>å¯èƒ½æœ‰äººä¼šæƒ³é€šè¿‡ <code>NSStringFromRange</code> æ¥å¯¹ <code>NSRange</code> ç±»å‹è¿›è¡Œè£…ç®±ï¼Œä½¿å…¶å¯ä»¥ç”¨äº <code>NSArray</code> å½“ä¸­ï¼Œæ­£ç¡®çš„æ–¹æ³•åº”è¯¥æ˜¯ <code>NSValue +valueWithRange:</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSRange range <span style=color:#f92672>=</span> NSMakeRange(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>NSValue <span style=color:#f92672>*</span>value <span style=color:#f92672>=</span> [NSValue valueWithRange:range];
</span></span></code></pre></div><hr><p><code>NSRange</code> æ˜¯æå°‘æ•°çš„éƒ¨åˆ†åº•å±‚å®ç°å†…è”æš´éœ²åœ¨å…¬å…±å¤´æ–‡ä»¶ä¸­çš„ç±»å‹ä¹‹ä¸€ã€‚</p><h4 id=foundationnsrangeh>Foundation/NSRange.h</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NS_INLINE NSRange <span style=color:#a6e22e>NSMakeRange</span>(NSUInteger loc, NSUInteger len) {
</span></span><span style=display:flex><span>    NSRange r;
</span></span><span style=display:flex><span>    r.location <span style=color:#f92672>=</span> loc;
</span></span><span style=display:flex><span>    r.length <span style=color:#f92672>=</span> len;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> r;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_INLINE NSUInteger <span style=color:#a6e22e>NSMaxRange</span>(NSRange range) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (range.location <span style=color:#f92672>+</span> range.length);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_INLINE <span style=color:#66d9ef>BOOL</span> <span style=color:#a6e22e>NSLocationInRange</span>(NSUInteger loc, NSRange range) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (<span style=color:#f92672>!</span>(loc <span style=color:#f92672>&lt;</span> range.location) <span style=color:#f92672>&amp;&amp;</span> (loc <span style=color:#f92672>-</span> range.location) <span style=color:#f92672>&lt;</span> range.length) <span style=color:#f92672>?</span> YES <span style=color:#f92672>:</span> NO;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_INLINE <span style=color:#66d9ef>BOOL</span> <span style=color:#a6e22e>NSEqualRanges</span>(NSRange range1, NSRange range2) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> (range1.location <span style=color:#f92672>==</span> range2.location <span style=color:#f92672>&amp;&amp;</span> range1.length <span style=color:#f92672>==</span> range2.length);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=nsrangepointer>NSRangePointer</h2><p>å…³äº <code>NSRange</code> è¿˜æœ‰ä¸€ä¸ªè¯¡å¼‚çš„éƒ¨åˆ†å€¼å¾—ä¸€æï¼Œå°±æ˜¯ <code>NSRangePointer</code>ã€‚â€œç¥é©¬ï¼Ÿâ€ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—ææ…Œå’Œå›°æƒ‘ã€‚è·³è½¬åˆ°æºç ä¹‹åï¼Œè¯å®äº†æˆ‘ä»¬æœ€æ·±å±‚çš„ææƒ§ï¼š</p><h4 id=foundationnsrangeh-1>Foundation/NSRange.h</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>typedef</span> NSRange <span style=color:#f92672>*</span>NSRangePointer;
</span></span></code></pre></div><p>æ‰€ä»¥ï¼Œåœ¨æ²¡æœ‰ç¡®å®šæ¥æºçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªèƒ½å¤§èƒ†çŒœæµ‹ï¼Œè¿™ä¸ªç±»å‹æ˜¯ä¸€ä¸ªå¿ƒå­˜å¥½æ„çš„æ¡†æ¶å·¥ç¨‹å¸ˆæ·»åŠ çš„ï¼Œä»–æ³¨æ„åˆ°äº†ç”±äº <code>NSRange</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“è€Œä¸æ˜¯ç±»å¯¼è‡´çš„æ··ä¹±ã€‚<code>NSRange *</code> å’Œ <code>NSRangePointer</code> æ˜¯ä¸€æ ·çš„ï¼Œç„¶è€Œåè€…å¯ä»¥åœ¨ Foundation æ¡†æ¶ä¸­çš„å¾ˆå¤šåœ°æ–¹çœ‹åˆ°ï¼Œä½œä¸ºå„ç§æ–¹æ³•çš„è¾“å‡ºå‚æ•°ã€‚ä¾‹å¦‚ <code>NSAttributedString</code> ä½¿ç”¨ <code>NSRangePointer</code> æ¥è¿”å›åœ¨ä»æŸä¸ªç‰¹å®šç´¢å¼•å¤„å¼€å§‹ä¸€ä¸ªå±æ€§çš„å®é™…æœ‰æ•ˆèŒƒå›´ï¼ˆå› ä¸ºå±æ€§æœ‰æ•ˆçš„èŒƒå›´èµ·ç‚¹å’Œç»ˆç‚¹æœ‰å¯èƒ½åœ¨æŒ‡å®šçš„ç´¢å¼•ä»¥å¤–ï¼‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSMutableAttributedString <span style=color:#f92672>*</span>mutableAttributedString <span style=color:#f92672>=</span> ...;
</span></span><span style=display:flex><span>NSRange range;
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ([mutableAttributedString attribute:NSUnderlineStyleAttributeName
</span></span><span style=display:flex><span>                               atIndex:<span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>                        effectiveRange:<span style=color:#f92672>&amp;</span>range])
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Make underlined text blue as well
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    [mutableAttributedString addAttribute:NSForegroundColorAttributeName
</span></span><span style=display:flex><span>                                    value:[UIColor blueColor]
</span></span><span style=display:flex><span>                                    range:range];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=cfrange>CFRange</h2><p>æœ€åä¸€ä¸ªè¯´æ˜ï¼šCore Foundation æ¡†æ¶åŒæ ·å®šä¹‰äº†ä¸€ä¸ª <code>CFRange</code> ç±»å‹ï¼Œå’Œ <code>NSRange</code>ä¸åŒçš„æ˜¯ï¼Œå®ƒçš„æˆå‘˜ä½¿ç”¨ <code>CFIndex</code> ç±»å‹ï¼ŒåŒæ—¶åªæœ‰ä¸€ä¸ªå‡½æ•° <code>CFRangeMake</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    CFIndex location;
</span></span><span style=display:flex><span>    CFIndex length;
</span></span><span style=display:flex><span>} CFRange;
</span></span></code></pre></div><p>å½“å’Œ CoreText æˆ–è€…å…¶ä»–åº•å±‚ C API äº¤äº’çš„æ—¶å€™ï¼Œæ›´æœ‰å¯èƒ½ç¢°åˆ° <code>CFRange</code> è€Œä¸æ˜¯ <code>NSRange</code>ã€‚</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2014-01-13 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>