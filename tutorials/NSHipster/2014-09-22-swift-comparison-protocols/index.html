<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>Swift Comparison Protocols</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="Swift Comparison Protocols,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="Swift Comparison Protocols,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>Swift Comparison Protocols</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Croath Liu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>Objective-C è®©æˆ‘ä»¬å¯¹ç›¸ç­‰æ€§å’Œå”¯ä¸€æ€§çš„æœ¬è´¨æ…¢æ…¢æœ‰äº†<a href=https://nshipster.com/equality/>å¸¦æœ‰å“²å­¦è‰²å½©çš„æ€è€ƒ</a>ã€‚ä¸ºäº†è§£æ•‘é‚£äº›ä¸æ„¿æ„å‘è®ºæ–‡ä¸€æ ·çš„å“²ç†å‘èº«å±ˆè†çš„å¼€å‘è€…ï¼ŒSwift ä¸ºæ­¤ä½œå‡ºäº†å¾ˆå¤šæ”¹è¿›ã€‚</p><p>åœ¨ Swift ä¸­ï¼Œ<code>Equatable</code> æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œç”±æ­¤ä¹Ÿæ¼”å˜å‡ºäº† <code>Comparable</code> å’Œ <code>Hashable</code> ä¸¤ç§ç±»å‹ã€‚è¿™ä¸‰ä¸ªä¸€èµ·ç»„æˆäº†è¿™é—¨è¯­è¨€å…³äºå¯¹è±¡æ¯”è¾ƒçš„æ ¸å¿ƒå…ƒç´ ã€‚</p><hr><h2 id=equatable>Equatable</h2><p><code>Equatable</code> ç±»å‹çš„å€¼å¯ä»¥ç”¨äºåˆ¤å®šæ˜¯å¦ç›¸ç­‰ã€‚å£°æ˜ä¸€ä¸ª <code>Equatable</code> ç±»å‹æœ‰å¾ˆå¤šå¥½å¤„ï¼Œå°¤å…¶æ˜¯éœ€è¦æ¯”è¾ƒçš„å€¼è¢«æ”¾è¿›äº†ä¸€ä¸ª <code>Array</code> çš„æ—¶å€™ã€‚</p><p>è¦æˆä¸ºä¸€ä¸ª <code>Equatable</code> ç±»å‹ï¼Œå¿…é¡»å®ç° <code>==</code> æ“ä½œç¬¦å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åŒæ—¶è¦æ¥å—å…¶ç›¸åº”ç±»å‹çš„å€¼ä½œä¸ºå‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>func</span> ==(lhs: <span style=color:#66d9ef>Self</span>, rhs: <span style=color:#66d9ef>Self</span>) -&gt; Bool
</span></span></code></pre></div><p>å¯¹äºå¸¦æœ‰å¤šç±»å‹çš„ç›¸ç­‰ï¼Œæ˜¯æ ¹æ®æ¯ä¸ªç±»å‹çš„å…ƒç´ æ˜¯å¦ç›¸ç­‰æ¥åˆ¤å®šçš„ã€‚ä¾‹å¦‚æœ‰ä¸€ä¸ª <code>Complex</code> ç±»å‹ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªéµä» <code>SignedNumberType</code> ç±»å‹çš„ <code>T</code> ç±»å‹ï¼š</p><blockquote><p>ä½¿ç”¨ <code>SignedNumberType</code> ä½œä¸ºåŸºæœ¬æ•°å­—ç±»å‹ä¾¿æ·æ“ä½œæ–¹æ³•ï¼Œå®ƒç»§æ‰¿äº <code>Comparable</code>ï¼ˆä¹Ÿæ˜¯ä¸€ç§ <code>Equatable</code>ï¼Œä¸‹é¢çš„ç« èŠ‚ä¼šæåˆ°ï¼‰å’Œ <code>IntegerLiteralConvertible</code>ã€‚<code>Int</code>ã€<code>Double</code> å’Œ <code>Float</code> éƒ½éµä»è¿™ä¸ªè§„åˆ™ã€‚</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Complex</span>&lt;T: SignedNumberType&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> real: T
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> imaginary: T
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å› ä¸º <a href=https://en.wikipedia.org/wiki/Complex_number>å¤æ•°ï¼ˆcomplex numberï¼‰</a> ç”±å®éƒ¨å’Œè™šéƒ¨ç»„æˆï¼Œå½“ä¸”ä»…å½“ä¸¤ä¸ªå¤æ•°çš„ä¸¤éƒ¨åˆ†å‡ç›¸ç­‰æ—¶æ‰èƒ½è¯´è¿™ä¸¤ä¸ªå¤æ•°ç›¸ç­‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Complex</span>: Equatable {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Equatable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> ==&lt;T&gt;(lhs: Complex&lt;T&gt;, rhs: Complex&lt;T&gt;) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> lhs.real == rhs.real <span style=color:#f92672>&amp;&amp;</span> lhs.imaginary == rhs.imaginary
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ç»“æœï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> a = Complex&lt;Double&gt;(real: <span style=color:#ae81ff>1.0</span>, imaginary: <span style=color:#ae81ff>2.0</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b = Complex&lt;Double&gt;(real: <span style=color:#ae81ff>1.0</span>, imaginary: <span style=color:#ae81ff>2.0</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>a == b <span style=color:#75715e>// true</span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>!=</span> b <span style=color:#75715e>// false</span>
</span></span></code></pre></div><blockquote><p>æˆ‘ä»¬åœ¨ <a href=https://nshipster.com/swift-default-protocol-implementations/>the article about Swift Default Protocol Implementations</a> æåˆ°è¿‡ï¼Œå¯¹äº <code>!=</code> çš„å®ç°ä¼šè¢«æ ‡å‡†åº“è‡ªåŠ¨è½¬å‘åˆ°å¯¹äº <code>==</code> çš„å®ç°æ–¹æ³•ä¸Šã€‚</p></blockquote><p>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œç›¸ç­‰è¦é€šè¿‡å”¯ä¸€å†…å­˜æŒ‡å‘æ¥åˆ¤æ–­ã€‚äºæ˜¯ä¸–ç•Œå°±æ›´ç§‘å­¦äº†ï¼šä¸¤ä¸ªä¸€æ ·çš„ <code>Name</code> æ˜¯ç›¸ç­‰çš„ï¼Œä½†æ‹¥æœ‰ç›¸åŒåå­—çš„ä¸¤ä¸ª <code>Person</code> å¯èƒ½æ˜¯ä¸¤ä¸ªäººã€‚</p><p>Objective-C ä¸­å¯¹äºå¯¹è±¡çš„æ¯”è¾ƒï¼Œ<code>==</code> æ“ä½œç¬¦çš„è¿ç®—ç»“æœå°±æ˜¯æ¥è‡ª <code>isEqual:</code> æ–¹æ³•çš„ç»“æœï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ObjCObject</span>: NSObject {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ObjCObject() == ObjCObject() <span style=color:#75715e>// false</span>
</span></span></code></pre></div><p>å¯¹äº Swift ä¸­çš„å¼•ç”¨ç±»å‹ï¼Œå¯ä»¥æ ¹æ® <code>ObjectIdentifier</code> æ„å»ºå¯¹è±¡æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Object</span>: Equatable {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Equatable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> ==(lhs: Object, rhs: Object) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ObjectIdentifier(lhs) == ObjectIdentifier(rhs)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Object() == Object() <span style=color:#75715e>// false</span>
</span></span></code></pre></div><h2 id=comparable>Comparable</h2><p>åœ¨ <code>Equatable</code> åŸºç¡€ä¸Šå»ºç«‹çš„ <code>Comparable</code> æä¾›äº†æ›´å…·ä½“çš„ä¸ç­‰æ¡ä»¶ï¼Œèƒ½å¤Ÿåˆ¤æ–­å·¦è¾¹çš„å€¼æ˜¯æ¯”å³è¾¹å¤§è¿˜æ˜¯æ¯”å³è¾¹å°ã€‚</p><p>éµå¾ª <code>Comparable</code> åè®®çš„ç±»å‹åº”è¯¥å®ç°ä»¥ä¸‹å‡ ç§æ“ä½œç¬¦ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#f92672>&lt;=</span>(lhs: <span style=color:#66d9ef>Self</span>, rhs: <span style=color:#66d9ef>Self</span>) -&gt; Bool
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#f92672>&gt;</span>(lhs: <span style=color:#66d9ef>Self</span>, rhs: <span style=color:#66d9ef>Self</span>) -&gt; Bool
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#f92672>&gt;=</span>(lhs: <span style=color:#66d9ef>Self</span>, rhs: <span style=color:#66d9ef>Self</span>) -&gt; Bool
</span></span></code></pre></div><p>è¿™é‡Œæœ‰ä¸€ä»¶æœ‰è¶£çš„äº‹ï¼šæˆ‘ä»¬æš‚æ—¶ä¸çœ‹_æä¾›_äº†ä»€ä¹ˆæ–¹æ³•ï¼Œæ‰¾æ‰¾ä»€ä¹ˆæ–¹æ³•_ä¸è§_äº†ï¼Ÿ</p><p>é¦–å…ˆæœ€èƒ½å¼•èµ·æ³¨æ„çš„å°±æ˜¯ <code>==</code> ä¸è§äº†ï¼Œå› ä¸º <code>>=</code> æ˜¯ <code>></code> å’Œ <code>==</code> çš„ç»„åˆã€‚å› ä¸º <code>Comparable</code> ç»§æ‰¿è‡ª <code>Equatable</code>ï¼Œæ‰€ä»¥å®ƒä¹Ÿåº”è¯¥æä¾› <code>==</code> æ–¹æ³•ã€‚</p><p>å…¶æ¬¡ï¼Œå¦‚æœä»”ç»†è§‚å¯Ÿä¼šå‘ç°ä¸€ä¸ªç»†èŠ‚ï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯ç†è§£å…¶æœ¬è´¨çš„å…³é”®ç‚¹ï¼š<code>&lt;</code> ä¹Ÿä¸è§äº†ã€‚â€œå°äºâ€ æ–¹æ³•å»å“ªäº†ï¼Ÿå…¶å®å®ƒåœ¨ <code>_Comparable</code> åè®®ä¸­ã€‚ä¸ºä»€ä¹ˆçŸ¥é“è¿™ä¸€ç‚¹å¾ˆé‡è¦å‘¢ï¼Ÿåƒæˆ‘ä»¬åœ¨ <a href=https://nshipster.com/swift-default-protocol-implementations/>the article about Swift Default Protocol Implementations</a> ä¸­æåˆ°çš„ï¼ŒSwift æ ‡å‡†åº“æä¾›äº†å®Œå…¨åŸºäº <code>_Comparable</code> çš„ <code>Comparable</code> åè®®ã€‚è¿™ä¸ªè®¾è®¡_ç®€ç›´å®Œç¾_ã€‚å› ä¸ºæ‰€æœ‰çš„æ¯”è¾ƒæ–¹æ³•éƒ½å¯ä»¥ä»…ç”± <code>&lt;</code> å’Œ <code>==</code> æ¨è®ºå‡ºï¼Œè¿™å°±è®©å®ç”¨æ€§å¤§å¤§å¢åŠ äº†ã€‚</p><blockquote><p>ä¸æ­¤ä¸åŒçš„æ˜¯ Ruby ä¸­æ¯”è¾ƒæ“ä½œç¬¦çš„å®ç°æ–¹æ³•ï¼Œå®ƒä»…ç”±ä¸€ä¸ª <code>&lt;=></code> ï¼ˆä¹Ÿå« â€œUFO æ“ä½œç¬¦â€ï¼‰æ“ä½œç¬¦æ¥åšåˆ¤æ–­ã€‚<a href=https://gist.github.com/mattt/7e4db72ce1b6c8a18bb4>è¿™é‡Œæœ‰å†™æ˜ Swift å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„</a>ã€‚</p></blockquote><p>æ›´å¤æ‚çš„æ ·ä¾‹å¯ä»¥è§ <code>CSSSelector</code> ç»“æ„ï¼Œå®ƒå®ç°äº† selector çš„ <a href=http://www.w3.org/TR/CSS2/cascade.html#cascading-order>cascade ordering</a>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Foundation</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>CSSSelector</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> selector: String
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Specificity</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> id: Int
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> `<span style=color:#66d9ef>class</span>`: Int
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> element: Int
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>init</span>(<span style=color:#66d9ef>_</span> components: [String]) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> (id, `<span style=color:#66d9ef>class</span>`, element) = (<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> token <span style=color:#66d9ef>in</span> components {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> token.hasPrefix(<span style=color:#e6db74>&#34;#&#34;</span>) {
</span></span><span style=display:flex><span>                    id<span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> token.hasPrefix(<span style=color:#e6db74>&#34;.&#34;</span>) {
</span></span><span style=display:flex><span>                    `<span style=color:#66d9ef>class</span>`<span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    element<span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>self</span>.id = id
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>self</span>.`<span style=color:#66d9ef>class</span>` = `<span style=color:#66d9ef>class</span>`
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>self</span>.element = element
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> specificity: Specificity
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>init</span>(<span style=color:#66d9ef>_</span> string: String) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.selector = string
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// NaÃ¯ve tokenization, ignoring operators, pseudo-selectors, and `style=`.</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> components: [String] = <span style=color:#66d9ef>self</span>.selector.componentsSeparatedByCharactersInSet(NSCharacterSet.whitespaceCharacterSet())
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.specificity = Specificity(components)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬çŸ¥é“ CSS Selector æ˜¯é€šè¿‡è¯„åˆ†å’Œé¡ºåºæ¥åˆ¤æ–­ç›¸ç­‰çš„ï¼Œä¸¤ä¸ª selector å½“ä¸”ä»…å½“å®ƒä»¬çš„è¯„åˆ†å’Œé¡ºåºéƒ½ç›¸åŒæ—¶æ‰æŒ‡å‘ç›¸åŒå…ƒç´ ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>CSSSelector</span>: Equatable {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Equatable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> ==(lhs: CSSSelector, rhs: CSSSelector) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// NaÃ¯ve equality that uses string comparison rather than resolving equivalent selectors</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> lhs.selector == rhs.selector
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æŠ›å¼€è¿™ç§æ–¹æ³•ï¼Œselector æ˜¯é€šè¿‡ specificity æ¥ç¡®å®šç›¸ç­‰æ€§çš„ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>CSSSelector</span>.Specificity: Comparable {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Comparable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#f92672>&lt;</span>(lhs: CSSSelector.Specificity, rhs: CSSSelector.Specificity) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> lhs.id <span style=color:#f92672>&lt;</span> rhs.id <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>        lhs.`<span style=color:#66d9ef>class</span>` <span style=color:#f92672>&lt;</span> rhs.`<span style=color:#66d9ef>class</span>` <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>        lhs.element <span style=color:#f92672>&lt;</span> rhs.element
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Equatable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> ==(lhs: CSSSelector.Specificity, rhs: CSSSelector.Specificity) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> lhs.id == rhs.id <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>           lhs.`<span style=color:#66d9ef>class</span>` == rhs.`<span style=color:#66d9ef>class</span>` <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>           lhs.element == rhs.element
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æŠŠè¿™äº›éƒ½ç»“åˆåœ¨ä¸€èµ·ï¼š</p><blockquote><p>ä¸ºäº†ç†è§£çš„æ›´ä¸ºæ¸…æ¥šï¼Œæˆ‘ä»¬è¿™é‡Œè®¤ä¸º <code>CSSSelector</code> <a href=https://nshipster.com/swift-literal-convertible/>éµä» <code>StringLiteralConvertible</code> åè®®</a>.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> a: CSSSelector = <span style=color:#e6db74>&#34;#logo&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b: CSSSelector = <span style=color:#e6db74>&#34;html body #logo&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> c: CSSSelector = <span style=color:#e6db74>&#34;body div #logo&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> d: CSSSelector = <span style=color:#e6db74>&#34;.container #logo&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>b == c <span style=color:#75715e>// false</span>
</span></span><span style=display:flex><span>b.specificity == c.specificity <span style=color:#75715e>// true</span>
</span></span><span style=display:flex><span>c.specificity <span style=color:#f92672>&lt;</span> a.specificity <span style=color:#75715e>// false</span>
</span></span><span style=display:flex><span>d.specificity <span style=color:#f92672>&gt;</span> c.specificity <span style=color:#75715e>// true</span>
</span></span></code></pre></div><h2 id=hashable>Hashable</h2><p>å¦ä¸€ä¸ªé‡è¦çš„åè®®æ˜¯ä» <code>Equatable</code> æ¼”å˜è€Œæ¥çš„ <code>Hashable</code>ã€‚</p><p>åªæœ‰ <code>Hashable</code> ç±»å‹å¯ä»¥è¢«å­˜å‚¨åœ¨ Swift çš„ <code>Dictionary</code> ä¸­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Dictionary</span>&lt;Key : Hashable, Value&gt; : CollectionType, DictionaryLiteralConvertible { ... }
</span></span></code></pre></div><p>ä¸€ä¸ªéµä» <code>Hashable</code> åè®®çš„ç±»å‹å¿…é¡»æä¾› <code>hashValue</code> å±æ€§çš„ getterã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>protocol</span> <span style=color:#a6e22e>Hashable</span> : Equatable {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/// Returns the hash value.  The hash value is not guaranteed to be stable</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/// across different invocations of the same program.  Do not persist the hash</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/// value across program runs.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>///</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/// The value of `hashValue` property must be consistent with the equality</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/// comparison: if two values compare equal, they must have equal hash</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/// values.</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> hashValue: Int { <span style=color:#66d9ef>get</span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™é‡Œå¦‚æœè¯¦è§£<a href=https://en.wikipedia.org/wiki/Perfect_hash_function>æœ€ä½³å“ˆå¸Œæ–¹æ³•</a> å°±è¿œè¿œè·‘é¢˜äº†ï¼Œä½†è¿˜å¥½æˆ‘ä»¬ä¸ç”¨æåŠè¿™ä¸ªï¼Œå› ä¸ºå¤§å¤šæ•°å€¼éƒ½å¯ä»¥é€šè¿‡ <code>XOR</code> è¿ç®—æ¥ç”Ÿæˆæ¯”è¾ƒå¥½çš„å“ˆå¸Œå€¼äº†ã€‚</p><p>ä¸‹é¢è¿™äº› Swift å†…å»ºç±»å‹éƒ½å®ç°äº† <code>hashValue</code>ï¼š</p><ul><li><code>Double</code></li><li><code>Float</code>, <code>Float80</code></li><li><code>Int</code>, <code>Int8</code>, <code>Int16</code>, <code>Int32</code>, <code>Int64</code></li><li><code>UInt</code>, <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, <code>UInt64</code></li><li><code>String</code></li><li><code>UnicodeScalar</code></li><li><code>ObjectIdentifier</code></li></ul><p>æ®æ­¤ä¹Ÿèƒ½æ€»ç»“å‡º<a href=https://en.wikipedia.org/wiki/Binomial_nomenclature>ç”Ÿç‰©å­¦ä¸­çš„äºŒé¡¹å¼æ˜æ˜æ–¹æ³•</a>çš„è¡¨ç¤ºæ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Binomen</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> genus: String
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> species: String
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Hashable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extension</span> <span style=color:#a6e22e>Binomen</span>: Hashable {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> hashValue: Int {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> genus.hashValue <span style=color:#f92672>^</span> species.hashValue
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> Equatable</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> ==(lhs: Binomen, rhs: Binomen) -&gt; Bool {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> lhs.genus == rhs.genus <span style=color:#f92672>&amp;&amp;</span> lhs.species == rhs.species
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™æ ·å°±èƒ½å¯¹æŸä¸ªç”Ÿç‰©ç±»å‹å»åšå“ˆå¸Œï¼Œè¿›è€Œå¯ä»¥æŠŠä»–ä»¬ä½œä¸ºå…¶æ‹‰ä¸å‘½åçš„ key äº†ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> commonNames: [Binomen: String] = [:]
</span></span><span style=display:flex><span>commonNames[Binomen(genus: <span style=color:#e6db74>&#34;Canis&#34;</span>, species: <span style=color:#e6db74>&#34;lupis&#34;</span>)] = <span style=color:#e6db74>&#34;Grey Wolf&#34;</span>
</span></span><span style=display:flex><span>commonNames[Binomen(genus: <span style=color:#e6db74>&#34;Canis&#34;</span>, species: <span style=color:#e6db74>&#34;rufus&#34;</span>)] = <span style=color:#e6db74>&#34;Red Wolf&#34;</span>
</span></span><span style=display:flex><span>commonNames[Binomen(genus: <span style=color:#e6db74>&#34;Canis&#34;</span>, species: <span style=color:#e6db74>&#34;latrans&#34;</span>)] = <span style=color:#e6db74>&#34;Coyote&#34;</span>
</span></span><span style=display:flex><span>commonNames[Binomen(genus: <span style=color:#e6db74>&#34;Canis&#34;</span>, species: <span style=color:#e6db74>&#34;aureus&#34;</span>)] = <span style=color:#e6db74>&#34;Golden Jackal&#34;</span>
</span></span></code></pre></div><pre tabindex=0><code>
---



é™¤é&lt;a href=&#34;https://nshipster.cn/&#34; target=_blank&gt;å¦æœ‰å£°æ˜&lt;/a&gt;ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/3.0/cn/&#34; target=_blank&gt;ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†&lt;/a&gt;ã€è®¸å¯åè®®æˆæƒã€‚
</code></pre><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2014-09-22 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Swift target=_blank>Swift</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>