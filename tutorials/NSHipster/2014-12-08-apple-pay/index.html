<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>Apple Pay</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="Apple Pay,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="Apple Pay,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>Apple Pay</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Jack Flintermann</span> <span title="Translator Â· ç¿»è¯‘" class=author>Croath Liu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p><strong>æ³¨æ„ï¼šæˆªæ­¢ 2015 å¹´ 1 æœˆï¼ŒApple Pay ä»…åœ¨ç¾å›½å¯ç”¨ã€‚</strong></p><p>ä½ è¦åœ¨ç½‘ä¸Šä¹°ä¸œè¥¿çš„é‚£ä¸€åˆ»ä½ ä¼šå‘ç°æœ‰ä¸€ç§ç°ä»£åŒ–å¸¦æ¥çš„ç‹¬æœ‰çš„ç„¦è™‘æ„Ÿã€‚é‚£ç§æ„Ÿè§‰ä¸èƒ½ç”¨è¯­è¨€å½¢å®¹ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š&ldquo;æˆ‘çš„ä¿¡ç”¨å¡å»å“ªäº†ï¼Ÿå¡å·æ˜¯å¤šå°‘ï¼Ÿæˆ‘å¥½æƒ³ä¹°è¿™ä¸ªå•Šå¡å»å“ªäº†ï¼&rdquo;</p><p>å½“ä½ ç”¨ iOS è®¾å¤‡çš„æ—¶å€™ï¼Œè¿™ç§å›°éš¾åˆåŠ å‰§äº†ä¸€å±‚ï¼šå¾ˆæœ‰å¯èƒ½ä½ çš„å¡å¹¶ä¸åœ¨èº«è¾¹ï¼Œä¹Ÿæœ‰å¯èƒ½ä½ ä¼šä¸€æ‰‹æ‹¿ç€ä¿¡ç”¨å¡å¦ä¸€æ‰‹åŒæ—¶åœ¨æ‰‹æœºä¸Šè¾“å…¥ï¼Œè¿™æ ·çš„å£®ä¸¾æœ€å¥½è¿˜æ˜¯ç•™ç»™ä½“æ“è¿åŠ¨å‘˜å’Œå®‡èˆªå‘˜å§ã€‚ï¼ˆå¼€ä¸ªç©ç¬‘ï¼Œä½†æˆ‘æ‰“èµŒè‹¹æœåº”è¯¥åœ¨æŸä¸ªå®éªŒå®¤é‡Œé¢è¿™æ ·å®éªŒè¿‡äº†ã€‚ï¼‰</p><p>å¦‚æœä½ åˆšå¥½åœ¨å¼€å‘ä¸€æ¬¾èƒ½å¤Ÿæ¥å—ä¿¡ç”¨å¡ä»˜æ¬¾çš„åº”ç”¨ï¼Œè¿™ç§ä¸å¹¸çš„ç°è±¡ç›´æ¥ä¼šå¯¼è‡´ä½ æ”¶å…¥çš„å‡å°‘ã€‚</p><p><a href=https://apple.com/apple-pay>Apple Pay</a> æ”¹å˜äº†è¿™ä¸€åˆ‡ã€‚å¤§å¤šæ•°äººå¯èƒ½è¿˜åœ¨å…³æ³¨å®ƒå‘å¸ƒæ—¶æåˆ°çš„åœ¨å®ä½“åº—çš„åŠŸç”¨ï¼ˆæ¶ˆè´¹è€…å¯ä»¥ç”¨ iPhone NFC åŠŸèƒ½ä»˜æ¬¾ï¼‰ï¼Œä¸æ­¤åŒæ—¶è¿™ä¹Ÿä¸ºå¼€å‘è€…æå‡åœ¨åº”ç”¨å†…ä»˜æ¬¾ä½“éªŒçš„å·¨å¤§æœºä¼šã€‚</p><blockquote><p>æç¤ºï¼šå¦‚æœä½ åœ¨åº”ç”¨å†…å–ç”µå­åŒ–å•†å“æˆ–è™šæ‹Ÿè´§å¸ï¼Œé‚£ä¹ˆåº”è¯¥ç”¨åº”ç”¨å†…æ”¯ä»˜è€Œä¸æ˜¯ Apple Payã€‚(è¯·çœ‹ App Store Review Guidelines çš„è¿™ä¸€ç«  <a href=https://developer.apple.com/app-store/review/guidelines/#purchasing-currencies>section 11.2</a>)ã€‚Apple Pay å¯ä»¥ç”¨æ¥é”€å”®å®ä½“å•†å“å’ŒæœåŠ¡ã€‚</p></blockquote><hr><h2 id=è·å–ä¸€ä¸ª-apple-merchant-id>è·å–ä¸€ä¸ª Apple Merchant ID</h2><p>æµ‹è¯•æ”¯ä»˜ä¹‹å‰éœ€è¦æ³¨å†Œä¸€ä¸ª Apple Merchant IDã€‚è¿˜è¦å…ˆé€‰æ‹©ä¸€ä¸ªèƒ½å¤Ÿæ§åˆ¶ä¿¡ç”¨å¡æ”¯ä»˜æµç¨‹çš„æœåŠ¡æä¾›å•†ã€‚è‹¹æœæä¾›äº†ä¸€ä¸ªè¿™ç±»æä¾›å•†çš„æ¨èåˆ—è¡¨ï¼š<a href=https://developer.apple.com/apple-pay>Apple Pay Developer Page</a> (ä½œè€…è‡ªæ›å°±èŒäºè¿™ä¸ªæ¨èåˆ—è¡¨ä¸­çš„ <a href=https://stripe.com/>Stripe</a> å…¬å¸ï¼Œä½†æœ¬æ–‡æ¶‰åŠåˆ°çš„ä»£ç å’Œé€‰æ‹©ä»€ä¹ˆæœåŠ¡æä¾›å•†æ˜¯æ— å…³çš„)ã€‚ä½ çš„æœåŠ¡æä¾›å•†ä¼šç»™ä½ ä¸€ä»½ç‰¹åˆ«è¯´æ˜æŒ‡å¯¼å¦‚ä½•åœ¨ä»–ä»¬çš„å¹³å°ä¸Šä½¿ç”¨ Apple Pay æ¥æ”¯ä»˜ï¼Œæ•´ä¸ªæµç¨‹ç±»ä¼¼äºè¿™æ ·ï¼š</p><ul><li>å‰å¾€ Apple Developer Center <code>Certificates, Identifiers, and Profiles</code> éƒ¨åˆ† <a href=https://developer.apple.com/account/ios/identifiers/merchant/merchantCreate.action>åˆ›å»ºä¸€ä¸ª merchant ID</a>ã€‚</li><li>æ¥ä¸‹æ¥ï¼Œ<a href=https://developer.apple.com/account/ios/certificate/certificateCreate.action>å‰å¾€ Certificates éƒ¨åˆ†</a> æ–°å»ºä¸€ä¸ª Apple Pay Certificateã€‚è¿™æ­¥éœ€è¦ä¸Šä¼ ä¸€ä¸ª Certificate Signing Requestã€‚æ³¨å†ŒæœåŠ¡æä¾›å•†çš„æ—¶å€™ä»–ä»¬ä¼šç»™ä½ ä¸€ä¸ªå¯ç”¨çš„ CSR æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨è‡ªå·±ç”Ÿæˆçš„ CSR æ–‡ä»¶èµ°å®Œæ•´ä¸ªæµç¨‹ï¼Œä½†ä½ çš„æœåŠ¡æä¾›å•†ä¸èƒ½ç”¨ä½ ç”Ÿæˆçš„ CSR æ¥å®Œæˆæ”¯ä»˜çš„è§£è°œæµç¨‹ã€‚</li><li>åœ¨ Xcode é‡Œï¼Œåœ¨å·¥ç¨‹è®¾ç½®çš„ &ldquo;Capabilities&rdquo; éƒ¨åˆ†æ‰“å¼€ &ldquo;Apple Pay&rdquo;ã€‚è¿™æ­¥å¯èƒ½ä¼šè¦æ±‚ä½ é€‰æ‹©ä¹‹å‰åˆ›å»ºçš„ merchant IDã€‚</li></ul><h2 id=æ‹¿åˆ°ç¬¬ä¸€æ¡¶é‡‘>æ‹¿åˆ°ç¬¬ä¸€æ¡¶é‡‘</h2><blockquote><p>Apple Pay åªèƒ½åœ¨éƒ¨åˆ† iOS è®¾å¤‡ä¸Šå·¥ä½œ(åŒ…æ‹¬ iPhone6/6+ã€iPad Mini 3ã€iPad Air 2)ã€‚å¦å¤–ï¼Œæµ‹è¯•æ—¶éœ€è¦æ·»åŠ  Apple Pay entitlement(åœ¨â€œè·å–ä¸€ä¸ª Apple Merchant IDâ€ç« èŠ‚ä¸­æåˆ°è¿‡)ã€‚å¦‚æœæƒ³åœ¨æ¨¡æ‹Ÿå™¨ä¸­æµ‹è¯•ï¼Œå¯ä»¥ç”¨è¿™ä¸ªåº“æ¥æ¨¡æ‹Ÿæ”¯ä»˜åŠŸèƒ½(å¸¦æœ‰æµ‹è¯•ç”¨çš„ä¿¡ç”¨å¡ä¿¡æ¯) <a href=https://github.com/stripe/ApplePayStubs>https://github.com/stripe/ApplePayStubs</a> ã€‚</p></blockquote><p>ä¸€æ—¦æœ‰äº† merchant è´¦å·ï¼Œä½¿ç”¨ Apple Pay è¿›è¡Œæ”¶æ¬¾å°±è¿‘åœ¨å’«å°ºäº†ã€‚æ¥ä¸‹æ¥ï¼Œéœ€è¦å…ˆæ£€æŸ¥ç”¨æˆ·çš„è®¾å¤‡ååˆ†æ”¯æŒ Apple Pay ä»¥åŠç”¨æˆ·å¯ä½¿ç”¨çš„ä¿¡ç”¨å¡ç§ç±»ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> paymentNetworks = [PKPaymentNetworkAmex, PKPaymentNetworkMasterCard, PKPaymentNetworkVisa]
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> PKPaymentAuthorizationViewController.canMakePaymentsUsingNetworks(paymentNetworks) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ï£¿Pay is available!</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Show your own credit card form.</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å‡è®¾æ­¤æ—¶ Apple Pay æ˜¯å¯ä½¿ç”¨çŠ¶æ€ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ„å»ºä¸€ä¸ª <code>PKPaymentRequest</code>ã€‚è¿™æ˜¯ä¸€ä¸ªæè¿°ç”¨æˆ·æ‰£æ¬¾ä¿¡æ¯çš„å¯¹è±¡ã€‚å¦‚æœä»˜æ¬¾è¡Œä¸ºå‘ç”Ÿåœ¨ç¾å›½(å½“ç„¶ç›®å‰ Apple Pay ä»…åœ¨ç¾å›½å¯ç”¨)ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ä½ éœ€è¦é…ç½®çš„å¸¸é‡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> request = PKPaymentRequest()
</span></span><span style=display:flex><span>request.supportedNetworks = [PKPaymentNetworkAmex, PKPaymentNetworkMasterCard, PKPaymentNetworkVisa]
</span></span><span style=display:flex><span>request.countryCode = <span style=color:#e6db74>&#34;US&#34;</span>
</span></span><span style=display:flex><span>request.currencyCode = <span style=color:#e6db74>&#34;USD&#34;</span>
</span></span><span style=display:flex><span>request.merchantIdentifier = <span style=color:#e6db74>&#34;&lt;#Replace me with your Apple Merchant ID#&gt;&#34;</span>
</span></span><span style=display:flex><span>request.merchantCapabilities = .Capability3DS
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œç”¨ <code>paymentSummaryItems</code> å±æ€§æ¥æè¿°æ¶ˆè´¹è€…è´­ä¹°çš„å•†å“ã€‚è¿™ä¸ªå±æ€§å¯ä»¥æ¥å—ä¸€ä¸ª <code>PKPaymentSummaryItem</code> æ•°ç»„ï¼Œ<code>PKPaymentSummaryItem</code> æœ‰ <code>label</code> å’Œ <code>amount</code> ä¸¤ä¸ªå±æ€§ã€‚è¿™äº›å±æ€§å’Œæ”¶æ®(é©¬ä¸Šå°±èƒ½çœ‹åˆ°æ”¶æ®äº†)ä¸Šæ˜¾ç¤ºçš„æ¡ç›®ç›¸å…³ã€‚</p><p><img alt="Payment Authorization" src=/media/NSHipster/apple-pay-payment-authorization.png></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> wax = PKPaymentSummaryItem(label: <span style=color:#e6db74>&#34;Mustache Wax&#34;</span>, amount: NSDecimalNumber(string: <span style=color:#e6db74>&#34;10.00&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> discount = PKPaymentSummaryItem(label: <span style=color:#e6db74>&#34;Discount&#34;</span>, amount: NSDecimalNumber(string: <span style=color:#e6db74>&#34;-1.00&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> totalAmount = wax.amount.decimalNumberByAdding(discount.amount)
</span></span><span style=display:flex><span>                            .decimalNumberByAdding(shipping.amount)
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> total = PKPaymentSummaryItem(label: <span style=color:#e6db74>&#34;NSHipster&#34;</span>, amount: totalAmount)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>request.paymentSummaryItems = [wax, discount, shipping, total]
</span></span></code></pre></div><p>æ³¨æ„å¯ä»¥é€šè¿‡ç»™æ¡ç›®ä»·æ ¼èµ‹äºˆ 0 å€¼æˆ–è´Ÿå€¼æ¥ç»™æ¶ˆè´¹è€…å‘æ”¾ä¼˜æƒ æˆ–æç¤ºè¡¥å……ä¿¡æ¯ã€‚ç„¶è€Œä¸€ä¸ªæ”¶æ¬¾çš„æ€»é‡‘é¢å¿…é¡»å¤§äº 0ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ª <code>PKShippingMethod</code>(ç»§æ‰¿è‡ª <code>PKPaymentSummaryItem</code>)æ¥æè¿°æˆ‘ä»¬å‘è´§çš„å•†å“ã€‚ä¹‹åä¼šåŠ ä»¥è¯¦è¿°ã€‚</p><p>ç„¶åéœ€è¦å°†ä»˜æ¬¾å•å±•ç¤ºç»™æ¶ˆè´¹è€…ï¼Œé€šè¿‡ <code>PKPaymentRequest</code> åˆ›å»ºä¸€ä¸ª <code>PKPaymentAuthorizationViewController</code> ç„¶å present å‡ºæ¥ã€‚(å‡è®¾æœ¬æ ·ä¾‹ä¸­æ‰€æœ‰çš„ä»£ç éƒ½åœ¨ä¸€ä¸ªç½®äºä»˜æ¬¾é¡µé¢åé¢çš„ <code>UIViewController</code> ä¸­ç¼–å†™)ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> viewController = PKPaymentAuthorizationViewController(paymentRequest: request)
</span></span><span style=display:flex><span>viewController.delegate = <span style=color:#66d9ef>self</span>
</span></span><span style=display:flex><span>presentViewController(viewController, animated: <span style=color:#66d9ef>true</span>, completion: <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><p>å°æç¤ºï¼š</p><ul><li>è¿™ä¸ª View controller æ²¡æœ‰å æ»¡å±å¹• (è¿™æ—¶çœ‹åˆ°çš„è“è‰²èƒŒæ™¯æ˜¯æˆ‘ä»¬åº”ç”¨ä¸­çš„ä¸€éƒ¨åˆ†)ã€‚å¯ä»¥åœ¨ <code>PKPaymentAuthorizationViewController</code> å¯è§æ—¶éšæ—¶æ›´æ”¹èƒŒæ™¯è‰²ã€‚</li><li>æ‰€æœ‰çš„æ–‡å­—ä¿¡æ¯éƒ½æ˜¯è‡ªåŠ¨å¤§å†™çš„ã€‚</li><li>æœ€åæ¨ªçº¿ä¸‹çš„æ¡ç›®å’Œå…¶ä»–çš„æ˜¯åˆ†å¼€çš„ï¼Œè¿™é‡Œç”¨æ¥è¡¨ç¤ºæ€»é‡‘é¢ã€‚æ–‡å­—ä¼šè‡ªåŠ¨ä»¥ &ldquo;PAY&rdquo; å¼€å¤´ï¼Œæ‰€ä»¥è¿™é‡Œç”¨å…¬å¸åå­—ä½œä¸ºå…¶ <code>label</code> å±æ€§å¼€èµ·æ¥ä¼šæ¯”è¾ƒåˆç†ä¸€äº›ã€‚</li><li>æ•´å¥— UI æ˜¯é€šè¿‡ä¸€ä¸ª Remote View Controller present å‡ºæ¥çš„ã€‚è¿™æ„å‘³ç€é™¤äº†ä¼ å…¥çš„ <code>PKPaymentRequest</code> ä¹‹å¤–æ˜¯ä¸èƒ½ä¿®æ”¹è¿™ä¸ª view çš„å…¶ä»–å†…å®¹æˆ–æ ·å¼çš„ã€‚</li></ul><h2 id=pkpaymentauthorizationviewcontrollerdelegate>PKPaymentAuthorizationViewControllerDelegate</h2><p>ä¸ºäº†æ•è· <code>PKPaymentAuthorizationViewController</code> è¿”å›çš„ä»˜æ¬¾ä¿¡æ¯éœ€è¦å®ç° <code>PKPaymentAuthorizationViewControllerDelegate</code> æ¥å£ã€‚å®ƒæœ‰ä¸¤ä¸ªå¿…é¡»å®ç°çš„æ–¹æ³•ï¼š<code>-(void)paymentAuthorizationViewController:didAuthorizePayment:completion:</code> å’Œ <code>-(void)paymentAuthorizationViewControllerDidFinish:</code>ã€‚</p><p>ä¸ºäº†ä¾¿äºç†è§£è¿™äº›æ­¥éª¤éƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Apple Pay ä»˜æ¬¾çš„é¡ºåºæµç¨‹ï¼š</p><ul><li>å…ˆåƒå¦‚ä¸Šæ‰€è¿°æ˜¾ç¤ºä¸€ä¸ª <code>PKPaymentAuthorizationViewController</code>ã€‚</li><li>ç”¨æˆ·é€šè¿‡ Touch ID(å¦‚æœä¸‰æ¬¡å¤±è´¥ä¹‹åéœ€è¦é€šè¿‡å¯†ç æ¥éªŒè¯)æˆæƒæ”¯ä»˜ã€‚</li><li>æŒ‡çº¹å›¾æ¡ˆå˜æˆä¸€ä¸ªæ—‹è½¬çš„åŠ è½½å›¾æ¡ˆï¼Œå¹¶ä¸”æ˜¾ç¤º &ldquo;Processing&rdquo; å­—æ ·ã€‚</li><li>Delegate æ”¶åˆ° <code>paymentAuthorizationViewController:didAuthorizePayment:completion:</code> å›è°ƒã€‚</li><li>åº”ç”¨åŒæ­¥åœ°å’Œä»˜æ¬¾æœåŠ¡å•†ä»¥åŠç½‘ç«™åç«¯è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œæ ¹æ®ä»˜æ¬¾è¯¦æƒ…è¿›è¡Œæ‰£æ¬¾ã€‚å®Œæˆä¹‹åï¼Œä½ è¦æ ¹æ®ä»˜æ¬¾ç»“æœè°ƒç”¨ <code>completion</code> æ–¹æ³•å¹¶ä¼ å…¥ <code>PKPaymentAuthorizationStatus.Success</code> æˆ–è€… <code>PKPaymentAuthorizationStatus.Failure</code> å‚æ•°ã€‚</li><li><code>PKPaymentAuthorizationViewController</code> çš„åŠ è½½åŠ¨ç”»å˜æˆæˆåŠŸæˆ–è€…å¤±è´¥çš„å›¾æ¡ˆã€‚å¦‚æœä»˜æ¬¾æˆåŠŸäº†ï¼ŒPassBook ä¼šæ”¶åˆ°ä¸€ä¸ªé€šçŸ¥æ¥å¯¹ç”¨æˆ·çš„ä¿¡ç”¨å¡è¿›è¡Œæ‰£æ¬¾ã€‚</li><li>Delegate æ”¶åˆ° <code>paymentAuthorizationViewControllerDidFinish:</code> å›è°ƒï¼Œç„¶åå°±å¯ä»¥è°ƒç”¨ <code>dismissViewControllerAnimated:completion</code> æ–¹æ³•æ¥å…³é—­ä»˜æ¬¾é¡µé¢äº†ã€‚</li></ul><p><img alt="Status Indicator" src=/media/NSHipster/apple-pay-indicators.png></p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> - PKPaymentAuthorizationViewControllerDelegate</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>paymentAuthorizationViewController</span>(controller: PKPaymentAuthorizationViewController!, didAuthorizePayment payment: PKPayment!, completion: ((PKPaymentAuthorizationStatus) -&gt; Void)<span style=color:#f92672>!</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Use your payment processor&#39;s SDK to finish charging your customer.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// When this is done, call completion(PKPaymentAuthorizationStatus.Success)</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>paymentAuthorizationViewControllerDidFinish</span>(controller: PKPaymentAuthorizationViewController!) {
</span></span><span style=display:flex><span>    dismissViewControllerAnimated(<span style=color:#66d9ef>true</span>, completion: <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™é‡Œçš„ <code>processPayment:payment completion:</code> æ–¹æ³•æ˜¯åœ¨ä½ è‡ªå·±ä»£ç ä¸­ç¼–å†™çš„ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè®©æ‰£æ¬¾æœåŠ¡å•†çš„ SDK ç»“æŸæœ¬æ¬¡æ”¯ä»˜ã€‚</p><h2 id=åŠ¨æ€æ˜¾ç¤ºç‰©æµä¿¡æ¯å’Œä»·æ ¼>åŠ¨æ€æ˜¾ç¤ºç‰©æµä¿¡æ¯å’Œä»·æ ¼</h2><p>å¦‚æœç”¨æˆ·é€šè¿‡ Apple Pay è´­ä¹°äº†å®ä½“å•†å“ï¼Œä½ å¯èƒ½éœ€è¦éœ€è¦æä¾›ç»™ä»–ä»¬å¤šç§ç‰©æµé€‰é¡¹ã€‚è¿™ä¸ªå¯ä»¥åœ¨ <code>PKPaymentRequest</code> çš„ <code>shippingMethods</code> å±æ€§ä¸­è®¾ç½®ã€‚ç„¶åå¯ä»¥é€šè¿‡å®ç° <code>PKPaymentAuthorizationViewControllerDelegate</code> ä¸­çš„ <code>paymentAuthorizationViewController:didSelectShippingMethod:completion:</code> æ–¹æ³•æ¥å¯¹ç”¨æˆ·åšå‡ºçš„é€‰æ‹©è¿›è¡Œåé¦ˆã€‚è¿™ä¸ªæ–¹æ³•éµå¾ªå’Œ <code>didAuthorizePayment</code> ç±»ä¼¼çš„æ–¹å¼ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œå¯ä»¥åŒæ­¥åœ°åšä¸€äº›äº‹æƒ…ç„¶åè°ƒç”¨å›è°ƒå»æ›´æ–°åŒ…å«ç”¨æˆ·ä»˜æ¬¾ä¿¡æ¯çš„ <code>PKPaymentSummaryItem</code> æ•°ç»„ã€‚(è¿˜è®°å¾—å—æˆ‘ä»¬ä¹‹å‰æè¿‡ç”± <code>PKPaymentSummaryItem</code> ç»§æ‰¿æ¥çš„ <code>PKShippingMethod</code>ï¼Œè¿™ä¸œè¥¿èƒ½å¸®ä¸Šå¤§å¿™ï¼)</p><p>æ­¤å¤„å¯¹ä¸Šé¢çš„ä»£ç åšäº†ä¸€ç‚¹å°æ”¹åŠ¨ï¼Œå®ç°äº†ä¸€ä¸ªé€šè¿‡è®¡ç®—å¾—å‡ºçš„ç‰©æµå±æ€§ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> paymentRequest: PKPaymentRequest {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> request = ... <span style=color:#75715e>// initialize as before</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> freeShipping = PKShippingMethod(label: <span style=color:#e6db74>&#34;Free Shipping&#34;</span>, amount: NSDecimalNumber(string: <span style=color:#e6db74>&#34;0&#34;</span>))
</span></span><span style=display:flex><span>    freeShipping.identifier = <span style=color:#e6db74>&#34;freeshipping&#34;</span>
</span></span><span style=display:flex><span>    freeShipping.detail = <span style=color:#e6db74>&#34;Arrives in 6-8 weeks&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> expressShipping = PKShippingMethod(label: <span style=color:#e6db74>&#34;Express Shipping&#34;</span>, amount: NSDecimalNumber(string: <span style=color:#e6db74>&#34;10.00&#34;</span>))
</span></span><span style=display:flex><span>    expressShipping.identifier = <span style=color:#e6db74>&#34;expressshipping&#34;</span>
</span></span><span style=display:flex><span>    expressShipping.detail = <span style=color:#e6db74>&#34;Arrives in 2-3 days&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    request.shippingMethods = [freeShipping, expressShipping]
</span></span><span style=display:flex><span>    request.paymentSummaryItems = paymentSummaryItemsForShippingMethod(freeShipping)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> request
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>paymentSummaryItemsForShippingMethod</span>(shipping: PKShippingMethod) -&gt; ([PKPaymentSummaryItem]) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> wax = PKPaymentSummaryItem(label: <span style=color:#e6db74>&#34;Mustache Wax&#34;</span>, amount: NSDecimalNumber(string: <span style=color:#e6db74>&#34;10.00&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> discount = PKPaymentSummaryItem(label: <span style=color:#e6db74>&#34;Discount&#34;</span>, amount: NSDecimalNumber(string: <span style=color:#e6db74>&#34;-1.00&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> totalAmount = wax.amount.decimalNumberByAdding(discount.amount)
</span></span><span style=display:flex><span>                                .decimalNumberByAdding(shipping.amount)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> total = PKPaymentSummaryItem(label: <span style=color:#e6db74>&#34;NSHipster&#34;</span>, amount: totalAmount)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [wax, discount, shipping, total]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// </span><span style=color:#75715e>MARK:</span><span style=color:#75715e> - PKPaymentAuthorizationViewControllerDelegate</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>paymentAuthorizationViewController</span>(controller: PKPaymentAuthorizationViewController!, didSelectShippingMethod shippingMethod: PKShippingMethod!, completion: ((PKPaymentAuthorizationStatus, [AnyObject]<span style=color:#f92672>!</span>) -&gt; Void)<span style=color:#f92672>!</span>) {
</span></span><span style=display:flex><span>    completion(PKPaymentAuthorizationStatus.Success, paymentSummaryItemsForShippingMethod(shippingMethod))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>åœ¨è¿™ä¸ªæ ·ä¾‹ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©åŒ…é‚®å’Œ express å‘è´§ä¸¤ç§é€‰é¡¹ï¼Œä¸¤ç§æ–¹æ³•çš„è´¹ç”¨ä¼šæ ¹æ®ç”¨æˆ·çš„é€‰æ‹©è‡ªåŠ¨è°ƒæ•´ã€‚</p><p><em>åˆ«æ€¥ï¼Œè¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿å‘¢</em></p><p>ç›¸å¯¹äºæä¾›ä¸€å †ç»Ÿä¸€è´¹ç‡çš„ç‰©æµé€‰é¡¹ï¼Œå…¶å®ä½ å¯ä»¥è®©æ¶ˆè´¹è€…é€‰æ‹©è¿é€åœ°å€ç„¶ååŠ¨æ€è®¡ç®—ç‰©æµè´¹ç”¨ã€‚è¿™éœ€è¦è®¾ç½® <code>PKPaymentRequest</code> çš„ <code>requiredShippingAddressFields</code> å±æ€§ã€‚è¿™ä¸ªå±æ€§å«æœ‰ <code>PKAddressField.Email</code>ã€<code>PhoneNumber</code>ã€<code>PostalAddress</code> ä¿¡æ¯ã€‚</p><blockquote><p>å¦‚æœä½ ä¸éœ€è¦ç”¨æˆ·çš„å…·ä½“è¿é€åœ°å€ä½†æ˜¯éœ€è¦ä¸€äº›è”ç³»æ–¹å¼(æ¯”å¦‚è¯´éœ€è¦å¯„é€ç”µå­å‘ç¥¨çš„é‚®ç®±)ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥å®ç°ã€‚</p></blockquote><p>å½“è®¾ç½®äº†è¿™ä¸ªå±æ€§æ—¶ï¼Œæ–°çš„ &ldquo;Shipping Address&rdquo; å°±ä¼šæ˜¾ç¤ºåœ¨ä»˜æ¬¾çš„ UI ç•Œé¢ä¸Šï¼Œç”¨æˆ·å¯ä»¥ä¾æ¬¡é€‰æ‹©ä»–ä»¬ä¿å­˜è¿‡çš„å¯„é€åœ°å€ã€‚æ¯å½“ç”¨æˆ·é€‰æ‹©ä¸€ä¸ªåœ°å€æ—¶ï¼Œ<code>PKPaymentAuthorizationViewControllerDelegate</code> ä¸­çš„ <code>paymentAuthorizationViewController:didSelectShippingAddress:completion:</code>(é¡¾åæ€ä¹‰)æ–¹æ³•å°±ä¼šè°ƒç”¨ã€‚</p><p>æ­¤æ—¶ä½ åº”å½“é€šè¿‡ç”¨æˆ·é€‰æ‹©çš„åœ°å€ä¿¡æ¯è®¡ç®—å‡ºç‰©æµè´¹ç”¨ï¼Œä¹‹åè°ƒç”¨ <code>completion</code> å›è°ƒå¹¶æºå¸¦ 3 ä¸ªå‚æ•°ï¼š</p><ol><li>è°ƒç”¨ç»“æœ<ul><li><code>PKPaymentAuthorizationStatus.Success</code> ä»£è¡¨æˆåŠŸ</li><li><code>.Failure</code> ä»£è¡¨ç½‘ç»œè¿æ¥å‡ºé”™</li><li><code>.InvalidShippingPostalAddress</code> ä»£è¡¨ API è¿”å›äº†ä¸€ä¸ªç©ºæ•°ç»„(ä¾‹å¦‚å¡«å…¥äº†ä¸€ä¸ªä¸å¯é€è¾¾çš„åœ°å€)</li></ul></li><li>ç”¨ <code>PKShippingMethod</code> ç±»å‹çš„æ•°ç»„è¡¨ç¤ºç”¨æˆ·çš„å¯ç”¨ç‰©æµé€‰é¡¹</li><li>å«æœ‰ç‰©æµä¿¡æ¯çš„æ–° <code>PKPaymentSummaryItem</code> æ•°ç»„</li></ol><p>æˆ‘å†™äº†ä¸€ä¸ªä½¿ç”¨ EasyPost API é€šè¿‡åœ°å€èƒ½å¤ŸæŸ¥è¯¢é‚®è´¹çš„ç®€å• web åå°ã€‚æºç è§ <a href=https://github.com/jflinter/example-shipping-api>https://github.com/jflinter/example-shipping-api</a> ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨ <a href=https://nshipster.com/alamofire/>Alamofire</a> æŸ¥è¯¢çš„æ ·ä¾‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>AddressBook</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>PassKit</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Alamofire</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>addressesForRecord</span>(record: ABRecord) -&gt; [[String: String]] {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> addresses: [[String: String]] = []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> values: ABMultiValue = ABRecordCopyValue(record, kABPersonAddressProperty).takeRetainedValue()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> index <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;ABMultiValueGetCount(values) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> address = ABMultiValueCopyValueAtIndex(values, index).takeRetainedValue() <span style=color:#66d9ef>as</span>? [String: String] {
</span></span><span style=display:flex><span>            addresses.append(address)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> addresses
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>fetchShippingMethodsForAddress</span>(address: [String: String], completion: ([PKShippingMethod]?) -&gt; Void) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> parameters = [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;street&#34;</span>: address[kABPersonAddressStreetKey] ?? <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;city&#34;</span>: address[kABPersonAddressCityKey] ?? <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;state&#34;</span>: address[kABPersonAddressStateKey] ?? <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;zip&#34;</span>: address[kABPersonAddressZIPKey] ?? <span style=color:#e6db74>&#34;&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;country&#34;</span>: address[kABPersonAddressCountryKey] ?? <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Alamofire.request(.GET, <span style=color:#e6db74>&#34;http://example.com&#34;</span>, parameters: parameters)
</span></span><span style=display:flex><span>             .responseJSON { (<span style=color:#66d9ef>_</span>, <span style=color:#66d9ef>_</span>, JSON, <span style=color:#66d9ef>_</span>) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> rates = JSON <span style=color:#66d9ef>as</span>? [[String: String]] {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>let</span> shippingMethods = map(rates) { (rate) -&gt; PKShippingMethod <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>let</span> identifier = rate[<span style=color:#e6db74>&#34;id&#34;</span>]
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>let</span> carrier = rate[<span style=color:#e6db74>&#34;carrier&#34;</span>] ?? <span style=color:#e6db74>&#34;Unknown Carrier&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>let</span> service = rate[<span style=color:#e6db74>&#34;service&#34;</span>] ?? <span style=color:#e6db74>&#34;Unknown Service&#34;</span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>let</span> amount = NSDecimalNumber(string: rate[<span style=color:#e6db74>&#34;amount&#34;</span>])
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>let</span> arrival = rate[<span style=color:#e6db74>&#34;formatted_arrival_date&#34;</span>] ?? <span style=color:#e6db74>&#34;Unknown Arrival&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>let</span> shippingMethod = PKShippingMethod(label: <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>\(</span>carrier<span style=color:#e6db74>)</span><span style=color:#e6db74> </span><span style=color:#e6db74>\(</span>service<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>, amount: amount)
</span></span><span style=display:flex><span>                        shippingMethod.identifier = identifier
</span></span><span style=display:flex><span>                        shippingMethod.detail = arrival
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> shippingMethod
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>             }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œå¯ç”¨ç®€å•åœ°å®ç° <code>PKPaymentAuthorizationViewControllerDelegate</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>paymentAuthorizationViewController</span>(controller: PKPaymentAuthorizationViewController!, didSelectShippingAddress record: ABRecord!, completion: ((PKPaymentAuthorizationStatus, [AnyObject]<span style=color:#f92672>!</span>, [AnyObject]<span style=color:#f92672>!</span>) -&gt; Void)<span style=color:#f92672>!</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> address = addressesForRecord(record).first {
</span></span><span style=display:flex><span>        fetchShippingMethodsForAddress(address) { (shippingMethods) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>switch</span> shippingMethods?.count {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> .None:
</span></span><span style=display:flex><span>                completion(PKPaymentAuthorizationStatus.Failure, <span style=color:#66d9ef>nil</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> .Some(<span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>                completion(PKPaymentAuthorizationStatus.InvalidShippingPostalAddress, <span style=color:#66d9ef>nil</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>                completion(PKPaymentAuthorizationStatus.Success, shippingMethods, <span style=color:#66d9ef>self</span>.paymentSummaryItemsForShippingMethod(shippingMethods!.first!))
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        completion(PKPaymentAuthorizationStatus.Failure, <span style=color:#66d9ef>nil</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><img alt="Select a Shipping Method" src=/media/NSHipster/apple-pay-select-shipping-method.png></p><p>è‡³æ­¤ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å¯„é€åœ°å€ä»¥åŠåŸºäºå…¶å±…ä½åœ°å¾—åˆ°çš„å¯ç”¨ç‰©æµæ–¹å¼ã€‚ç”¨æˆ·æœ€ç»ˆé€‰æ‹©çš„ <code>shippingAddress</code> å’Œ <code>shippingMethod</code> ä¼šæˆä¸ºå›è°ƒåˆ° delegate æ–¹æ³• <code>paymentAuthorizationViewController:didAuthorizePayment:completion:</code> ä¸­ <code>PKPayment</code> å¯¹è±¡çš„æŸäº›å±æ€§ã€‚</p><blockquote><p>æ–‡ä¸­æåˆ°çš„æ‰€æœ‰æºç å¯ä»¥åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æ‰¾åˆ°ï¼šhttps://github.com/jflinter/ApplePayExample</p></blockquote><hr><p>è™½ç„¶ Apple Pay åªå¼€æ”¾äº†å¾ˆå°‘çš„ APIï¼Œä½†<a href="https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewFeature?id=927678292&mt=8&ls=1">å¾ˆå¤š</a> åº”ç”¨è¿˜æ˜¯å€Ÿæ­¤å®ç°äº†å¤šç§å¤šæ ·çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡å®šåˆ¶åŒ–åº”ç”¨åˆ°è‡ªå·±çš„åº”ç”¨ä¸­ã€‚å…¶å®å®ƒå¼€å¯äº†ä¸€ä¸ªè´­ä¹°çš„æ–°ç¯‡ç« ï¼Œæ¯”å¦‚è¯´ï¼Œç”¨æˆ·æ ¹æœ¬ä¸ç”¨å…ˆæ³¨å†Œå°±å¯ä»¥ä¹°ä¸œè¥¿ã€‚</p><p>éšç€è¶Šæ¥è¶Šå¤šçš„åº”ç”¨å¼€å§‹ä½¿ç”¨ Apple Pay(ä¹Ÿéšç€è¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·æ‹¥æœ‰æ”¯æŒ Apple Pay çš„è®¾å¤‡)ï¼Œå¾ˆå¿«è¿™å°±ä¼šæˆä¸º iOS åº”ç”¨ä¸­æ™®éå­˜åœ¨çš„æ”¯ä»˜æ–¹å¼ã€‚æˆ‘å¾ˆä¹æ„çœ‹ä¸€çœ‹ä½ ä»¬éƒ½å¦‚ä½•ç”¨ Apple Pay æ¥ä¸°å¯Œçš„ä½ çš„äº§å“ - å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æƒ³å‘æˆ‘å±•ç¤ºä½ çš„æˆæœï¼Œè¯·<a href=mailto:jack+nshipster@stripe.com>è”ç³»æˆ‘</a>ï¼</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2014-12-08 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Jack Flintermann ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Miscellaneous target=_blank>Miscellaneous</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>