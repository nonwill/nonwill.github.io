<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>NSSortDescriptor</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="NSSortDescriptor,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="NSSortDescriptor,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"🌜"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>NSSortDescriptor</span><span class=btRight><span title="Author · 作者" class=author>Mattt</span> <span title="Translator · 翻译" class=author>Zihan Xu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post · 关联或转载引用的文章" target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics · 回主题页">&#127793;</a></span></h1><p>排序：它是CS（计算机科学）入门课程考试和初级编程面试白板考题的主流考题。不管怎么样，你上一次真正需要知道如何实现快速排序是什么时侯？</p><p>当制作应用时，你只需要假设排序是快速的，而它的功用的衡量标准是你完成所需要任务的容易程度。从这个角度考虑，Foundation的<code>NSSortDescriptor</code>大概是你能找到的最有用，最优雅的实现了。</p><hr><p><code>NSSortDescriptor</code>由下述参数组成 ：</p><ul><li><code>键</code>：对于一个给定的集合，对应值的键位将对集合中的每个对象进行排序。</li><li><code>升序</code>：指定一个集合是否按照升序（<code>YES</code>）还是降序（<code>NO</code>）进行排序的布尔值。</li></ul><p>另外<code>NSSortDescriptor</code>还有一个涉及到排序的值之间的比较的第三个可选参数。默认情况下，这是一个简单的相等性检查，但它的行为可以通过传递一个<code>选择器</code>（<code>SEL</code>）或者<code>比较器</code>（<code>NSComparator</code>）而发生改变。</p><blockquote><p>任何时候当你在为面向用户的字符串排序时，一定要加入<code>localizedStandardCompare:</code>选择器，它将根据当前语言环境的语言规则进行排序（语言环境可能会根据大小写，变音符号等等的顺序而发生改变）。</p></blockquote><p>有的集合（比如<code>NSArray</code>和<code>NSSet</code>）有以<code>sortDescriptors</code>作为参数，可以返回排过序的数组的方法。排序描述符按顺序应用，所以如果两个元素碰巧被捆绑在同一个特定的排序标准，束缚将被后续的任意描述符所打破。</p><p>为了更直观的描述，假设我们有一个<code>Person</code>对象，它具有<code>NSString *</code>类型的<code>姓</code>和<code>名</code>属性，和<code>NSUInteger</code>类型的<code>年龄</code>属性。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>Person</span> : <span style=color:#a6e22e>NSObject</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> NSString <span style=color:#f92672>*</span>firstName;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> NSString <span style=color:#f92672>*</span>lastName;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> NSNumber <span style=color:#f92672>*</span>age;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@implementation</span> <span style=color:#a6e22e>Person</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- (NSString <span style=color:#f92672>*</span>)<span style=color:#a6e22e>description</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [NSString stringWithFormat:<span style=color:#e6db74>@&#34;%@ %@&#34;</span>, self.firstName, self.lastName];
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span></code></pre></div><p>给定以下数据集：</p><table><thead><tr><th><tt>index</tt></th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td><tt>firstName</tt></td><td>Alice</td><td>Bob</td><td>Charlie</td><td>Quentin</td></tr><tr><td><tt>lastName</tt></td><td>Smith</td><td>Jones</td><td>Smith</td><td>Alberts</td></tr><tr><td><tt>age</tt></td><td>24</td><td>27</td><td>33</td><td>31</td></tr></tbody></table><p>以下是几种使用<code>NSSortDescriptor</code>的不同组合来将它们排序的方法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSArray <span style=color:#f92672>*</span>firstNames <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span> <span style=color:#e6db74>@&#34;Alice&#34;</span>, <span style=color:#e6db74>@&#34;Bob&#34;</span>, <span style=color:#e6db74>@&#34;Charlie&#34;</span>, <span style=color:#e6db74>@&#34;Quentin&#34;</span> <span style=color:#ae81ff>]</span>;
</span></span><span style=display:flex><span>NSArray <span style=color:#f92672>*</span>lastNames <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span> <span style=color:#e6db74>@&#34;Smith&#34;</span>, <span style=color:#e6db74>@&#34;Jones&#34;</span>, <span style=color:#e6db74>@&#34;Smith&#34;</span>, <span style=color:#e6db74>@&#34;Alberts&#34;</span> <span style=color:#ae81ff>]</span>;
</span></span><span style=display:flex><span>NSArray <span style=color:#f92672>*</span>ages <span style=color:#f92672>=</span> <span style=color:#ae81ff>@[</span> <span style=color:#ae81ff>@24</span>, <span style=color:#ae81ff>@27</span>, <span style=color:#ae81ff>@33</span>, <span style=color:#ae81ff>@31</span> <span style=color:#ae81ff>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSMutableArray <span style=color:#f92672>*</span>people <span style=color:#f92672>=</span> [NSMutableArray array];
</span></span><span style=display:flex><span>[firstNames enumerateObjectsUsingBlock:<span style=color:#f92672>^</span>(<span style=color:#66d9ef>id</span> obj, NSUInteger idx, <span style=color:#66d9ef>BOOL</span> <span style=color:#f92672>*</span>stop) {
</span></span><span style=display:flex><span>    Person <span style=color:#f92672>*</span>person <span style=color:#f92672>=</span> [[Person alloc] init];
</span></span><span style=display:flex><span>    person.firstName <span style=color:#f92672>=</span> [firstNames objectAtIndex:idx];
</span></span><span style=display:flex><span>    person.lastName <span style=color:#f92672>=</span> [lastNames objectAtIndex:idx];
</span></span><span style=display:flex><span>    person.age <span style=color:#f92672>=</span> [ages objectAtIndex:idx];
</span></span><span style=display:flex><span>    [people addObject:person];
</span></span><span style=display:flex><span>}];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSSortDescriptor <span style=color:#f92672>*</span>firstNameSortDescriptor <span style=color:#f92672>=</span> [NSSortDescriptor sortDescriptorWithKey:<span style=color:#e6db74>@&#34;firstName&#34;</span>
</span></span><span style=display:flex><span>  ascending:YES
</span></span><span style=display:flex><span>  selector:<span style=color:#66d9ef>@selector</span>(localizedStandardCompare:)];
</span></span><span style=display:flex><span>NSSortDescriptor <span style=color:#f92672>*</span>lastNameSortDescriptor <span style=color:#f92672>=</span> [NSSortDescriptor sortDescriptorWithKey:<span style=color:#e6db74>@&#34;lastName&#34;</span>
</span></span><span style=display:flex><span>  ascending:YES
</span></span><span style=display:flex><span>  selector:<span style=color:#66d9ef>@selector</span>(localizedStandardCompare:)];
</span></span><span style=display:flex><span>NSSortDescriptor <span style=color:#f92672>*</span>ageSortDescriptor <span style=color:#f92672>=</span> [NSSortDescriptor sortDescriptorWithKey:<span style=color:#e6db74>@&#34;age&#34;</span>
</span></span><span style=display:flex><span>  ascending:NO];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSLog(<span style=color:#e6db74>@&#34;By age: %@&#34;</span>, [people sortedArrayUsingDescriptors:<span style=color:#ae81ff>@[</span>ageSortDescriptor<span style=color:#ae81ff>]</span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// &#34;Charlie Smith&#34;, &#34;Quentin Alberts&#34;, &#34;Bob Jones&#34;, &#34;Alice Smith&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSLog(<span style=color:#e6db74>@&#34;By first name: %@&#34;</span>, [people sortedArrayUsingDescriptors:<span style=color:#ae81ff>@[</span>firstNameSortDescriptor<span style=color:#ae81ff>]</span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// &#34;Alice Smith&#34;, &#34;Bob Jones&#34;, &#34;Charlie Smith&#34;, &#34;Quentin Alberts&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NSLog(<span style=color:#e6db74>@&#34;By last name, first name: %@&#34;</span>, [people sortedArrayUsingDescriptors:<span style=color:#ae81ff>@[</span>lastNameSortDescriptor, firstNameSortDescriptor<span style=color:#ae81ff>]</span>]);
</span></span><span style=display:flex><span><span style=color:#75715e>// &#34;Quentin Alberts&#34;, &#34;Bob Jones&#34;, &#34;Alice Smith&#34;, &#34;Charlie Smith&#34;
</span></span></span></code></pre></div><hr><p><code>NSSortDescriptor</code>在Foundation和其他系统框架中随处可见，它在Core Data中发挥着极其重要的作用。如果你自己的类需要定义排序顺序，请按照惯例合理设置<code>sortDescriptors</code>参数。</p><p>因为，在现实中，你应该以商业逻辑来思考它，而不是用数学公式或者映射化简函数来考量它。在这一方面，<code>NSSortDescriptor</code>是一个大灌篮，以至于每当你走出Objective-C和Cocoa的世界时都会思念它。</p><hr><p>除非<a href=https://nshipster.cn/ target=_blank>另有声明</a>，本文采用知识共享「<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>署名-非商业性使用 3.0 中国大陆</a>」许可协议授权。</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top · 回顶部" rel=nofollow>&#127772;2012-07-24 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2025 Mattt 版权所有</a><a href=https://autoptr.top/ title="Back to Home · 回首页">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>标签:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>分类:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>