<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>Swift 1.2</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="Swift 1.2,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="Swift 1.2,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>Swift 1.2</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Nate Cook</span> <span title="Translator Â· ç¿»è¯‘" class=author>Croath Liu</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>Swift æ­£å¦‚å…¶åï¼Œé€Ÿåº¦é£å¿«ã€‚æœ¬å‘¨å°†å…³æ³¨ Swift 1.2 ç‰ˆæœ¬çš„ä¸€ä¸ª <em>é‡å¤§</em> æ›´æ–°ã€‚Swift å¼€å‘å›¢é˜Ÿåœ¨è¿™æ¬¡åŠ é€Ÿä¿¯å†²ä¸­ä¸€æ¬¡æ€§å“åº”äº†å¼€å‘ç¤¾åŒºçš„è¯¸å¤šéœ€æ±‚ï¼Œå¸¦æ¥äº†è®¸å¤šæ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§ã€‚æœ¬æ¬¡å‘å¸ƒçš„æ¯ä¸€ä¸ªå°æ›´æ–°éƒ½å¸¦æ¥äº†å·¨å¤§çš„å¥½å¤„ï¼šå¢é‡æ„å»ºã€ä¸°å¯Œäº† Xcode ä¸­çš„é”™è¯¯ä¿¡æ¯ã€æå‡ Xcode ç¨³å®šæ€§ã€é™æ€ç±»å±æ€§ã€æ”¯æŒ C çš„ union å’Œ bitfieldã€å°† Swift ä¸­çš„ <code>enum</code> æ‰“é€šåˆ° Objective-C ä¸­ã€æ›´å®‰å…¨çš„ç±»å‹è½¬æ¢ã€å•è¡Œé—­åŒ…çš„æå‡ç­‰ç­‰ã€‚</p><p>åœ¨è¿™ä¹ˆå¤šçš„æ›´æ–°ä¸­æˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸¤ä¸ªæ˜æ˜¾æå‡ä½¿ç”¨ä½“éªŒçš„æ–°åŠŸèƒ½ï¼šä¸€ä¸ªæ˜¯ <code>if let</code> è¯­å¥ optional ç»‘å®š <em>ç»ˆäºæœ‰äº†</em> å·¨å¤§å˜åŒ–ï¼Œå¦ä¸€ä¸ªæ˜¯ Objective-C ä¸­çš„ç©ºå€¼æ ‡æ³¨ã€‚</p><h2 id=æå‡-optional-ç»‘å®š>æå‡ Optional ç»‘å®š</h2><p>Swift 1.2 å…è®¸é€šè¿‡å¤šå€¼å¹¶è¡Œ optional ç»‘å®šæ¥é¿å… <code>if let</code> è¯­å¥çš„å¤šé‡æ·±åµŒå¥—ã€‚å¤šä¸ª optional ç»‘å®šå¯ä»¥é€šè¿‡é€—å·åˆ†éš”å¼€ï¼Œå¹¶ä¸”å¯ä»¥å¸¦ä¸€ä¸ªå’Œä¼ ç»Ÿçš„ <code>if</code> è¯­å¥åŒæ ·æ•ˆæœçš„ <code>where</code> åˆ†å¥ã€‚è¿™æ ·çš„è¯ï¼Œæ‹œå åº­çš„ <a href=http://www.scottlogic.com/blog/2014/12/08/swift-optional-pyramids-of-doom.html>å„è¿é‡‘å­—å¡”</a> å°±å¯ä»¥è¢«ä¿®ç¼®æˆä¸­ä¸–çºªé£æ ¼çš„ç°ä»£ç‰§åœºäº†ï¼š</p><p><strong>ä»å‰ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> a = <span style=color:#e6db74>&#34;10&#34;</span>.toInt()
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> b = <span style=color:#e6db74>&#34;5&#34;</span>.toInt()
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> c = <span style=color:#e6db74>&#34;3&#34;</span>.toInt()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> a = a {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> b = b {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> c = c {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> c <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>                println(<span style=color:#e6db74>&#34;(a + b) / c = </span><span style=color:#e6db74>\((</span>a <span style=color:#f92672>+</span> b<span style=color:#e6db74>)</span> <span style=color:#f92672>/</span> c<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>ç°åœ¨ï¼š</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> a = a, b = b, c = c <span style=color:#66d9ef>where</span> c <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;(a + b) / c = </span><span style=color:#e6db74>\((</span>a <span style=color:#f92672>+</span> b<span style=color:#e6db74>)</span> <span style=color:#f92672>/</span> c<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)     <span style=color:#75715e>// (a + b) / c = 5</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p>è¿™ä¸¤ä¸ªä¾‹å­ä¸­åˆ¤æ–­è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸€æ ·çš„ã€‚ä½¿ç”¨æ–°çš„è¯­æ³•å¯ä»¥è®©æ¯ä¸ªç»‘å®šéƒ½æŒ‰é¡ºåºæ‰§è¡Œï¼Œå¦‚æœæŸä¸€ä¸ªç»‘å®šæ˜¯ <code>nil</code> å°±ä¼šåœä¸‹æ¥ã€‚åªæœ‰åœ¨æ‰€æœ‰çš„ optional binding éƒ½æˆåŠŸçš„æƒ…å†µä¸‹æ‰ä¼šè¿›è¡Œ <code>where</code> è¯­å¥æ£€æŸ¥ã€‚</p><p>ä¸€ä¸ª <code>if</code> è¯­å¥å¯ä»¥åŒ…å«å¤šä¸ªé€šè¿‡é€—å·åˆ†éš”çš„ <code>let</code> ç»‘å®šã€‚å› ä¸ºæ¯ä¸ª <code>let</code> å¯ä»¥ç»‘å®šå¤šä¸ª optional <em>å’Œ</em> ä¸€ä¸ª <code>where</code> åˆ†å¥ï¼Œæ‰€ä»¥é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥æ”¯æŒçœŸæ­£æ›´é«˜çº§çš„é€»è¾‘ã€‚ï¼ˆæ„Ÿè°¢ <a href=https://twitter.com/stephencelis>Stephen Celis</a> å¸®å¿™è§£é‡Šæ¸…æ¥šè¿™ç‚¹ã€‚ï¼‰</p></blockquote><p>æ›´æ£’çš„æ˜¯ï¼Œåç»­çš„ç»‘å®šè¯­å¥å¯ä»¥å¼•ç”¨ä¹‹å‰çš„ç»‘å®šã€‚è¿™æ„å‘³ç€ä½ åªç”¨ä¸€ä¸ª <code>if let</code> è¯­å¥å°±å¯ä»¥è§£æ <code>Dictionary</code> å¯¹è±¡æˆ–è€…å¯¹ <code>AnyObject?</code> å€¼è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç„¶åå°†å…¶ç”¨äºå¦ä¸€ä¸ªè¯­å¥ä¸­ã€‚</p><p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œå°† <a href=http://jsonplaceholder.typicode.com/users>è¿™æ ·ä¸€ä¸ªåºå¤§çš„ JSON å—</a> åœ¨ Swift 1.2 ä¸­è§£æã€‚æ ·ä¾‹ä¸­ç”¨ä¸€ä¸ª <code>if let</code> å°† JSON è§£ææˆæŒ‡å®šçš„åŒ…å« <code>NSBundle</code>ã€<code>NSURL</code> å’Œ <code>NSData</code> ç±»å‹ä»¥åŠä¸€äº› <code>AnyObject?</code> å€¼çš„å¯¹è±¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> users: [User] = []
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// load and parse the JSON into an array</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span>
</span></span><span style=display:flex><span>    path     = NSBundle.mainBundle().pathForResource(<span style=color:#e6db74>&#34;users&#34;</span>, ofType: <span style=color:#e6db74>&#34;json&#34;</span>),
</span></span><span style=display:flex><span>    url      = NSURL(fileURLWithPath: path),
</span></span><span style=display:flex><span>    data     = NSData(contentsOfURL: url),
</span></span><span style=display:flex><span>    userList = NSJSONSerialization.JSONObjectWithData(data, options: <span style=color:#66d9ef>nil</span>, error: <span style=color:#66d9ef>nil</span>) <span style=color:#66d9ef>as</span>? [[String: AnyObject]] 
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// extract individual users</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> userDict <span style=color:#66d9ef>in</span> userList {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span>
</span></span><span style=display:flex><span>            id      = userDict[<span style=color:#e6db74>&#34;id&#34;</span>] <span style=color:#66d9ef>as</span>? Int,
</span></span><span style=display:flex><span>            name    = userDict[<span style=color:#e6db74>&#34;name&#34;</span>] <span style=color:#66d9ef>as</span>? String,
</span></span><span style=display:flex><span>            email   = userDict[<span style=color:#e6db74>&#34;email&#34;</span>] <span style=color:#66d9ef>as</span>? String,
</span></span><span style=display:flex><span>            address = userDict[<span style=color:#e6db74>&#34;address&#34;</span>] <span style=color:#66d9ef>as</span>? [String: AnyObject]
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            users.append(User(id: id, name: name, ...))
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JSON data-lang=JSON><span style=display:flex><span>[
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Leanne Graham&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;Bret&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;email&#34;</span>: <span style=color:#e6db74>&#34;Sincere@april.biz&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;address&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;street&#34;</span>: <span style=color:#e6db74>&#34;Kulas Light&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;suite&#34;</span>: <span style=color:#e6db74>&#34;Apt. 556&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;city&#34;</span>: <span style=color:#e6db74>&#34;Gwenborough&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;zipcode&#34;</span>: <span style=color:#e6db74>&#34;92998-3874&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;geo&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;lat&#34;</span>: <span style=color:#e6db74>&#34;-37.3159&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;lng&#34;</span>: <span style=color:#e6db74>&#34;81.1496&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;phone&#34;</span>: <span style=color:#e6db74>&#34;1-770-736-8031 x56442&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;website&#34;</span>: <span style=color:#e6db74>&#34;hildegard.org&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;company&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Romaguera-Crona&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;catchPhrase&#34;</span>: <span style=color:#e6db74>&#34;Multi-layered client-server neural-net&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;bs&#34;</span>: <span style=color:#e6db74>&#34;harness real-time e-markets&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Ervin Howell&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;Antonette&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;email&#34;</span>: <span style=color:#e6db74>&#34;Shanna@melissa.tv&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;address&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;street&#34;</span>: <span style=color:#e6db74>&#34;Victor Plains&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;suite&#34;</span>: <span style=color:#e6db74>&#34;Suite 879&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;city&#34;</span>: <span style=color:#e6db74>&#34;Wisokyburgh&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;zipcode&#34;</span>: <span style=color:#e6db74>&#34;90566-7771&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;geo&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;lat&#34;</span>: <span style=color:#e6db74>&#34;-43.9509&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;lng&#34;</span>: <span style=color:#e6db74>&#34;-34.4618&#34;</span>
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;phone&#34;</span>: <span style=color:#e6db74>&#34;010-692-6593 x09125&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;website&#34;</span>: <span style=color:#e6db74>&#34;anastasia.net&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;company&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;Deckow-Crist&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;catchPhrase&#34;</span>: <span style=color:#e6db74>&#34;Proactive didactic contingency&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;bs&#34;</span>: <span style=color:#e6db74>&#34;synergize scalable supply-chains&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>æˆ‘æ„Ÿè§‰æˆ‘ä»¬ä¹‹åå†™çš„ä»£ç ä¸­ä¼šæœ‰ä¸å°‘çš„é€—å·å‡ºç°ã€‚</p><h2 id=ç©ºå€¼æ ‡æ³¨>ç©ºå€¼æ ‡æ³¨</h2><p>åœ¨ Swift ç¬¬ä¸€ç‰ˆå‘å¸ƒçš„æ—¶å€™ï¼Œæ¯ä¸€ä¸ªå¯¹ Cocoa API çš„è°ƒç”¨æ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªæ¨¡ç³Šè§£æçš„ optional ç±»å‹ï¼ˆæ¯”å¦‚è¯´ <code>AnyObject!</code>ï¼‰ã€‚å› ä¸ºå®ƒä»¬ä¼šåœ¨è¯»å–è¿‡ç¨‹ä¸­è®©ç¨‹åºå´©æºƒï¼Œæ‰€ä»¥å¦‚æœæ²¡æœ‰æ¸…æ™°çš„æ–‡æ¡£è¡¨æ˜è¯¥æ–¹æ³•æ˜¯å¦ä¼šè¿”å›ä¸€ä¸ª null å€¼é‚£ä¹ˆè¿™ç§æ¨¡ç³Šè§£æå†…åœ¨æ˜¯ä¸å®‰å…¨çš„ã€‚è¿™äº›éƒ½æ˜¯ä¸å¥½çš„ç°è±¡ã€‚Swift ç¡®å®èƒ½å¤Ÿè°ƒç”¨ Cocoa API äº†ï¼Œä½†è°ƒç”¨æ–¹æ³•é•¿å¾—çœŸå¥‡æ€ªã€‚</p><p>éšç€ beta å‘å¸ƒçš„å®Œå–„ï¼Œå†…éƒ¨è¯„ä¼°ä¸­ä¸æ–­ç§»é™¤ä¸å‹å¥½çš„æ ‡ç‚¹ç¬¦å·ï¼Œç”¨çœŸ optional ã€é optional æˆ–æ°¸ä¸ä¸ºç©ºçš„å€¼æ¥æ›¿ä»£æ¨¡ç³Šè§£æçš„ optionalã€‚è¿™æå¤§æé«˜äº†ä½¿ç”¨ Cocoa æ—¶çš„ä½“éªŒï¼Œä½†æ˜¯ï¼Œä½¿ç”¨ä¸‰æ–¹ä»£ç çš„æ—¶å€™è¿™ä¸ªé—®é¢˜å´ä»ç„¶å­˜åœ¨ã€‚</p><p>è¿™ç§æƒ…å†µä¸å¤å­˜åœ¨äº†ï¼Swift 1.2 å¸¦æ¥äº†æ–°ç‰ˆæœ¬çš„ Clangã€‚æ–°çš„å±æ€§å‚æ•°å’ŒæŒ‡é’ˆæ ‡æ³¨å…è®¸æŒ‡é’ˆã€Objective-C å±æ€§ã€æ–¹æ³•å‚æ•°æˆ–è¿”å›å€¼æ˜¯å¦å¯ä»¥ä¸º <code>nil</code>ã€‚</p><blockquote><ul><li><code>nonnull</code>ï¼šæ ‡ç¤ºè¯¥æŒ‡é’ˆ <code>ä¸åº”è¯¥</code> ä¸º <code>nil</code>ã€‚åœ¨ Swift ä¸­ä½¿ç”¨æ ‡æ³¨ <code>nonnull</code> çš„æŒ‡é’ˆæ—¶ä¼šä¿ç•™ä»–ä»¬åŸå§‹çš„å€¼ï¼ˆä¾‹å¦‚ <code>NSData</code>ï¼‰ã€‚</li><li><code>nullable</code>ï¼šæ ‡ç¤ºè¯¥æŒ‡é’ˆåœ¨é€šå¸¸æƒ…å†µä¸‹ <code>å¯ä»¥</code> ä¸º <code>nil</code>ã€‚å®ƒä»¬åœ¨ Swift ä¸­ä¼šä»¥ optional å€¼è¡¨ç¤ºï¼ˆæ¯”å¦‚ <code>NSURL?</code>ï¼‰ã€‚</li><li><code>null_unspecified</code>ï¼šåƒä»¥å‰ä¸€æ ·çš„æ¨¡ç³Šè§£æ optional ç±»å‹ï¼Œç†æƒ³çŠ¶æ€æ˜¯åªæ ‡æ³¨è€Œä¸ä½¿ç”¨ã€‚</li><li><code>null_resettable</code>ï¼šæ ‡ç¤ºè¿™ä¸ªå±æ€§æ°¸è¿œä¼šæœ‰ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥è¢«èµ‹ä¸º <code>nil</code>ã€‚æ‹¥æœ‰é <code>nil</code> é»˜è®¤å€¼çš„å±æ€§å¯ä»¥ç”¨è¿™ä¸ªå­—æ®µæ ‡æ³¨ï¼Œä¾‹å¦‚ï¼š<code>tintColor</code>ã€‚æ ¹æ®æ–‡æ¡£ï¼Œè¿™ç§å±æ€§åœ¨ Swift ä¸­ä½¿ç”¨æ—¶ä¼šå˜æˆä¸€ç§ï¼ˆç›¸å¯¹å®‰å…¨ï¼‰çš„æ¨¡ç³Šè§£æ optional ç±»å‹ã€‚</li></ul></blockquote><p>å‰ä¸‰ç§æ ‡æ³¨ä¹Ÿå¯ä»¥é€šè¿‡åŒä¸‹åˆ’çº¿å‰ç½®ï¼ˆ<code>__nonnull</code>ã€<code>__nullable</code> å’Œ <code>__null_unspecified</code>ï¼‰ç”¨äº C æŒ‡é’ˆå’Œ block æŒ‡é’ˆã€‚æœ€åä¸€ç§ <code>null_resettable</code> æ ‡æ³¨ä»…å¯ç”¨äº Objective-C å±æ€§ã€‚</p><h3 id=ç«‹å³åŠ¨æ‰‹å°è¯•>ç«‹å³åŠ¨æ‰‹å°è¯•</h3><p>ä¸‹é¢çš„æ ·ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª data controller æ¥æ§åˆ¶ä¸€ä¸ªä½ç½®ä¿¡æ¯åˆ—è¡¨ï¼Œæ¯ä¸ªä½ç½®ä¿¡æ¯å¯èƒ½é™„å›¾ã€‚è¿™ä¸ªæ ·ä¾‹å±•ç¤ºäº†è¿™å‡ ç§æ–°æ ‡æ³¨çš„ä¼˜ç‚¹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>LocationDataController</span> : <span style=color:#a6e22e>NSObject</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>readonly</span>) NSArray <span style=color:#f92672>*</span>locations;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>readonly</span>) Location <span style=color:#f92672>*</span>latestLocation;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- (<span style=color:#66d9ef>void</span>)<span style=color:#a6e22e>addPhoto:</span>(Photo <span style=color:#f92672>*</span>)photo <span style=color:#a6e22e>forLocation:</span>(Location <span style=color:#f92672>*</span>)location;
</span></span><span style=display:flex><span>- (Photo <span style=color:#f92672>*</span>)<span style=color:#a6e22e>photoForLocation:</span>(Location <span style=color:#f92672>*</span>)location;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span></code></pre></div><p>å¦‚æœä¸ç”¨ç©ºå€¼æ ‡æ³¨ï¼Œ<code>LocationDataController</code> ç±»ä¸­çš„æ¯ä¸ªæŒ‡é’ˆåœ¨ Swift ä¸­ä½¿ç”¨æ—¶éƒ½ä¼šå˜æˆæ¨¡ç³Šè§£æçš„ optional ç±»å‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocationDataController</span> : NSObject {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> locations: [AnyObject]<span style=color:#f92672>!</span> { <span style=color:#66d9ef>get</span> }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> latestLocation: Location! { <span style=color:#66d9ef>get</span> }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>addPhoto</span>(photo: Photo!, forLocation location: Location!)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>photoForLocation</span>(location: Location!) -&gt; Photo!
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™ï¼ä¹ˆï¼å¤šï¼æ„Ÿï¼å¹ï¼å·ï¼çœŸï¼æ˜¯ï¼å¤Ÿï¼äº†ï¼å¦‚æœåœ¨ Objective-C ä¸­å°±æ ‡æ³¨å¥½ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>LocationDataController</span> : <span style=color:#a6e22e>NSObject</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (nonnull, <span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>readonly</span>) NSArray <span style=color:#f92672>*</span>locations;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (nullable, <span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>readonly</span>) Location <span style=color:#f92672>*</span>latestLocation;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- (<span style=color:#66d9ef>void</span>)<span style=color:#a6e22e>addPhoto:</span>(nonnull Photo <span style=color:#f92672>*</span>)photo <span style=color:#a6e22e>forLocation:</span>(nonnull Location <span style=color:#f92672>*</span>)location;
</span></span><span style=display:flex><span>- (nullable Photo <span style=color:#f92672>*</span>)<span style=color:#a6e22e>photoForLocation:</span>(nonnull Location <span style=color:#f92672>*</span>)location;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span></code></pre></div><p>é¦–å…ˆ <code>locations</code> åˆ—è¡¨æ˜¯ <code>nonnull</code> çš„ï¼Œå› ä¸ºæœ€ç³Ÿç³•çš„æƒ…å†µä¸‹å®ƒä¹Ÿå°±æ˜¯ä¸€ä¸ªç©ºæ•°ç»„äº†ï¼Œä½†å¦‚æœåˆ—è¡¨ä¸­æ²¡æœ‰ä»»ä½•ä½ç½®ä¿¡æ¯ï¼Œ<code>latestLocation</code> å´ <em>å¯ä»¥</em> æ˜¯ <code>nil</code>ã€‚åŒç†ï¼Œä¸¤ä¸ªæ–¹æ³•ä¸­çš„å‚æ•°æ°¸è¿œä¸åº”è¯¥ä¸ºç©ºã€‚å› ä¸ºä¸æ˜¯æ¯ä¸ªä½ç½®ä¿¡æ¯éƒ½æœ‰ä¸€å¼ ç…§ç‰‡ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªæ–¹æ³•çš„è¿”å›å€¼æ˜¯ <code>nullable</code> å‹çš„ Photo å®ä¾‹ã€‚è¿™ç§å£°æ˜æ–¹å¼åœ¨ Swift ä¸­å°±å˜å¾—æ›´å¥½ã€æ›´æ¸…æ™°ã€æ›´å®‰å…¨ï¼Œè€Œä¸”ä¹Ÿæ²¡é‚£ä¹ˆå¤šçƒ¦äººçš„æ„Ÿå¹å·äº†ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocationDataController</span> : NSObject {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> locations: [AnyObject] { <span style=color:#66d9ef>get</span> }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> latestLocation: Location? { <span style=color:#66d9ef>get</span> }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>addPhoto</span>(photo: Photo, forLocation location: Location)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>photoForLocation</span>(location: Location) -&gt; Photo?
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=ns_assume_nonnull_beginend>NS_ASSUME_NONNULL_BEGIN/END</h3><p>åœ¨ Objective-C å¤´æ–‡ä»¶ä¸­æ ‡æ³¨ <em>ä»»ä½•</em> æŒ‡é’ˆéƒ½ä¼šå¯¼è‡´ç¼–è¯‘å™¨å¯¹æ•´ä¸ªæ–‡ä»¶è¿›è¡Œæ ‡æ³¨åˆ†æï¼Œå¸¦æ¥ä¸å°‘çš„è­¦å‘Šã€‚å› ä¸ºå¤§å¤šæ•°çš„æ ‡æ³¨éƒ½æ˜¯ <code>nonnull</code> çš„ï¼Œä¸€ä¸ªç”¨äºæ ‡æ³¨å·²å­˜åœ¨ç±»çš„æé«˜æ•ˆç‡çš„å®å°±å‡ºç°äº†ã€‚åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä¾‹å¤–æƒ…å†µå•ç‹¬æ ‡æ³¨ï¼Œå…¶ä»–åœ°æ–¹å¼€å§‹å’Œç»“å°¾çš„åœ°æ–¹ç”¨ <code>NS_ASSUME_NONNULL_BEGIN</code> å’Œ <code>..._END</code> åŒ…å›´èµ·æ¥å°±å¥½äº†ã€‚</p><p>å’Œä¸Šè¿° data controller èƒ½åœ¨ Swift ä¸­äº§ç”ŸåŒæ ·æ•ˆæœçš„å¦ä¸€ä¸ªæ›´æ˜“è¯»çš„ç‰ˆæœ¬å°±å‡ºç°äº†ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#66d9ef>@interface</span> <span style=color:#a6e22e>LocationDataController</span> : <span style=color:#a6e22e>NSObject</span>
</span></span><span style=display:flex><span>NS_ASSUME_NONNULL_BEGIN
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (<span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>readonly</span>) NSArray <span style=color:#f92672>*</span>locations;
</span></span><span style=display:flex><span><span style=color:#66d9ef>@property</span> (nullable, <span style=color:#66d9ef>nonatomic</span>, <span style=color:#66d9ef>readonly</span>) Location <span style=color:#f92672>*</span>latestLocation;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>- (<span style=color:#66d9ef>void</span>)<span style=color:#a6e22e>addPhoto:</span>(Photo <span style=color:#f92672>*</span>)photo <span style=color:#a6e22e>forLocation:</span>(Location <span style=color:#f92672>*</span>)location;
</span></span><span style=display:flex><span>- (nullable Photo <span style=color:#f92672>*</span>)<span style=color:#a6e22e>photoForLocation:</span>(Location <span style=color:#f92672>*</span>)location;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>NS_ASSUME_NONNULL_END
</span></span><span style=display:flex><span><span style=color:#66d9ef>@end</span>
</span></span></code></pre></div><h3 id=ä¸åªæ˜¯-swift>ä¸åªæ˜¯ Swift</h3><p>æ–°çš„ Objective-C ç©ºå€¼æ ‡æ³¨ä¸º Swift å¸¦æ¥äº†å·¨å¤§å¥½å¤„ï¼Œä¸æ­¤åŒæ—¶å¦‚æœä¸å†™ä»»ä½• Swift è¿˜æ˜¯å¯ä»¥ä»ä¸­å—ç›Šçš„ã€‚å¦‚æœå°† <code>nil</code> å€¼ä¼ ç»™äº†å¸¦æœ‰ <code>nonnull</code> æ ‡æ³¨çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆè‡ªåŠ¨è¡¥å…¨æ—¶å°±ä¼šæœ‰æç¤ºï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>// Can I remove a photo by sending nil?
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>[dataController addPhoto:nil forLocation:currentLocation];
</span></span><span style=display:flex><span><span style=color:#75715e>// Nope -- Warning: Null passed to a callee that requires a non-null argument
</span></span></span></code></pre></div><hr><p>æ¿€åŠ¨äººå¿ƒçš„æ˜¯ï¼Œå…³äºè¿™æ¬¡æ›´æ–°çš„æ•…äº‹æˆ‘ä»¬åªè®²äº†ä¸€åŠã€‚é™¤äº† Swift è¯­æ³•çš„å˜åŒ–å’Œç¼–è¯‘å™¨å˜å¼‚æ–¹å¼çš„å˜åŒ–ä¹‹å¤–ï¼Œæ ‡å‡†åº“ä¹Ÿå‡çº§åˆ°äº†ä¸€ä¸ª <a href=http://swiftdoc.org/news/2015/02/swift1.2/>å¤§ç‰ˆæœ¬</a>ï¼Œå¸¦æ¥äº†æ–°çš„ <code>Set</code> ç±»ï¼ˆå†è§äº†<a href=https://github.com/natecook1000/SwiftSets/blob/master/Set.swift>æœ‹å‹</a>ï¼‰ã€‚<em>å‘µå‘µå‘µå‘µ</em>ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä»¥å‰çš„ä»£ç ä¹Ÿéƒ½ä¸èƒ½è¿è¡Œäº†ï¼ŒStack Overflow ä¸Šåˆå¤šäº† 21,000 ä¸ªè¿‡æœŸçš„ Swift é—®é¢˜ï¼Ÿå…¶å®æƒ³æƒ³è¿˜è›®æœ‰æ„æ€çš„ã€‚</p><script language=Javascript>$(document).ready(function(){$("code.language-objective-c .n").each(function(e,t){var n=$(t).text();(n=="nullable"||n=="nonnull")&&$(t).css("font-weight","bold")})})</script><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2015-02-09 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Nate Cook ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Swift target=_blank>Swift</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>