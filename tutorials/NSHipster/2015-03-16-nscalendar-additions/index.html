<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>NSCalendar Additions</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="NSCalendar Additions,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="NSCalendar Additions,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>NSCalendar Additions</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Nate Cook</span> <span title="Translator Â· ç¿»è¯‘" class=author>GWesley</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p><em>æ—¥æœŸ.</em> ä¸€ä¸ªå¾ˆæ™®é€šçš„æ—¶é—´å’Œå®ƒçš„å®ç°é—´å¾€å¾€æœ‰ç€å·¨å¤§çš„å·®å¼‚ï¼Œé‡Œé¢éšè—çš„å¤šæ–¹é¢çš„å¤æ‚æ€§è¿œè¶…å…¶å®ƒæ•°æ®ç±»å‹ã€‚å…¶ä¸­åŒ…æ‹¬äºšç§’çº§çš„ç²¾åº¦ï¼Œé‡å å•å…ƒï¼Œä¸åŒåœ°ç†ä½ç½®çš„æ—¶åŒºè¾¹ç•Œï¼Œè¯­è¨€å’Œè¯­æ³•ä¸Šçš„æœ¬åœ°åŒ–å·®å¼‚ï¼Œä»¥åŠä¸ºäº†å¤ä»¤æ—¶çš„è½¬æ¢å’Œé—°å¹´è°ƒæ•´ï¼Œè€Œåœ¨æ ‡å‡†æ—¶é—´ä¸­æ·»åŠ åˆ é™¤æ•´å—çš„æ—¶é—´ç­‰ç­‰ï¼Œé‡Œé¢æœ‰å¤ªå¤šçš„ä¸œè¥¿éœ€è¦è¿›è¡Œå¤„ç†ã€‚</p><p>åœ¨å¼€å§‹è¿›è¡Œä»»ä½•é‡åº¦æ—¥æœŸç›¸å…³çš„ä»»åŠ¡å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦æ·±å…¥äº†è§£ä¸€ä¸‹æˆ‘ä»¬æ‰‹ä¸­å·²æœ‰çš„å·¥å…·ã€‚ç›¸æ¯”å†™ä¸Šä¸Šåƒä¸ªç‰ˆæœ¬çš„ <code>dateIsTomorrow</code>ï¼Œæˆ‘è§‰å¾—æ›´å¥½çš„åŠæ³•æ˜¯ä½¿ç”¨ <code>Foundation</code> æ–¹æ³•ã€‚ä½ æœ‰åœ¨ç”¨ <code>NSDateComponents</code> å—ï¼Ÿä½ æœ‰æŒ‡å®šæ­£ç¡®çš„æ—¥å†å•å…ƒå—ï¼Ÿä½ çš„ä»£ç åœ¨ 2100 å¹´ 2 æœˆ 28 å·è¿˜èƒ½æ­£å¸¸å·¥ä½œä¹ˆï¼Ÿ</p><p>ä½†äº‹å®ä¸Šï¼šå¤§å®¶ä¸€ç›´éƒ½åœ¨ä½¿ç”¨é‚£äº›å·²ç»éå¸¸ç†Ÿæ‚‰äº†çš„ APIs ã€‚é™¤éä½ è·‘å»è€ƒå¯Ÿç‰ˆæœ¬è¯´æ˜å’Œ API å˜åŠ¨è¡¨ï¼Œä¸ç„¶ä½ è‚¯å®šä¸ä¼šçŸ¥é“æœ€è¿‘å‘å¸ƒçš„å‡ ä¸ª OS X ç‰ˆæœ¬é‡Œï¼Œ<code>NSCalendar</code> å·²ç»æ·»åŠ äº†ä¸€ç³»åˆ—åŠŸèƒ½ååˆ†å¼ºå¤§çš„æ–¹æ³•å»æ“ä½œè®¡ç®—æ—¥æœŸï¼Œæœ€è¿‘çš„ä¸€æ¬¡å‘å¸ƒè®©æˆ‘ä»¬å¯ä»¥åœ¨ iOS ä¸­ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> calendar = NSCalendar.currentCalendar()
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSCalendar <span style=color:#f92672>*</span>calendar <span style=color:#f92672>=</span> [NSCalendar currentCalendar];
</span></span></code></pre></div><p>ä»å…¨æ–°çš„æ—¥æœŸç»„ä»¶å­˜å–ä¸æ—¥æœŸæ¯”è¾ƒæ–¹æ³•ï¼Œåˆ°å¼ºå¤§çš„æ—¥æœŸæ’å€¼ä¸æšä¸¾æ–¹æ³•ï¼Œæœ‰å¤ªå¤šçš„ä¸œè¥¿è¢«æˆ‘ä»¬å¿½è§†äº†ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬æŠ½ç‚¹æ—¶é—´æ¥äº†è§£ä¸€ä¸‹å§ã€‚</p><h2 id=ä¾¿åˆ©çš„æ—¥æœŸç»„ä»¶å­˜å–>ä¾¿åˆ©çš„æ—¥æœŸç»„ä»¶å­˜å–</h2><p>å“‡, <code>NSDateComponents</code> çœŸæ˜¯æ—¢å®ç”¨åˆçµæ´»ï¼Œä½†å½“æˆ‘åªæ˜¯æƒ³çŸ¥é“é—´éš”çš„å°æ—¶æ•°æ—¶ï¼Œå®ƒç”¨èµ·æ¥æ„Ÿè§‰åˆå¤ªéº»çƒ¦äº†ã€‚ä¸è¦æ…Œï¼Œ <code>NSCalendar</code> æ¥æ•‘ä½ äº†ï¼</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> hour = calendar.component(.CalendarUnitHour, fromDate: NSDate())
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSInteger hour <span style=color:#f92672>=</span> [calendar component:NSCalendarUnitHour fromDate:[NSDate date]];
</span></span></code></pre></div><p>è¿™æ ·å°±å¥½å¤šäº†ã€‚<code>NSCalendar</code>ï¼Œä½ è¿˜æœ‰å“ªäº›æœ¬äº‹ï¼Ÿ</p><blockquote><ul><li><code>getEra(_:year:month:day:fromDate:)</code>ï¼šæ ¹æ®ä¼ å…¥çš„æ—¥æœŸå¼•ç”¨è¿”å›çºªå…ƒï¼Œå¹´ï¼Œæœˆï¼Œæ—¥ã€‚ä¸éœ€è¦çš„å‚æ•°å¯ä»¥ä¼ å…¥ <code>nil</code>/<code>NULL</code>ã€‚</li><li><code>getEra(_:yearForWeekOfYear:weekOfYear:weekday:fromDate:)</code>: æ ¹æ®ä¼ å…¥çš„æ—¥æœŸå¼•ç”¨è¿”å›çºªå…ƒï¼Œå¹´ï¼Œå½“å¹´ç¬¬å‡ å‘¨ï¼Œæ˜ŸæœŸå‡ ã€‚ä¸éœ€è¦çš„å‚æ•°å¯ä»¥ä¼ å…¥ <code>nil</code>/<code>NULL</code>ã€‚</li><li><code>getHour(_:minute:second:nanosecond:fromDate:)</code>: æ ¹æ®ä¼ å…¥çš„æ—¥æœŸå¼•ç”¨è¿”å›æ—¶é—´ä¿¡æ¯ï¼Œç„¶å <code>nil</code>/<code>NULL</code> å·´æ‹‰å·´æ‹‰, ä½ æ‡‚çš„ã€‚</li></ul></blockquote><p><code>NSDateComponents</code>ï¼Œåˆšæ‰æˆ‘æ˜¯é€—ä½ ç©å‘¢ï¼Œæˆ‘æ”¶å›å‰é¢åæ§½ä½ çš„è¯ã€‚ä¸‹é¢è¿˜æœ‰ä¸å°‘å±äºä½ çš„æ–¹æ³•ï¼š</p><blockquote><ul><li><code>componentsInTimeZone(_:fromDate:)</code>: æ ¹æ®ä¼ å…¥çš„çš„æ—¥æœŸå’Œæ—¶åŒºè¿”å›ä¸€ä¸ª <code>NSDateComponents</code> å®ä¾‹ã€‚</li><li><code>components(_:fromDateComponents:toDateComponents:options:)</code>: è¿”å›ä¸¤ä¸ª <code>NSDateComponents</code> å®ä¾‹é—´çš„å·®å¼‚ã€‚å¦‚æœæœ‰æœªèµ‹å€¼çš„ç»„ä»¶ï¼Œè¯¥æ–¹æ³•ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼ å…¥çš„å®ä¾‹è‡³å°‘å¾—è®¾ç½®äº†å¹´å±æ€§ã€‚optionså‚æ•°æš‚æ—¶æ²¡æœ‰ç”¨ï¼Œä¼  <code>nil</code>/<code>0</code> å°±è¡Œã€‚</li></ul></blockquote><h2 id=æ—¥æœŸæ¯”è¾ƒ>æ—¥æœŸæ¯”è¾ƒ</h2><p>è™½ç„¶ç›´æ¥æ¯”è¾ƒ <code>NSDate</code> æ˜¯ä»¶æŒºç®€å•çš„äº‹ï¼Œä½†ä¸€äº›æ›´æœ‰æ„ä¹‰çš„æ¯”è¾ƒå¯èƒ½å˜å¾—æƒŠäººçš„å¤æ‚ã€‚ä¸¤ä¸ª <code>NSDate</code> å®ä¾‹æ˜¯åŒä¸€å¤©ï¼ŸåŒä¸€å°æ—¶ï¼Ÿäº¦æˆ–æ˜¯åŒä¸€å‘¨ï¼Ÿ</p><p>ç°åœ¨æ²¡å¿…è¦å‘æ„äº†ï¼Œ<code>NSCalendar</code> æä¾›äº†å¤§é‡çš„æ¯”è¾ƒæ–¹æ³•ï¼š</p><blockquote><ul><li><code>isDateInToday(_:)</code>: å¦‚æœä¼ å…¥çš„æ—¥æœŸæ˜¯å½“å¤©è¿”å› <code>true</code> ã€‚</li><li><code>isDateInTomorrow(_:)</code>: å¦‚æœä¼ å…¥çš„æ—¥æœŸæ˜¯æ˜å¤©è¿”å› <code>true</code> ã€‚</li><li><code>isDateInYesterday(_:)</code>: å¦‚æœä¼ å…¥çš„æ—¥æœŸæ˜¯æ˜¨å¤©è¿”å› <code>true</code> ã€‚</li><li><code>isDateInWeekend(_:)</code>: å¦‚æœä¼ å…¥çš„æ—¥æœŸæ˜¯å‘¨æœ«è¿”å› <code>true</code> ã€‚</li><li><code>isDate(_:inSameDayAsDate:)</code>: å¦‚æœä¸¤ä¸ª <code>NSDate</code> å®ä¾‹åœ¨åŒä¸€å¤©è¿”å› <code>true</code> - æ²¡å¿…è¦å†å»è·å–æ—¥æœŸéƒ¨ä»¶è¿›è¡Œæ¯”è¾ƒäº†ã€‚</li><li><code>isDate(_:equalToDate:toUnitGranularity:)</code>: å¦‚æœä¼ å…¥çš„æ—¥æœŸåœ¨åŒä¸€æŒ‡å®šå•ä½å†…è¿”å› <code>true</code> ã€‚è¿™æ„å‘³ç€ï¼Œä¸¤ä¸ªåœ¨åŒä¸€å‘¨çš„æ—¥æœŸå®ä¾‹è°ƒç”¨ <code>calendar.isDate(tuesday, equalToDate: thursday, toUnitGranularity: .CalendarUnitWeekOfYear)</code> æ–¹æ³•æ—¶ä¼šè¿”å› <code>true</code> ï¼Œå°±ç®—ä»–ä»¬ä¸åœ¨åŒä¸€ä¸ªæœˆä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li><li><code>compareDate(_:toDate:toUnitGranularity:)</code>: è¿”å›ä¸€ä¸ª <code>NSComparisonResult</code>ï¼Œå½“åšå’Œä»»ä½•æŒ‡å®šåŒºé—´å†…çš„æ—¥æœŸç›¸ç­‰ã€‚</li><li><code>date(_:matchesComponents:)</code>: å¦‚æœæ—¥æœŸåŒ¹é…æŒ‡å®šçš„éƒ¨ä»¶è¿”å› <code>true</code> ã€‚</li></ul></blockquote><h2 id=æ—¥æœŸæ’å€¼>æ—¥æœŸæ’å€¼</h2><p>æ¥ä¸‹æ¥è®²ä¸€äº›æ ¹æ®èµ·å§‹ç‚¹å¯»æ‰¾ä¸‹ä¸€ä¸ªæ—¥æœŸçš„æ–¹æ³•ã€‚ä½ å¯ä»¥åŸºäºä¸€ä¸ª <code>NSDateComponents</code> å®ä¾‹ï¼Œä¸€ä¸ªæŒ‡å®šçš„æ—¥æœŸç»„ä»¶ï¼Œæˆ–è€…ç‰¹å®šçš„æ—¶åˆ†ç§’ï¼Œå»æ‰¾åˆ°ä¸‹ä¸€ä¸ªï¼ˆæˆ–ä¸Šä¸€ä¸ªï¼‰æ—¥æœŸã€‚æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½éœ€è¦ä¸€ä¸ª <code>NSCalendarOptions</code> ä½å‚æ•°å»æä¾›æ›´åŠ ç²¾ç»†çš„æ§åˆ¶ï¼Œç‰¹åˆ«æ˜¯ä¸€å¼€å§‹æˆ‘ä»¬æ²¡èƒ½æ‰¾åˆ°å‡†ç¡®çš„åŒ¹é…çš„æ—¶å€™ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬ç¡®å®šå¦‚ä½•é€‰å®šä¸‹ä¸€ä¸ªæ—¥æœŸã€‚</p><h3 id=nscalendaroptions><code>NSCalendarOptions</code></h3><p>æœ€ç®€å•çš„ <code>NSCalendarOptions</code> é€‰é¡¹æ˜¯ <code>.SearchBackwards</code>ï¼Œä½¿ç”¨å®ƒæˆ‘ä»¬å¯ä»¥åœ¨æ‰€æœ‰æ–¹æ³•ä¸­è¿›è¡Œåå‘æœç´¢ã€‚åå‘æœç´¢å’Œæ­£å‘æœç´¢å¾—åˆ°çš„ç»“æœæ˜¯ç±»ä¼¼çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåå‘æœç´¢ 11 ä¹‹å‰çš„ä¸€ä¸ª <code>å°æ—¶</code> ä¼šç»™ä½ è¿”å› 11ï¼š00ï¼Œ è€Œä¸æ˜¯ 11ï¼š59ï¼Œ è™½ç„¶åœ¨åå‘æœç´¢ä¸­ 11ï¼š59 ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²æ˜¯æ¯” 11ï¼š00 â€œæ—©â€ã€‚ç¡®å®ï¼Œåå‘æœç´¢å’‹ä¸€çœ‹æ˜¯ç¬¦åˆç›´è§‰çš„ï¼Œä½†æƒ³å¤šäº†å¾ˆå¯èƒ½ä¼šæŠŠä½ ç»•è¿›å»ã€‚æ—¢ç„¶ <code>.SearchBackwards</code> æ˜¯å·²ç»æ˜¯æœ€ç®€å•çš„é€‰é¡¹ï¼Œä½ å¤§æ¦‚èƒ½æ‰çŒœåˆ°åé¢éƒ½æ˜¯äº›ä»€ä¹ˆé¬¼ã€‚</p><p>æ¥ä¸‹æ¥çš„ <code>NSCalendarOptions</code> é€‰é¡¹èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¤„ç†é‚£äº› â€œæ¶ˆå¤±â€ çš„æ—¶é—´ã€‚ä¸¾ä¸ªæœ€ç›´è§‚çš„ä¾‹å­æ¥è¯´ï¼Œå½“ä½ è¿›è¡Œä¸€ä¸ªçŸ­æ—¶çª—æœç´¢æ—¶ç¢°åˆ°å¤ä»¤æ—¶è°ƒæ•´ï¼Œæ—¶é—´æå‰äº†ä¸€ä¸ªå°æ—¶ã€‚æˆ–è€…æœç´¢æ—¶é‡åˆ°ç±»ä¼¼ 2 æœˆ æˆ–è€… 4 æœˆ 31 å·ï¼Œå®ƒéƒ½èƒ½å¸®æˆ‘ä»¬è·³è¿‡è¿™äº›ç¼ºå¤±çš„æ—¶é—´ã€‚</p><p>å½“é‡åˆ°ç¼ºå¤±çš„æ—¶é—´æ—¶ï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº† <code>NSCalendarOptions.MatchStrictly</code>ï¼Œç›¸å…³æ–¹æ³•ä¼šæ ¹æ®ä¼ å…¥çš„ç»„ä»¶å¯»æ‰¾ä¸€ä¸ª <code>ç²¾ç¡®</code> çš„åŒ¹é…ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œé‚£ä¹ˆå¿…é¡»æä¾› <code>.MatchNextTime</code>, <code>.MatchNextTimePreservingSmallerUnits</code>, å’Œ <code>.MatchPreviousTimePreservingSmallerUnits</code> ä¸­çš„ä»»ä¸€é¡¹ã€‚è¿™äº›é€‰é¡¹å†³å®šäº†å¦‚ä½•å¤„ç†æˆ‘ä»¬è¯·æ±‚æ—¶é‡åˆ°çš„æ—¶é—´ç¼ºå¤±é—®é¢˜ã€‚</p><p>è¿™ç§æƒ…å†µï¼Œå¾€å¾€ä¸€ä¾‹èƒœåƒè¨€ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// 2015 å¹´æƒ…äººèŠ‚ï¼Œæ—©ä¸Š 9 ç‚¹</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> valentines = cal.dateWithEra(<span style=color:#ae81ff>1</span>, year: <span style=color:#ae81ff>2015</span>, month: <span style=color:#ae81ff>2</span>, day: <span style=color:#ae81ff>14</span>, hour: <span style=color:#ae81ff>9</span>, minute: <span style=color:#ae81ff>0</span>, second: <span style=color:#ae81ff>0</span>, nanosecond: <span style=color:#ae81ff>0</span>)<span style=color:#f92672>!</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ä¸ºäº†æ‰¾åˆ°æœˆçš„æœ€åä¸€å¤©ï¼Œ æˆ‘è®¾ç½®ä¸€ä¸ªæ—¥æœŸç»„ä»¶ç„¶åæŠŠ `day` è®¾æˆ 31ï¼š</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> components = NSDateComponents()
</span></span><span style=display:flex><span>components.day = <span style=color:#ae81ff>31</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSDate <span style=color:#f92672>*</span>valentines <span style=color:#f92672>=</span> [calendar dateWithEra:<span style=color:#ae81ff>1</span> year:<span style=color:#ae81ff>2015</span> month:<span style=color:#ae81ff>2</span> day:<span style=color:#ae81ff>14</span> hour:<span style=color:#ae81ff>9</span> minute:<span style=color:#ae81ff>0</span> second:<span style=color:#ae81ff>0</span> nanosecond:<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>NSDateComponents <span style=color:#f92672>*</span>components <span style=color:#f92672>=</span> [[NSDateComponents alloc] init];
</span></span><span style=display:flex><span>components.day <span style=color:#f92672>=</span> <span style=color:#ae81ff>31</span>;
</span></span></code></pre></div><p>ä½¿ç”¨ç²¾ç¡®åŒ¹é…ä¼šåœ¨ä¸‰æœˆæ‰¾åˆ°ä¸‹ä¸ª <code>31</code> å·ï¼Œå¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>calendar.nextDateAfterDate(valentines, matchingComponents: components, options: .MatchStrictly)
</span></span><span style=display:flex><span><span style=color:#75715e>// Mar 31, 2015, 12:00 AM</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSDate <span style=color:#f92672>*</span>date <span style=color:#f92672>=</span> [calendar nextDateAfterDate:valentines matchingComponents:components options:NSCalendarMatchStrictly];
</span></span><span style=display:flex><span><span style=color:#75715e>// Mar 31, 2015, 12:00 AM
</span></span></span></code></pre></div><p>ä¸ä½¿ç”¨ç²¾ç¡®åŒ¹é…çš„è¯ï¼Œ<code>nextDateAfterDate</code> æ–¹æ³•ä¼šåœ¨æ‰¾åˆ°åŒ¹é…çš„æŒ‡å®šå¤©æ•°å‰å°±åœ¨äºŒæœˆåº•åœäº†ä¸‹æ¥ï¼Œç„¶ååœ¨ä¸‹ä¸ªæœˆç»§ç»­å¯»æ‰¾ã€‚ å¯è§ï¼Œä½ æ‰€æä¾›çš„é€‰é¡¹å†³å®šäº†æœ€ç»ˆè¿”å›çš„å…·ä½“æ—¥æœŸã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä½¿ç”¨ <code>.MatchNextTime</code> é€‰é¡¹æ‰¾åˆ°ä¸‹ä¸€ä¸ªåˆé€‚çš„æ—¥å­ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>calendar.nextDateAfterDate(valentines, matchingComponents: components, options: .MatchNextTime)
</span></span><span style=display:flex><span><span style=color:#75715e>// Mar 1, 2015, 12:00 AM</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>date <span style=color:#f92672>=</span> [calendar nextDateAfterDate:valentines matchingComponents:components options:NSCalendarMatchNextTime];
</span></span><span style=display:flex><span><span style=color:#75715e>// Mar 1, 2015, 12:00 AM
</span></span></span></code></pre></div><p>ç±»ä¼¼çš„ï¼Œå½“ä½¿ç”¨ <code>.MatchNextTimePreservingSmallerUnits</code> é€‰é¡¹æ—¶ä¼šæ‰¾åˆ°ä¸‹ä¸€å¤©ï¼Œä½†æ˜¯æ‰€æœ‰æ¯”æŒ‡å®šå•å…ƒ <code>NSCalendarUnitDay</code> è¦å°çš„å•å…ƒä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>calendar.nextDateAfterDate(valentines, matchingComponents: components, options: .MatchNextTimePreservingSmallerUnits)
</span></span><span style=display:flex><span><span style=color:#75715e>// Mar 1, 2015, 9:00 AM</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>date <span style=color:#f92672>=</span> [calendar nextDateAfterDate:valentines matchingComponents:components options:NSCalendarMatchNextTimePreservingSmallerUnits];
</span></span><span style=display:flex><span><span style=color:#75715e>// Mar 1, 2015, 9:00 AM
</span></span></span></code></pre></div><p>æœ€åï¼Œ ä½¿ç”¨ <code>.MatchPreviousTimePreservingSmallerUnits</code> é€‰é¡¹ä¼šåœ¨ <em>å¦ä¸€ä¸ª</em> æ–¹å‘ä¸Šè§£å†³ç¼ºå¤±çš„æ—¶é—´é—®é¢˜ï¼Œ å’Œå‰é¢ä¸€æ ·ï¼Œä¿ç•™è¾ƒå°çš„å•å…ƒï¼Œç„¶åæ‰¾åˆ°åŒ¹é…çš„å‰ä¸€å¤©ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>calendar.nextDateAfterDate(valentines, matchingComponents: components, options: .MatchPreviousTimePreservingSmallerUnits)
</span></span><span style=display:flex><span><span style=color:#75715e>// Feb 28, 2015, 9:00 AM</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>date <span style=color:#f92672>=</span> [calendar nextDateAfterDate:valentines matchingComponents:components options:NSCalendarMatchPreviousTimePreservingSmallerUnits];
</span></span><span style=display:flex><span><span style=color:#75715e>// Feb 28, 2015, 9:00 AM
</span></span></span></code></pre></div><p>é™¤äº†è¿™é‡Œçš„ <code>NDateComponents</code> å¤–ï¼Œè¿˜å€¼å¾—æ³¨æ„çš„æ˜¯ <code>nextDateAfterDate</code> æ–¹æ³•æœ‰ä¸¤ç§å˜åŒ–ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// åŒ¹é…æŒ‡å®šçš„æ—¥å†å•å…ƒ</span>
</span></span><span style=display:flex><span>cal.nextDateAfterDate(valentines, matchingUnit: .CalendarUnitDay, value: <span style=color:#ae81ff>31</span>, options: .MatchStrictly)
</span></span><span style=display:flex><span><span style=color:#75715e>// March 31, 2015, 12:00 AM</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// åŒ¹é…æ—¶ï¼Œåˆ†ï¼Œç§’</span>
</span></span><span style=display:flex><span>cal.nextDateAfterDate(valentines, matchingHour: <span style=color:#ae81ff>15</span>, minute: <span style=color:#ae81ff>30</span>, second: <span style=color:#ae81ff>0</span>, options: .MatchNextTime)
</span></span><span style=display:flex><span><span style=color:#75715e>// Feb 14, 2015, 3:30 PM</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span><span style=color:#75715e>// åŒ¹é…æŒ‡å®šçš„æ—¥å†å•å…ƒ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>date <span style=color:#f92672>=</span> [calendar nextDateAfterDate:valentines matchingUnit:NSCalendarUnitDay value:<span style=color:#ae81ff>31</span> options:NSCalendarMatchStrictly];
</span></span><span style=display:flex><span><span style=color:#75715e>// March 31, 2015, 12:00 AM
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    
</span></span><span style=display:flex><span><span style=color:#75715e>// åŒ¹é…æ—¶ï¼Œåˆ†ï¼Œç§’
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>date <span style=color:#f92672>=</span> [calendar nextDateAfterDate:valentines matchingHour:<span style=color:#ae81ff>15</span> minute:<span style=color:#ae81ff>30</span> second:<span style=color:#ae81ff>0</span> options:NSCalendarMatchNextTime];
</span></span><span style=display:flex><span><span style=color:#75715e>// Feb 14, 2015, 3:30 PM
</span></span></span></code></pre></div><h3 id=æšä¸¾æ’å€¼æ—¥æœŸ>æšä¸¾æ’å€¼æ—¥æœŸ</h3><p><code>NSCalendar</code> æä¾›äº†ä¸€ä¸ªAPIå»æšä¸¾æ—¥æœŸï¼Œ æ‰€ä»¥å¤§å®¶æ²¡æœ‰å¿…è¦åå¤çš„è°ƒç”¨ <code>nextDateAfterDate</code> æ–¹æ³•ã€‚<code>enumerateDatesStartingAfterDate(_:matchingComponents:options:usingBlock:)</code> æ–¹æ³•æ ¹æ®æä¾›çš„æ—¥æœŸç»„ä»¶å’Œé€‰é¡¹ï¼Œä¾æ¬¡è·å–åŒ¹é…çš„æ—¥æœŸã€‚å¯ä»¥å°† <code>stop</code> å±æ€§è®¾ä¸º <code>true</code> å»åœæ­¢æšä¸¾ã€‚</p><p>æ¥è¯•è¯•è¿™ä¸ª <code>NSCalendarOptions</code> çš„æ–°æ–¹æ³•å§ï¼Œä¸‹é¢å±•ç¤ºäº†ä¸€ç§è·å–éšå50ä¸ªé—°å¹´çš„æ–¹æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>let</span> leapYearComponents = NSDateComponents()
</span></span><span style=display:flex><span>leapYearComponents.month = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>leapYearComponents.day = <span style=color:#ae81ff>29</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> dateCount = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>cal.enumerateDatesStartingAfterDate(NSDate(), matchingComponents: leapYearComponents, options: .MatchStrictly <span style=color:#f92672>|</span> .SearchBackwards) 
</span></span><span style=display:flex><span>{ (date: NSDate!, exactMatch: Bool, stop: UnsafeMutablePointer&lt;ObjCBool&gt;) <span style=color:#66d9ef>in</span>
</span></span><span style=display:flex><span>    println(date)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>++</span>dateCount == <span style=color:#ae81ff>50</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// .memory ç”¨æ¥è·å–ä¸€ä¸ª UnsafeMutablePointer å±æ€§çš„å€¼</span>
</span></span><span style=display:flex><span>        stop.memory = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// 2012-02-29 05:00:00 +0000</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2008-02-29 05:00:00 +0000</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2004-02-29 05:00:00 +0000</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 2000-02-29 05:00:00 +0000</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ...</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-objc data-lang=objc><span style=display:flex><span>NSDateComponents <span style=color:#f92672>*</span>leapYearComponents <span style=color:#f92672>=</span> [[NSDateComponents alloc] init];
</span></span><span style=display:flex><span>leapYearComponents.month <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>leapYearComponents.day <span style=color:#f92672>=</span> <span style=color:#ae81ff>29</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>__block</span> <span style=color:#66d9ef>int</span> dateCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>[calendar enumerateDatesStartingAfterDate:[NSDate date]
</span></span><span style=display:flex><span>                      matchingComponents:leapYearComponents
</span></span><span style=display:flex><span>                                 options:NSCalendarMatchStrictly <span style=color:#f92672>|</span> NSCalendarSearchBackwards
</span></span><span style=display:flex><span>                              usingBlock:<span style=color:#f92672>^</span>(NSDate <span style=color:#f92672>*</span>date, <span style=color:#66d9ef>BOOL</span> exactMatch, <span style=color:#66d9ef>BOOL</span> <span style=color:#f92672>*</span>stop) {
</span></span><span style=display:flex><span>    NSLog(<span style=color:#e6db74>@&#34;%@&#34;</span>, date);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>++</span>dateCount <span style=color:#f92672>==</span> <span style=color:#ae81ff>50</span>) {
</span></span><span style=display:flex><span>        <span style=color:#f92672>*</span>stop <span style=color:#f92672>=</span> YES;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}];
</span></span><span style=display:flex><span><span style=color:#75715e>// 2012-02-29 05:00:00 +0000
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 2008-02-29 05:00:00 +0000
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 2004-02-29 05:00:00 +0000
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 2000-02-29 05:00:00 +0000
</span></span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span></code></pre></div><h3 id=å¤„ç†å‘¨æœ«>å¤„ç†å‘¨æœ«</h3><p>è¦æƒ³æ‰¾å‘¨æœ«çš„è¯ï¼Œè®°ä½ä¸‹é¢ä¸¤ä¸ª <code>NSCalendar</code> æ–¹æ³•å°±è¡Œï¼š</p><blockquote><ul><li><code>nextWeekendStartDate(_:interval:options:afterDate)</code>: æ ¹æ®ä¼ å…¥çš„å‰ä¸¤ä¸ªå‚æ•°è¿”å›ä¸‹ä¸ªå‘¨æœ«çš„å¼€å§‹æ—¶é—´ä¸ªé•¿åº¦ã€‚å¦‚æœå½“å‰çš„åœ°åŒºå’Œæ—¥å†æœªæä¾›å¯¹å‘¨æœ«å±æ€§çš„æ”¯æŒï¼Œè¯¥æ–¹æ³•ä¼šè¿”å› <code>false</code> ã€‚å”¯ä¸€ç›¸å…³çš„å±æ€§æ˜¯ <code>.SearchBackwards</code>ã€‚ï¼ˆä¾‹å­åœ¨ä¸‹é¢ã€‚ï¼‰</li><li><code>rangeOfWeekendStartDate(_:interval:containingDate)</code>: æ ¹æ®ä¼ å…¥çš„å‰ä¸¤ä¸ªå‚æ•°è¿”å› <em>åŒ…å«</em> è¯¥æ—¥æœŸçš„å‘¨æœ«ã€‚å¦‚æœä¼ å…¥çš„æ—¥æœŸå¹¶ä¸åœ¨å‘¨æœ«æˆ–è€…å½“å‰çš„åœ°åŒºå’Œæ—¥å†æœªæä¾›å¯¹å‘¨æœ«å±æ€§çš„æ”¯æŒï¼Œè¯¥æ–¹æ³•ä¼šè¿”å› <code>false</code> ã€‚</li></ul></blockquote><h2 id=æœ¬åœ°åŒ–æ—¥æœŸç¬¦å·>æœ¬åœ°åŒ–æ—¥æœŸç¬¦å·</h2><p>ä¼¼ä¹æ‰€æœ‰è¿™äº›æ–°åŠŸèƒ½è¿˜ä¸å¤Ÿä¸°å¯Œä¼¼çš„ï¼Œ <code>NSCalendar</code> è¿˜æä¾›äº†ä¸€æ•´å¥—çš„æœ¬åœ°åŒ–æ—¥æœŸç¬¦å·ï¼Œç”¨æ¥å¿«é€Ÿè·å–æœˆä»½åç§°ï¼Œæ˜ŸæœŸåç§°ç­‰ç­‰ã€‚æ¯ç»„ç¬¦å·éƒ½åˆ—ä¸¾åœ¨ä¸¤ä¸ªè½´ä¸Šï¼š(1) ç¬¦å·çš„é•¿åº¦ (2) å®ƒæ˜¯ä½œä¸ºæ ‡å‡†åç§°è¿˜æ˜¯æ—¥æœŸçš„ä¸€éƒ¨åˆ†ã€‚</p><p>ç†è§£è¿™ä¸¤ä¸ªå±æ€§å¯¹æœ¬åœ°åŒ–æ¥è¯´ååˆ†çš„é‡è¦ï¼Œæœ‰äº›è¯­è¨€ï¼Œç‰¹åˆ«æ˜¯æ–¯æ‹‰å¤«è¯­è¨€ï¼Œä¼šä¾æ®ä¸åŒçš„å†…å®¹ä½¿ç”¨ä¸åŒçš„åè¯æ ¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªæ—¥æœŸè¦ä½¿ç”¨æŸä¸ª <code>standaloneMonthSymbols</code> çš„å˜ä½“ä½œä¸ºå¤´ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <code>monthSymbols</code> å»æ ¼å¼åŒ–æ—¥æœŸã€‚</p><p>ä¸‹é¢è¿™å¼ è¡¨åŒ…å«äº† <code>NSCalendar</code> æä¾›çš„æ‰€æœ‰ç¬¦å·ï¼Œä¾›å¤§å®¶é˜…è§ˆï¼Œè¯·æ³¨æ„ä¿„è¯­åˆ—ä¸­ç‹¬ç«‹ç¬¦å·çš„ä¸åŒä¹‹å¤„ï¼š</p><table><thead><tr><th>Â </th><th>en_US</th><th>ru_RU</th></tr></thead><tbody><tr><td><code>monthSymbols</code></td><td>January, February, Marchâ€¦</td><td>ÑĞ½Ğ²Ğ°Ñ€Ñ, Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ, Ğ¼Ğ°Ñ€Ñ‚Ğ°â€¦</td></tr><tr><td><code>shortMonthSymbols</code></td><td>Jan, Feb, Marâ€¦</td><td>ÑĞ½Ğ²., Ñ„ĞµĞ²Ñ€., Ğ¼Ğ°Ñ€Ñ‚Ğ°â€¦</td></tr><tr><td><code>veryShortMonthSymbols</code></td><td>J, F, M, Aâ€¦</td><td>Ğ¯, Ğ¤, Ğœ, Ğâ€¦</td></tr><tr><td><code>standaloneMonthSymbols</code></td><td>January, February, Marchâ€¦</td><td>Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ, Ğ¤ĞµĞ²Ñ€Ğ°Ğ»ÑŒ, ĞœĞ°Ñ€Ñ‚â€¦</td></tr><tr><td><code>shortStandaloneMonthSymbols</code></td><td>Jan, Feb, Marâ€¦</td><td>Ğ¯Ğ½Ğ²., Ğ¤ĞµĞ²Ñ€., ĞœĞ°Ñ€Ñ‚â€¦</td></tr><tr><td><code>veryShortStandaloneMonthSymbols</code></td><td>J, F, M, Aâ€¦</td><td>Ğ¯, Ğ¤, Ğœ, Ğâ€¦</td></tr><tr><td><code>weekdaySymbols</code></td><td>Sunday, Monday, Tuesday, Wednesdayâ€¦</td><td>Ğ²Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ, Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº, Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº, ÑÑ€ĞµĞ´Ğ°â€¦</td></tr><tr><td><code>shortWeekdaySymbols</code></td><td>Sun, Mon, Tue, Wedâ€¦</td><td>Ğ²Ñ, Ğ¿Ğ½, Ğ²Ñ‚, ÑÑ€â€¦</td></tr><tr><td><code>veryShortWeekdaySymbols</code></td><td>S, M, T, Wâ€¦</td><td>Ğ²Ñ, Ğ¿Ğ½, Ğ²Ñ‚, ÑÑ€â€¦</td></tr><tr><td><code>standaloneWeekdaySymbols</code></td><td>Sunday, Monday, Tuesday, Wednesdayâ€¦</td><td>Ğ’Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ, ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº, Ğ’Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº, Ğ¡Ñ€ĞµĞ´Ğ°â€¦</td></tr><tr><td><code>shortStandaloneWeekdaySymbols</code></td><td>Sun, Mon, Tue, Wedâ€¦</td><td>Ğ’Ñ, ĞŸĞ½, Ğ’Ñ‚, Ğ¡Ñ€â€¦</td></tr><tr><td><code>veryShortStandaloneWeekdaySymbols</code></td><td>S, M, T, Wâ€¦</td><td>Ğ’, ĞŸ, Ğ’, Ğ¡â€¦</td></tr><tr><td><code>AMSymbol</code></td><td>AM</td><td>AM</td></tr><tr><td><code>PMSymbol</code></td><td>PM</td><td>PM</td></tr><tr><td><code>quarterSymbols</code></td><td>1st quarter, 2nd quarter, 3rd quarter, 4th quarter</td><td>1-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ», 2-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ», 3-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ», 4-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»</td></tr><tr><td><code>shortQuarterSymbols</code></td><td>Q1, Q2, Q3, Q4</td><td>1-Ğ¹ ĞºĞ²., 2-Ğ¹ ĞºĞ²., 3-Ğ¹ ĞºĞ²., 4-Ğ¹ ĞºĞ².</td></tr><tr><td><code>standaloneQuarterSymbols</code></td><td>1st quarter, 2nd quarter, 3rd quarter, 4th quarter</td><td>1-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ», 2-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ», 3-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ», 4-Ğ¹ ĞºĞ²Ğ°Ñ€Ñ‚Ğ°Ğ»</td></tr><tr><td><code>shortStandaloneQuarterSymbols</code></td><td>Q1, Q2, Q3, Q4</td><td>1-Ğ¹ ĞºĞ²., 2-Ğ¹ ĞºĞ²., 3-Ğ¹ ĞºĞ²., 4-Ğ¹ ĞºĞ².</td></tr><tr><td><code>eraSymbols</code></td><td>BC, AD</td><td>Ğ´Ğ¾ Ğ½. Ñ., Ğ½. Ñ.</td></tr><tr><td><code>longEraSymbols</code></td><td>Before Christ, Anno Domini</td><td>Ğ´Ğ¾ Ğ½.Ñ., Ğ½.Ñ.</td></tr></tbody></table><blockquote><p><em>æ³¨ï¼š</em> è¿™äº›ç¬¦å·åœ¨ <code>NSDateFormatter</code> ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p></blockquote><h2 id=ä½ çš„æ¯å‘¨swiftåŒ–>ä½ çš„æ¯å‘¨SwiftåŒ–</h2><p>åœ¨ NSHipster æˆ‘ä»¬è®¨è®º API çš„æ—¶å€™ä¼šæœ‰ä¸€äº› Swift çš„ç‰ˆæœ¬ï¼Œè¿™æ¸æ¸å˜æˆäº†æˆ‘ä»¬çš„ç‰¹è‰²ã€‚ ç”šè‡³æ˜¯åœ¨è®¨è®ºè¿™äº›å…¨æ–°çš„ <code>NSCalendar</code> APIçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå‰é¢çš„æ–¹æ³•å†æ‰“ç£¨ä¸€ä¸‹ï¼Œå°† <code>UnsafeMutablePointer</code> å‚æ•°æ›¿æ¢ä¸ºæ›´ç¬¦åˆè¯­è¨€ä¹ æƒ¯çš„å…ƒç»„è¿”å›å€¼ã€‚</p><p>è¿™é‡Œç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ <code>NSCalendar</code> æ‰©å±•é›†ï¼ˆ<a href=https://gist.github.com/natecook1000/43976a66fa04e3fdb3c7> ç‚¹ æˆ‘ </a>ï¼‰ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬ä½¿ç”¨è®¿é—®æ—¥æœŸç»„ä»¶å’Œæœç´¢å‘¨æœ«æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä¸ç”¨æŠŠå€¼ä¼ è¿›åˆä¼ å‡ºã€‚æ¯”å¦‚ï¼Œè·å–æŒ‡å®šçš„æ—¥æœŸç»„ä»¶å°±å˜å¾—ç®€å•çš„å¤šï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// built-in</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> hour = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> minute = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>calendar.getHour(&amp;hour, minute: &amp;minute, second: <span style=color:#66d9ef>nil</span>, nanosecond: <span style=color:#66d9ef>nil</span>, fromDate: NSDate())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// SwiftåŒ–</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> (hour, minute, <span style=color:#66d9ef>_</span>, <span style=color:#66d9ef>_</span>) = calendar.getTimeFromDate(NSDate())
</span></span></code></pre></div><p>è·å–ä¸‹ä¸€ä¸ªå‘¨æœ«çš„æ—¥æœŸèŒƒå›´ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// built-in</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> startDate: NSDate?
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> interval: NSTimeInterval = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> success = cal.nextWeekendStartDate(&amp;startDate, interval: &amp;interval, options: <span style=color:#66d9ef>nil</span>, afterDate: NSDate())
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> success, <span style=color:#66d9ef>let</span> startDate = startDate {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;start: </span><span style=color:#e6db74>\(</span>startDate<span style=color:#e6db74>)</span><span style=color:#e6db74>, interval: </span><span style=color:#e6db74>\(</span>interval<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// SwiftåŒ–</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> nextWeekend = cal.nextWeekendAfterDate(NSDate()) {
</span></span><span style=display:flex><span>    println(<span style=color:#e6db74>&#34;start: </span><span style=color:#e6db74>\(</span>nextWeekend.startDate<span style=color:#e6db74>)</span><span style=color:#e6db74>, interval: </span><span style=color:#e6db74>\(</span>nextWeekend.interval<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><p>è¿™ä¸‹å¤æ‚çš„æ—¥å†è®¡ç®—å“ä¸åˆ°ä½ ä»¬äº†ã€‚æœ‰äº† <code>NSCalendar</code> æä¾›çš„è¿™äº›æ–°åŠŸèƒ½ï¼Œä½ å¯ä»¥å¾ˆå¿«çš„è§£å†³ä½ ç¢°åˆ°çš„é—®é¢˜ã€‚</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2015-03-16 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Nate Cook ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Cocoa target=_blank>Cocoa</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>