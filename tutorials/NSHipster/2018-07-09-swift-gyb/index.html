<!doctype html><html><head><meta charset=utf-8><meta http-equiv=content-language content="zh-cn"><meta name=viewport content="width=device-width,initial-scale=.5"><title>Swift GYB</title>
<link rel="shortcut icon" type=image/x-icon href=/media/shortcuticon.png><meta name=keywords content="Swift GYB,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><meta name=description content="Swift GYB,macOS,C++,Cocoa,Objective-C,Swift,NSHipster"><script>if(document.domain=="autoptr.pages.dev"){var url=window.location.href,url=url.replace(/autoptr+\.pages+\.dev/g,"www.autoptr.top");window.location.href=url}</script><script src=/jscss/ajax/libs/anchor-js/4.2.0/anchor.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){anchors.options={visible:"hover",placement:"left",icon:"ğŸŒœ"},anchors.add()})</script><link rel=stylesheet href=/css/main.css><link href=/jscss/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css rel=stylesheet><script src=/jscss/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><style type=text/css>body{background-color:#fbf6ec}</style><script>top.location!=self.location&&(top.location=self.location)</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?746e6e6d14d22526bf274c834750df53",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script></head><body><script>window.addEventListener("resize",resizeThrottler,!1);var resizeTimeout;function resizeThrottler(){resizeTimeout||(resizeTimeout=setTimeout(function(){resizeTimeout=null,actualResizeHandler()},66))}actualResizeHandler();function actualResizeHandler(){/mobile/i.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?document.body.classList.add("mobile"):document.body.classList.remove("mobile")}</script><a id=mysite-singlepage-top></a><div class=inner style=position:relative><div class=blog-post><h1 class=blog-title align=center><span class=btContent>Swift GYB</span><span class=btRight><span title="Author Â· ä½œè€…" class=author>Mattt</span> <span title="Translator Â· ç¿»è¯‘" class=author>Bei Li</span> <a href=https://github.com/NSHipster/articles-zh-Hans style=color:#007cd5 title="Related or Quoted Post Â· å…³è”æˆ–è½¬è½½å¼•ç”¨çš„æ–‡ç« " target=_blank rel="nofollow noopener noreferrer">&#128681;</a><a href=/tutorials/NSHipster/ title="Back to Topics Â· å›ä¸»é¢˜é¡µ">&#127793;</a></span></h1><p>ã€Œboilerplateã€è¿™ä¸ªè¯å¯ä»¥è¿½æº¯åˆ°å°åˆ·åª’ä½“æ—©æœŸã€‚æœ¬åœ°å°æŠ¥éœ€è¦å†…å®¹æ¥å¡«æ»¡ä»–ä»¬æŠ¥çº¸çš„ç‰ˆé¢ï¼Œä½†åˆé€šå¸¸æ²¡æœ‰è¶³å¤Ÿçš„å†…å®¹ï¼Œæ‰€ä»¥å¾ˆå¤šæœ¬åœ°å°æŠ¥é€šè¿‡å¤§å‹å°åˆ·é›†å›¢æ¥è·å–ç¨³å®šçš„å†…å®¹ï¼Œæ¥å¡«å……æŠ¥çº¸çš„æœ€åå‡ é¡µã€‚è¿™äº›å†…å®¹é€šå¸¸ç”±é¢„åˆ¶çš„å°æ¿ï¼ˆplateï¼‰æä¾›ï¼Œè¿™äº›å°æ¿é•¿çš„å¾ˆåƒæ›¾ç»ç”¨æ¥åˆ¶ä½œé”…ç‚‰ï¼ˆboilerï¼‰çš„å·èµ·æ¥çš„é’¢æ¿ã€‚å› æ­¤æœ‰äº†ã€Œboiler-plateã€è¿™ä¸ªè¯è¯­ã€‚</p><p>ç»è¿‡è½¬å–»ï¼Œè¿™äº›å†…å®¹æœ¬èº«è¢«ç§°ä½œã€Œboilerplateã€ï¼Œå¹¶ä¸”è¿™ä¸ªæ¦‚å¿µè¢«æ‹“å±•åˆ°åŒ…æ‹¬æ ‡å‡†åŒ–å’Œå…¬å¼åŒ–çš„æ–‡æœ¬ã€‚è¿™äº›æ–‡æœ¬å‡ºç°åœ¨åˆåŒå’Œå¥—ç”¨ä¿¡å‡½ï¼ˆform letterï¼‰é‡Œï¼Œä»¥åŠä¸æœ¬å‘¨ NSHipster æ–‡ç« æœ€ç›¸å…³çš„ä¸œè¥¿â€”â€”ä»£ç ã€‚</p><hr><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„ä»£ç éƒ½é‚£ä¹ˆå…‰é²œäº®ä¸½ï¼Œå…¶å®å¾ˆå¤šå·¥ä½œéƒ½æ˜¯é€šè¿‡åº•å±‚çš„ boilerplate æ¥å·¥ä½œçš„ã€‚</p><p>Swift æ ‡å‡†åº“ä¹Ÿæ˜¯è¿™æ ·ï¼Œå®ƒæœ‰è¯¸å¦‚ç¬¦å·æ•´æ•°ï¼ˆ<code>Int8</code>, <code>Int16</code>, <code>Int32</code>, <code>Int64</code>ï¼‰è¿™æ ·çš„ç±»å‹å®¶æ—ï¼Œå…¶ä¸­å„ä¸ªç±»å‹çš„å®ç°é™¤å¤§å°ä¹‹å¤–æ²¡æœ‰å…¶ä»–ä¸åŒã€‚</p><p>æ‹·è´ç²˜è´´å¯ä»¥ä½œä¸ºä¸€æ¬¡æ€§çš„è§£å†³æ–¹æ¡ˆï¼ˆå‡è®¾ä½ ç¬¬ä¸€æ¬¡å°±åšçš„æ²¡æœ‰é”™è¯¯ï¼‰ï¼Œä½†è¿™ç§æ–¹æ³•æ— æ³•ç»§ç»­ç»´æŠ¤ã€‚æ¯å½“ä½ æƒ³ä¿®æ”¹è¿™äº›æ´¾ç”Ÿçš„å®ç°ï¼Œéƒ½ä¼šæœ‰å¼•å…¥ç»†å¾®ä¸ä¸€è‡´çš„é£é™©ï¼Œä¹…è€Œä¹…ä¹‹å¯¼è‡´è¿™äº›å®ç°å˜å¾—ä¸ç›¸åŒâ€”â€”æœ‰ä¸€ç‚¹ç±»ä¼¼äºåœ°çƒä¸Šç”Ÿå‘½çš„å¤šæ ·æ€§æ˜¯å› ä¸ºåŸºå› éšæœºçªå˜å¯¼è‡´çš„ä¸€æ ·ã€‚</p><p>ä» C++ æ¨¡æ¿å’Œ Lisp å®åˆ° <code>eval</code> å’Œ C é¢„å¤„ç†å™¨æŒ‡ä»¤ï¼Œä¸åŒçš„è¯­è¨€ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ¥åº”å¯¹è¿™ä¸ªé—®é¢˜ã€‚</p><p>Swift æ²¡æœ‰å®ç³»ç»Ÿï¼Œå¹¶ä¸”å› ä¸ºæ ‡å‡†åº“æœ¬èº«æ˜¯ä½¿ç”¨ Swift ç¼–å†™çš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿä¸èƒ½åˆ©ç”¨ C++ å…ƒç¼–ç¨‹çš„èƒ½åŠ›ã€‚å› æ­¤ï¼ŒSwift çš„ç»´æŠ¤è€…ä»¬ä½¿ç”¨ä¸€ä¸ªå«ä½œ <a href=https://github.com/apple/swift/blob/master/utils/gyb.py>gyb.py</a> çš„ Python è„šæœ¬å’Œä¸€äº›æ¨¡æ¿æ ‡ç­¾æ¥ç”Ÿæˆä»£ç ã€‚</p><blockquote><p>GYB æ˜¯ã€ŒGenerate Your Boilerplateã€çš„ç¼©å†™ï¼Œå‚è€ƒäº†å¦ä¸€ä¸ª Python å·¥å…· <a href=https://gyp.gsrc.io>GYP</a> å³ã€ŒGenerate Your Projectsã€ã€‚</p></blockquote><h2 id=gyb-æ˜¯å¦‚ä½•å·¥ä½œçš„>GYB æ˜¯å¦‚ä½•å·¥ä½œçš„</h2><p>GYB æ˜¯ä¸€ä¸ªå…è®¸ä½ ä½¿ç”¨ Python ä»£ç æ¥åšå˜é‡æ›¿æ¢å’Œæµç¨‹æ§åˆ¶çš„è½»é‡æ¨¡æ¿ç³»ç»Ÿï¼š</p><ul><li><code>%{ &lt;#code#> }</code> æ‰§è¡Œä¸€æ®µ Python ä»£ç </li><li><code>% &lt;#code#>: ... % end</code> è¿›è¡Œæµç¨‹æ§åˆ¶</li><li><code>${ &lt;#code#> }</code> ä¼šè¢«æ›¿æ¢ä¸ºè¡¨è¾¾å¼çš„ç»“æœ</li></ul><p>å…¶ä»–è¾“å…¥çš„æ–‡æœ¬åˆ™ä¸ä¼šæ”¹å˜ã€‚</p><p><a href=https://github.com/apple/swift/blob/master/stdlib/public/core/Codable.swift.gyb>Codable.swift.gyb</a> æ˜¯ GYB ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚åœ¨æ–‡ä»¶çš„é¡¶éƒ¨ï¼ŒåŸºç¡€ <code>Codable</code> ç±»å‹è¢«èµ‹å€¼ç»™ä¸€ä¸ªå®ä¾‹å˜é‡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>%</span>{
</span></span><span style=display:flex><span>codable_types <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;Bool&#39;</span>, <span style=color:#e6db74>&#39;String&#39;</span>, <span style=color:#e6db74>&#39;Double&#39;</span>, <span style=color:#e6db74>&#39;Float&#39;</span>,
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#39;Int&#39;</span>, <span style=color:#e6db74>&#39;Int8&#39;</span>, <span style=color:#e6db74>&#39;Int16&#39;</span>, <span style=color:#e6db74>&#39;Int32&#39;</span>, <span style=color:#e6db74>&#39;Int64&#39;</span>,
</span></span><span style=display:flex><span>                 <span style=color:#e6db74>&#39;UInt&#39;</span>, <span style=color:#e6db74>&#39;UInt8&#39;</span>, <span style=color:#e6db74>&#39;UInt16&#39;</span>, <span style=color:#e6db74>&#39;UInt32&#39;</span>, <span style=color:#e6db74>&#39;UInt64&#39;</span>]
</span></span><span style=display:flex><span>}<span style=color:#f92672>%</span>
</span></span></code></pre></div><p>ä¹‹åï¼Œåœ¨ <code>SingleValueEncodingContainer</code> çš„å®ç°ä¸­ï¼Œè¿™äº›ç±»å‹è¢«ç”¨æ¥å¾ªç¯ç”Ÿæˆåè®®è¦æ±‚çš„æ–¹æ³•å£°æ˜ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>for</span> type <span style=color:#f92672>in</span> codable_types:
</span></span><span style=display:flex><span>  mutating func encode(_ value: <span style=color:#960050;background-color:#1e0010>$</span>{type}) throws
</span></span><span style=display:flex><span><span style=color:#f92672>%</span> end
</span></span></code></pre></div><p>æ‰§è¡Œè¿™ä¸ª GYB æ¨¡æ¿ä¼šå¾—åˆ°ä¸‹é¢è¿™äº›å£°æ˜ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Bool) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: String) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Double) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Float) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Int) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Int8) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Int16) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Int32) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: Int64) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: UInt) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: UInt8) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: UInt16) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: UInt32) <span style=color:#66d9ef>throws</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>mutating</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>encode</span>(<span style=color:#66d9ef>_</span> value: UInt64) <span style=color:#66d9ef>throws</span>
</span></span></code></pre></div><p>è¿™ä¸ªæ¨¡å¼çš„ä½¿ç”¨è´¯ç©¿æ•´ä¸ªæ–‡ä»¶ï¼Œç”¨æ¥ç»™åƒ <code>encode(_:forKey:)</code>ï¼Œ<code>decode(_:forKey:)</code> å’Œ <code>decodeIfPresent(_:forKey:)</code> è¿™æ ·çš„æ–¹æ³•ç”Ÿæˆç›¸ä¼¼ã€å…¬å¼åŒ–çš„å£°æ˜ã€‚GYB å‡å°‘äº†å‡ åƒè¡Œ boilerplate ä»£ç ï¼š</p><pre tabindex=0><code class=language-terminal data-lang=terminal>$ wc -l Codable.swift.gyb
2183 Codable.swift.gyb
$ wc -l Codable.swift
5790 Codable.swift
</code></pre><blockquote><p>æ³¨æ„ï¼šæœ‰æ•ˆçš„ GYB æ¨¡æ¿ä¸ä¸€å®šèƒ½ç”Ÿæˆæœ‰æ•ˆçš„ Swift ä»£ç ã€‚å¦‚æœåœ¨æ´¾ç”Ÿçš„æ–‡ä»¶ä¸­å‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œå¯èƒ½å°†å¾ˆéš¾æŸ¥æ˜æ ¹æœ¬åŸå› ã€‚</p></blockquote><h2 id=åœ¨-xcode-ä¸­ä½¿ç”¨-gyb>åœ¨ Xcode ä¸­ä½¿ç”¨ GYB</h2><p>GYB å¹¶ä¸æ˜¯ Xcode æ ‡å‡†å·¥å…·é“¾çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½ å¹¶ä¸èƒ½åœ¨ <code>xcrun</code> é‡Œæ‰¾åˆ°å®ƒã€‚ä½ å¯ä»¥ä¸‹è½½æºç å¹¶ä½¿ç”¨ <code>chmod</code> å‘½ä»¤ä½¿ <code>gyb</code> æˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆmacOS é»˜è®¤å®‰è£…çš„ Python åº”è¯¥æ˜¯å¯ä»¥è¿è¡Œ <code>gyb</code> çš„ï¼‰ï¼š</p><pre tabindex=0><code class=language-terminal data-lang=terminal>$ wget https://github.com/apple/swift/raw/master/utils/gyb
$ wget https://github.com/apple/swift/raw/master/utils/gyb.py
$ chmod +x gyb
</code></pre><p>å°†è¿™äº›å‘½ä»¤æ”¾ç½®åˆ°èƒ½è¢«ä½ çš„ Xcode é¡¹ç›®è®¿é—®åˆ°ï¼Œä½†ä¸æºä»£ç æ–‡ä»¶ä¸åŒçš„åœ°æ–¹ã€‚æ¯”å¦‚è¯´é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¸€ä¸ªå« <code>Vendor</code> çš„ç›®å½•ä¸‹ã€‚</p><p>åœ¨ Xcode ä¸­ï¼Œç‚¹å‡» project navigator ä¸­è“è‰²çš„é¡¹ç›®æ–‡ä»¶å›¾æ ‡ï¼Œé€‰æ‹©é¡¹ç›®ä¸­æ­£åœ¨ä½¿ç”¨çš„ targetï¼Œå¹¶å»åˆ°ã€ŒBuild Phasesã€é¢æ¿ã€‚åœ¨é¢æ¿é¡¶éƒ¨ï¼Œä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥ç‚¹å‡»çš„ + ç¬¦å·ï¼Œç”¨æ¥å¢åŠ æ–°çš„ç¼–è¯‘é˜¶æ®µã€‚é€‰æ‹©ã€ŒAdd New Run Script Phaseã€ï¼Œå¹¶å°†ä¸‹é¢çš„ä»£ç è¾“å…¥ç¼–è¾‘å™¨ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>find . -name <span style=color:#e6db74>&#39;*.gyb&#39;</span> |                                               <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    <span style=color:#66d9ef>while</span> read file; <span style=color:#66d9ef>do</span>                                              <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>        ./path/to/gyb --line-directive <span style=color:#e6db74>&#39;&#39;</span> -o <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>file%.gyb<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>; <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><blockquote><p>è¯·ç¡®ä¿ GYB ç¼–è¯‘é˜¶æ®µæ”¾ç½®åœ¨ã€ŒCompile Sourcesã€ä¹‹å‰ã€‚</p></blockquote><p>ç°åœ¨å½“ä½ ç¼–è¯‘ä½ çš„é¡¹ç›®æ—¶ï¼Œä»»ä½•æ–‡ä»¶æ‰©å±•åä¸º <code>.swift.gyb</code> çš„æ–‡ä»¶ä¼šè¢« GYB æ‰§è¡Œå¹¶äº§å‡º <code>.swift</code> æ–‡ä»¶ï¼Œä¹‹åä¸é¡¹ç›®ä¸­å…¶ä»–çš„ä»£ç ä¸€èµ·ç¼–è¯‘ã€‚</p><h2 id=ä½•æ—¶ä½¿ç”¨-gyb>ä½•æ—¶ä½¿ç”¨ GYB</h2><p>å’Œå…¶ä»–å·¥å…·ä¸€æ ·ï¼ŒçŸ¥é“ä½•æ—¶ä½¿ç”¨ GYB ä¸çŸ¥é“å¦‚ä½•ä½¿ç”¨ GYB åŒæ ·é‡è¦ã€‚ä¸‹é¢æœ‰ä¸€äº›ä½ å¯èƒ½ä¼šæƒ³è¦ä½¿ç”¨ GYB çš„ä¾‹å­ã€‚</p><h3 id=ç”Ÿæˆå…¬å¼åŒ–ä»£ç >ç”Ÿæˆå…¬å¼åŒ–ä»£ç </h3><p>ä½ æ˜¯å¦ä¸ºé›†åˆæˆ–è€…åºåˆ—ä¸­çš„å…ƒç´ å¤åˆ¶ç²˜è´´ç›¸åŒçš„ä»£ç ï¼Ÿfor-in å¾ªç¯å’Œå˜é‡æ›¿æ¢å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>å’Œä¹‹å‰åœ¨ <code>Codable</code> çš„ä¾‹å­é‡Œçœ‹åˆ°çš„ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨ GYB æ¨¡æ¿æ–‡ä»¶çš„é¡¶éƒ¨å£°æ˜ä¸€ä¸ªé›†åˆï¼Œç„¶åè¿­ä»£è¿™ä¸ªé›†åˆæ¥ç”Ÿæˆç±»å‹ã€å±æ€§æˆ–è€…æ–¹æ³•å£°æ˜ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>%</span>{ abilities <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;strength&#39;</span>, <span style=color:#e6db74>&#39;dexterity&#39;</span>, <span style=color:#e6db74>&#39;constitution&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;intelligence&#39;</span>, <span style=color:#e6db74>&#39;wisdom&#39;</span>, <span style=color:#e6db74>&#39;charisma&#39;</span>]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Character</span> {
</span></span><span style=display:flex><span>  var name: String
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>for</span> ability <span style=color:#f92672>in</span> abilities:
</span></span><span style=display:flex><span>  var <span style=color:#960050;background-color:#1e0010>$</span>{type}: Int
</span></span><span style=display:flex><span><span style=color:#f92672>%</span> end
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¤§é‡çš„é‡å¤ä»£ç ä¹Ÿå¸¸å¸¸æ„å‘³ç€æˆ–è®¸èƒ½æœ‰æ›´å¥½çš„è§£å†³æ–¹æ³•ã€‚åƒåè®®æ‰©å±•å’Œæ³›å‹è¿™äº›è¯­è¨€å†…ç½®çš„åŠŸèƒ½å¯ä»¥æ¶ˆç­å¤§é‡çš„é‡å¤ä»£ç ï¼Œæ³¨æ„æ˜¯å¦å¯ä»¥ä½¿ç”¨è¿™äº›åŠŸèƒ½è€Œä¸æ˜¯ä¸€æ˜§çš„ä½¿ç”¨ GYBã€‚</p><h3 id=ä»æ•°æ®æ´¾ç”Ÿä»£ç >ä»æ•°æ®æ´¾ç”Ÿä»£ç </h3><p>ä½ æ˜¯å¦åœ¨æ ¹æ®æ•°æ®æºæ¥ç¼–å†™ä»£ç ï¼Ÿé‚£ä¹ˆå°è¯•å°† GYB åŠ å…¥å¼€å‘è¿‡ç¨‹å§ï¼</p><p>GYB æ–‡ä»¶å¯ä»¥å¯¼å…¥åƒ <code>json</code>ï¼Œ<code>xml</code> å’Œ <code>csv</code> è¿™äº› Python åŒ…ï¼Œä½ å‡ ä¹å¯ä»¥è§£æä»»ä½•ä½ é‡åˆ°çš„æ–‡ä»¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>%</span>{ <span style=color:#f92672>import</span> csv }
</span></span><span style=display:flex><span><span style=color:#f92672>%</span> <span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;path/to/file.csv&#39;</span>) <span style=color:#66d9ef>as</span> file:
</span></span><span style=display:flex><span>    <span style=color:#f92672>%</span> <span style=color:#66d9ef>for</span> row <span style=color:#f92672>in</span> csv<span style=color:#f92672>.</span>DictReader(file):
</span></span></code></pre></div><p>å¦‚æœä½ æƒ³çœ‹çœ‹è¿™æ–¹é¢çš„å®è·µï¼Œçœ‹çœ‹ <a href=https://github.com/Flight-School/Money/blob/master/Sources/Money/Currency.swift.gyb>Currencies.swift.gyb</a>ï¼Œå®ƒç»™ <a href=https://www.iso.org/iso-4217-currency-codes.html>ISO 4217</a> æ ‡å‡†å®šä¹‰çš„æ¯ä¸ªè´§å¸ç”Ÿæˆå¯¹åº”çš„ Swift æšä¸¾ç±»å‹ã€‚</p><blockquote><p>ä¸ºäº†ä¿æŒç¼–è¯‘é€Ÿåº¦å’Œç¡®å®šæ€§ï¼Œåº”è¯¥å°†æ•°æ®ä¸‹è½½åˆ°æ–‡ä»¶å¹¶æ”¾å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œè€Œä¸æ˜¯åœ¨ GYB æ–‡ä»¶ä¸­æ‰§è¡Œ HTTP è¯·æ±‚æˆ–è€…æ•°æ®åº“æŸ¥è¯¢ã€‚</p></blockquote><p>ä»£ç ç”Ÿæˆè®©ä»£ç å’Œç›¸å…³æ ‡å‡†ä¹‹é—´ä¿æŒåŒæ­¥å˜å¾—ç®€å•ã€‚åªéœ€è¦æ›´æ–°æ•°æ®æ–‡ä»¶å†é‡æ–°è¿è¡Œ GYB å°±å¯ä»¥äº†ã€‚</p><hr><p>Swift æœ€è¿‘é€šè¿‡ç¼–è¯‘å™¨åˆæˆä»£ç å‡å°‘äº†å¾ˆå¤š boilerplate ä»£ç , åƒ 4.0 ä¸­çš„ <code>Encodable</code> å’Œ <code>Decodable</code>ï¼Œ4.1 ä¸­çš„ <code>Equatable</code> å’Œ <code>Hashable</code>ï¼Œ4.2 ä¸­çš„ <code>CaseIterable</code>ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œå¯¹äºå…¶ä»–ä»£ç æ¥è¯´ï¼ŒGYB æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„ä»£ç ç”Ÿæˆå·¥å…·ã€‚</p><blockquote><p><a href=https://github.com/krzysztofzablocki/Sourcery>Sourcery</a> æ˜¯ç¤¾åŒºä¸­å¦ä¸€ä¸ªå¥½ç”¨çš„å·¥å…·ï¼Œå®ƒè®©ä½ å¯ä»¥ä½¿ç”¨ Swiftï¼ˆé€šè¿‡ <a href=https://github.com/stencilproject/Stencil>Stencil</a>ï¼‰è€Œä¸æ˜¯ Python æ¥ç¼–å†™æ¨¡æ¿ã€‚</p></blockquote><p>ã€ŒDon&rsquo;t Repeat Yourselfã€å¯èƒ½æ˜¯ç¼–ç¨‹ä¸­çš„ç¾å¾·ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™ä½ éœ€è¦é‡å¤ä¸€äº›äº‹æƒ…æ¥å®Œæˆå·¥ä½œã€‚å½“ä½ éœ€è¦é‡å¤çš„æ—¶å€™ï¼Œä½ å°†ä¼šæ„Ÿè°¢æœ‰åƒ GYB è¿™æ ·çš„å·¥å…·æ¥å¸®åŠ©ä½ ã€‚</p><hr><p>é™¤é<a href=https://nshipster.cn/ target=_blank>å¦æœ‰å£°æ˜</a>ï¼Œæœ¬æ–‡é‡‡ç”¨çŸ¥è¯†å…±äº«ã€Œ<a href=https://creativecommons.org/licenses/by-nc/3.0/cn/ target=_blank>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 3.0 ä¸­å›½å¤§é™†</a>ã€è®¸å¯åè®®æˆæƒã€‚</p><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8922574795542092 data-ad-slot=2802455178 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer><p style="margin:0 -3px"><span style="float:left;margin:0 -3px"><a href=#mysite-singlepage-top title="Back to Top Â· å›é¡¶éƒ¨" rel=nofollow>&#127772;2018-07-09 </a>&copy;</span>
<span style="float:right;margin:0 -3px"><a href=https://autoptr.top/license/ title="Copyright &copy; All rights reserved" target=_blank rel=nofollow>&copy; 2026 Mattt ç‰ˆæƒæ‰€æœ‰</a><a href=https://autoptr.top/ title="Back to Home Â· å›é¦–é¡µ">&#127771;</a></span></p><hr><hr><p style="margin:3px 5px"><ul class=tags><span>æ ‡ç­¾:</span><li><a class=link href=https://autoptr.top/tags/C++ target=_blank>C++</a></li><li><a class=link href=https://autoptr.top/tags/nshipster target=_blank>nshipster</a></li><span>&nbsp;&nbsp;</span>
<span>åˆ†ç±»:</span><li><a class=link href=https://autoptr.top/categories/Swift target=_blank>Swift</a></li><li><a class=link href=https://autoptr.top/categories/macOS target=_blank>macOS</a></li><li><a class=link href=https://autoptr.top/categories/CC++ target=_blank>CC++</a></li></ul><p style=margin-bottom:2em></p></p></footer></div><script src=/jscss/ajax/libs/jquery/3.3.1/jquery.slim.min.js></script><script src=/jscss/ajax/libs/twitter-bootstrap/3.1.1/js/bootstrap.min.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-37ZP0S1L3D"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-37ZP0S1L3D")</script><script src=/jscss/ajax/libs/medium-zoom/1.0.4/medium-zoom.min.js></script><script>const zoom=mediumZoom();zoom.attach("p img")</script></body></html>